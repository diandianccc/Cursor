/*! For license information please see main.8fdbb4ff.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},82:(e,t)=>{var n=60103,r=60106,o=60107,i=60108,a=60114,s=60109,l=60110,c=60112,u=60113,d=60120,p=60115,f=60116,h=60121,m=60122,g=60117,v=60129,b=60131;if("function"===typeof Symbol&&Symbol.for){var y=Symbol.for;n=y("react.element"),r=y("react.portal"),o=y("react.fragment"),i=y("react.strict_mode"),a=y("react.profiler"),s=y("react.provider"),l=y("react.context"),c=y("react.forward_ref"),u=y("react.suspense"),d=y("react.suspense_list"),p=y("react.memo"),f=y("react.lazy"),h=y("react.block"),m=y("react.server.block"),g=y("react.fundamental"),v=y("react.debug_trace_mode"),b=y("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case o:case a:case i:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case p:case s:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return x(e)===l}},86:(e,t,n)=>{e.exports=n(82)},153:(e,t,n)=>{var r=n(43),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=y.prototype=new b;x.constructor=y,m(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,j={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,o)&&!S.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:j.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+E(l,0):i,w(a)?(o="",null!=e&&(o=e.replace(_,"$&/")+"/"),P(a,t,o,"",function(e){return e})):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+E(s=e[c],c);l+=P(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=P(s=s.value,t,o,u=i+E(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],o=0;return P(e,r,"","",function(e){return t.call(n,e,o++)}),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},A={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:j};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=y,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=j.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!S.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(829)),i=r(n(736)),a=n(745);class s{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new o.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:o=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=new URL(`${this.url}/rpc/${e}`);let l;r||o?(t=r?"HEAD":"GET",Object.entries(n).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?`{${n.join(",")}}`:`${n}`]}).forEach(e=>{let[t,n]=e;s.searchParams.append(t,n)})):(t="POST",l=n);const c=Object.assign({},this.headers);return a&&(c.Prefer=`count=${a}`),new i.default({method:t,url:s,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=s},219:(e,t,n)=>{var r=n(763),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var o=f(n);o&&o!==h&&e(t,o,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var v=a[g];if(!i[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var b=p(n,v);try{c(t,v,b)}catch(y){}}}}return t}},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,p=null,f=3,h=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,O(k);else{var t=r(u);null!==t&&A(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,b(C),C=-1),h=!0;var i=f;try{for(x(n),p=r(c);null!==p&&(!(p.expirationTime>n)||e&&!P());){var a=p.callback;if("function"===typeof a){p.callback=null,f=p.priorityLevel;var s=a(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?p.callback=s:p===r(c)&&o(c),x(n)}else o(c);p=r(c)}if(null!==p)var l=!0;else{var d=r(u);null!==d&&A(w,d.startTime-n),l=!1}return l}finally{p=null,f=i,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,S=!1,N=null,C=-1,_=5,E=-1;function P(){return!(t.unstable_now()-E<_)}function I(){if(null!==N){var e=t.unstable_now();E=e;var n=!0;try{n=N(!0,e)}finally{n?j():(S=!1,N=null)}}else S=!1}if("function"===typeof y)j=function(){y(I)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,D=T.port2;T.port1.onmessage=I,j=function(){D.postMessage(null)}}else j=function(){v(I,0)};function O(e){N=e,S||(S=!0,j())}function A(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(C),C=-1):g=!0,A(w,i-a))):(e.sortIndex=s,n(c,e),m||h||(m=!0,O(k))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},286:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(630)),i=r(n(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=o.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r;let o=null,a=null,s=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),i=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&i&&i.length>1&&(s=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,s=null,l=406,c="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{o=JSON.parse(t),Array.isArray(o)&&404===e.status&&(a=[],o=null,l=200,c="OK")}catch(u){404===e.status&&""===t?(l=204,c="No Content"):o={message:t}}if(o&&this.isMaybeSingle&&(null===(r=null===o||void 0===o?void 0:o.details)||void 0===r?void 0:r.includes("0 rows"))&&(o=null,l=200,c="OK"),o&&this.shouldThrowOnError)throw new i.default(o)}return{error:o,data:a,count:s,status:l,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(286));class i extends o.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:o=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=o?`${o}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o="undefined"===typeof r?"offset":`${r}.offset`,i="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:o=!1,format:i="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${l}"; options=${s};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=i},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},400:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},579:(e,t,n)=>{e.exports=n(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>a,Request:()=>s,Response:()=>l,default:()=>i,fetch:()=>o});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const o=r.fetch,i=r.fetch.bind(r),a=r.Headers,s=r.Request,l=r.Response},730:(e,t,n)=>{var r=n(43),o=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function m(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(h,e)||!d.call(f,e)&&(p.test(e)?h[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var R,M=Object.assign;function B(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var $=!1;function U(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function F(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case k:return"Portal";case N:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(fe).forEach(function(e){he.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,je=null,Se=null;function Ne(e){if(e=xo(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=ko(t),ke(e.stateNode,e.type,t))}}function Ce(e){je?Se?Se.push(e):Se=[e]:je=e}function _e(){if(je){var e=je,t=Se;if(Se=je=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Ie=!1;function Te(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ee(e,t,n)}finally{Ie=!1,(null!==je||null!==Se)&&(Pe(),_e())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(u)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ue){Oe=!1}function Le(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Re=!1,Me=null,Be=!1,$e=null,Ue={onError:function(e){Re=!0,Me=e}};function Fe(e,t,n,r,o,i,a,s,l){Re=!1,Me=null,Le.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(i(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return He(o),e;if(a===r)return He(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=o.unstable_scheduleCallback,Je=o.unstable_cancelCallback,Ke=o.unstable_shouldYield,Qe=o.unstable_requestPaint,Ye=o.unstable_now,Xe=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=dt(s):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~o)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var yt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,jt,St,Nt,Ct=!1,_t=[],Et=null,Pt=null,It=null,Tt=new Map,Dt=new Map,Ot=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Rt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=xo(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Mt(e){var t=yo(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Nt(e.priority,function(){jt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xo(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function $t(e,t,n){Bt(e)&&n.delete(t)}function Ut(){Ct=!1,null!==Et&&Bt(Et)&&(Et=null),null!==Pt&&Bt(Pt)&&(Pt=null),null!==It&&Bt(It)&&(It=null),Tt.forEach($t),Dt.forEach($t)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Ft(t,e)}if(0<_t.length){Ft(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Ft(Et,e),null!==Pt&&Ft(Pt,e),null!==It&&Ft(It,e),Tt.forEach(t),Dt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ot.shift()}var Wt=x.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,r){var o=yt,i=Wt.transition;Wt.transition=null;try{yt=1,qt(e,t,n,r)}finally{yt=o,Wt.transition=i}}function Gt(e,t,n,r){var o=yt,i=Wt.transition;Wt.transition=null;try{yt=4,qt(e,t,n,r)}finally{yt=o,Wt.transition=i}}function qt(e,t,n,r){if(Ht){var o=Kt(e,t,n,r);if(null===o)Hr(e,t,r,Jt,n),Lt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Et=Rt(Et,e,t,n,r,o),!0;case"dragenter":return Pt=Rt(Pt,e,t,n,r,o),!0;case"mouseover":return It=Rt(It,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Tt.set(i,Rt(Tt.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Dt.set(i,Rt(Dt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<At.indexOf(e)){for(;null!==o;){var i=xo(o);if(null!==i&&wt(i),null===(i=Kt(e,t,n,r))&&Hr(e,t,r,Jt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Jt=null;function Kt(e,t,n,r){if(Jt=null,null!==(e=yo(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,o="value"in Yt?Yt.value:Yt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),pn=on(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=on(fn),mn=on(M({},fn,{dataTransfer:0})),gn=on(M({},dn,{relatedTarget:0})),vn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=on(bn),xn=on(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function Nn(){return Sn}var Cn=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=on(Cn),En=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),In=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(Tn),On=[9,13,27,32],An=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Rn=u&&"TextEvent"in window&&!Ln,Mn=u&&(!An||Ln&&8<Ln&&11>=Ln),Bn=String.fromCharCode(32),$n=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Vn(e,t,n,r){Ce(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,qn=null;function Jn(e){Br(e,0)}function Kn(e){if(q(wo(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),qn=Gn=null)}function nr(e){if("value"===e.propertyName&&Kn(qn)){var t=[];Vn(t,qn,e,we(e)),Te(Jn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(qn)}function ir(e,t){if("click"===e)return Kn(t)}function ar(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,br=null,yr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==J(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Gr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},jr={},Sr={};function Nr(e){if(jr[e])return jr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return jr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Cr=Nr("animationend"),_r=Nr("animationiteration"),Er=Nr("animationstart"),Pr=Nr("transitionend"),Ir=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ir.set(e,t),l(t,[e])}for(var Or=0;Or<Tr.length;Or++){var Ar=Tr[Or];Dr(Ar.toLowerCase(),"on"+(Ar[0].toUpperCase()+Ar.slice(1)))}Dr(Cr,"onAnimationEnd"),Dr(_r,"onAnimationIteration"),Dr(Er,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,l,c){if(Fe.apply(this,arguments),Re){if(!Re)throw Error(i(198));var u=Me;Re=!1,Me=null,Be||(Be=!0,$e=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;Mr(o,s,c),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;Mr(o,s,c),i=l}}}if(Be)throw e=$e,Be=!1,$e=null,e}function $r(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Fr]){e[Fr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Rr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Qt(t)){case 1:var o=Vt;break;case 4:o=Gt;break;default:o=qt}n=o.bind(null,t,n,e),o=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=yo(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}Te(function(){var r=i,o=we(n),a=[];e:{var s=Ir.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Cr:case _r:case Er:l=vn;break;case Pr:l=In;break;case"scroll":l=pn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var u=0!==(4&t),d=!u&&"scroll"===e,p=u?null!==s?s+"Capture":null:s;u=[];for(var f,h=r;null!==h;){var m=(f=h).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==p&&(null!=(m=De(h,p))&&u.push(Vr(h,m,f)))),d)break;h=h.return}0<u.length&&(s=new l(s,c,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yo(c)&&!c[mo])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yo(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=hn,m="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(u=En,m="onPointerLeave",p="onPointerEnter",h="pointer"),d=null==l?s:wo(l),f=null==c?s:wo(c),(s=new u(m,h+"leave",l,n,o)).target=d,s.relatedTarget=f,m=null,yo(o)===r&&((u=new u(p,h+"enter",c,n,o)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(p=c,h=0,f=u=l;f;f=qr(f))h++;for(f=0,m=p;m;m=qr(m))f++;for(;0<h-f;)u=qr(u),h--;for(;0<f-h;)p=qr(p),f--;for(;h--;){if(u===p||null!==p&&u===p.alternate)break e;u=qr(u),p=qr(p)}u=null}else u=null;null!==l&&Jr(a,s,l,u,!1),null!==c&&null!==d&&Jr(a,d,c,u,!0)}if("select"===(l=(s=r?wo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Qn;else if(Hn(s))if(Yn)g=ar;else{g=or;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(e,r))?Vn(a,g,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wo(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,br=null);break;case"focusout":br=vr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,xr(a,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,o)}var b;if(An)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zn?Un(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&zn&&(b=en()):(Xt="value"in(Yt=o)?Yt.value:Yt.textContent,zn=!0)),0<(v=Gr(r,y)).length&&(y=new xn(y,e,null,n,o),a.push({event:y,listeners:v}),b?y.data=b:null!==(b=Fn(n))&&(y.data=b))),(b=Rn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:($n=!0,Bn);case"textInput":return(e=t.data)===Bn&&$n?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!An&&Un(e,t)?(e=en(),Zt=Xt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(o=new xn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=b))}Br(a,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=De(e,n))&&r.unshift(Vr(e,i,o)),null!=(i=De(e,t))&&r.push(Vr(e,i,o))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=De(n,i))&&a.unshift(Vr(n,l,s)):o||null!=(l=De(n,i))&&a.push(Vr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);zt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var po=Math.random().toString(36).slice(2),fo="__reactFiber$"+po,ho="__reactProps$"+po,mo="__reactContainer$"+po,go="__reactEvents$"+po,vo="__reactListeners$"+po,bo="__reactHandles$"+po;function yo(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[fo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[fo])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function xo(e){return!(e=e[fo]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ko(e){return e[ho]||null}var jo=[],So=-1;function No(e){return{current:e}}function Co(e){0>So||(e.current=jo[So],jo[So]=null,So--)}function _o(e,t){So++,jo[So]=e.current,e.current=t}var Eo={},Po=No(Eo),Io=No(!1),To=Eo;function Do(e,t){var n=e.type.contextTypes;if(!n)return Eo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Oo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ao(){Co(Io),Co(Po)}function Lo(e,t,n){if(Po.current!==Eo)throw Error(i(168));_o(Po,t),_o(Io,n)}function Ro(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,W(e)||"Unknown",o));return M({},n,r)}function Mo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Eo,To=Po.current,_o(Po,e),_o(Io,Io.current),!0}function Bo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ro(e,t,To),r.__reactInternalMemoizedMergedChildContext=e,Co(Io),Co(Po),_o(Po,e)):Co(Io),_o(Io,n)}var $o=null,Uo=!1,Fo=!1;function zo(e){null===$o?$o=[e]:$o.push(e)}function Wo(){if(!Fo&&null!==$o){Fo=!0;var e=0,t=yt;try{var n=$o;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}$o=null,Uo=!1}catch(o){throw null!==$o&&($o=$o.slice(e+1)),qe(Ze,Wo),o}finally{yt=t,Fo=!1}}return null}var Ho=[],Vo=0,Go=null,qo=0,Jo=[],Ko=0,Qo=null,Yo=1,Xo="";function Zo(e,t){Ho[Vo++]=qo,Ho[Vo++]=Go,Go=e,qo=t}function ei(e,t,n){Jo[Ko++]=Yo,Jo[Ko++]=Xo,Jo[Ko++]=Qo,Qo=e;var r=Yo;e=Xo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Yo=1<<32-at(t)+o|n<<o|r,Xo=i+e}else Yo=1<<i|n<<o|r,Xo=e}function ti(e){null!==e.return&&(Zo(e,1),ei(e,1,0))}function ni(e){for(;e===Go;)Go=Ho[--Vo],Ho[Vo]=null,qo=Ho[--Vo],Ho[Vo]=null;for(;e===Qo;)Qo=Jo[--Ko],Jo[Ko]=null,Xo=Jo[--Ko],Jo[Ko]=null,Yo=Jo[--Ko],Jo[Ko]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qo?{id:Yo,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&li(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function pi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw fi(),Error(i(418));for(;t;)si(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=oi;e;)e=co(e.nextSibling)}function hi(){oi=ri=null,ii=!1}function mi(e){null===ai?ai=[e]:ai.push(e)}var gi=x.ReactCurrentBatchConfig;function vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yi(e){return(0,e._init)(e._payload)}function xi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===j?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&yi(i)===t.type)?((r=o(t,n.props)).ref=vi(e,t,n),r.return=e,r):((r=Ac(n.type,n.key,n.props,null,e.mode,r)).ref=vi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ac(t.type,t.key,t.props,null,e.mode,n)).ref=vi(e,null,t),n.return=e,n;case k:return(t=Bc(t,e.mode,n)).return=e,t;case D:return p(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;bi(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case k:return n.key===o?u(e,t,n,r):null;case D:return f(e,t,(o=n._init)(n._payload),r)}if(te(n)||L(n))return null!==o?null:d(e,t,n,r,null);bi(e,n)}return null}function h(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case D:return h(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,o,null);bi(t,r)}return null}function m(o,i,s,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(o,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(o,d),i=a(v,i,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(o,d),ii&&Zo(o,m),c;if(null===d){for(;m<s.length;m++)null!==(d=p(o,s[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return ii&&Zo(o,m),c}for(d=r(o,d);m<s.length;m++)null!==(g=h(d,o,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(o,e)}),ii&&Zo(o,m),c}function g(o,s,l,c){var u=L(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=s,g=s=0,v=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=f(o,m,b.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(o,m),s=a(y,s,g),null===d?u=y:d.sibling=y,d=y,m=v}if(b.done)return n(o,m),ii&&Zo(o,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=p(o,b.value,c))&&(s=a(b,s,g),null===d?u=b:d.sibling=b,d=b);return ii&&Zo(o,g),u}for(m=r(o,m);!b.done;g++,b=l.next())null!==(b=h(m,o,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b);return e&&m.forEach(function(e){return t(o,e)}),ii&&Zo(o,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===j&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===j){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&yi(c)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=vi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===j?((i=Lc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Ac(a.type,a.key,a.props,null,r.mode,l)).ref=vi(r,i,a),l.return=r,r=l)}return s(r);case k:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Bc(a,r.mode,l)).return=r,r=i}return s(r);case D:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(L(a))return g(r,i,a,l);bi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Mc(a,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var wi=xi(!0),ki=xi(!1),ji=No(null),Si=null,Ni=null,Ci=null;function _i(){Ci=Ni=Si=null}function Ei(e){var t=ji.current;Co(ji),e._currentValue=t}function Pi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ii(e,t){Si=e,Ci=Ni=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ys=!0),e.firstContext=null)}function Ti(e){var t=e._currentValue;if(Ci!==e)if(e={context:e,memoizedValue:t,next:null},null===Ni){if(null===Si)throw Error(i(308));Ni=e,Si.dependencies={lanes:0,firstContext:e}}else Ni=Ni.next=e;return t}var Di=null;function Oi(e){null===Di?Di=[e]:Di.push(e)}function Ai(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Oi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Li(e,r)}function Li(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function Mi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $i(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Li(e,n)}return null===(o=r.interleaved)?(t.next=t,Oi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Li(e,n)}function Fi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function zi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wi(e,t,n,r){var o=e.updateQueue;Ri=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,u=c=l=null,s=i;;){var p=s.lane,f=s.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,m=s;switch(p=t,f=n,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(f,d,p);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(p="function"===typeof(h=m.payload)?h.call(f,d,p):h)||void 0===p)break e;d=M({},d,p);break e;case 2:Ri=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=o.effects)?o.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=p;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(p=s).next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Rl|=a,e.lanes=a,e.memoizedState=d}}function Hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Vi={},Gi=No(Vi),qi=No(Vi),Ji=No(Vi);function Ki(e){if(e===Vi)throw Error(i(174));return e}function Qi(e,t){switch(_o(Ji,t),_o(qi,e),_o(Gi,Vi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Co(Gi),_o(Gi,t)}function Yi(){Co(Gi),Co(qi),Co(Ji)}function Xi(e){Ki(Ji.current);var t=Ki(Gi.current),n=le(t,e.type);t!==n&&(_o(qi,e),_o(Gi,n))}function Zi(e){qi.current===e&&(Co(Gi),Co(qi))}var ea=No(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var oa=x.ReactCurrentDispatcher,ia=x.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,pa=0,fa=0;function ha(){throw Error(i(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Za:es,e=n(r,o),da){a=0;do{if(da=!1,pa=0,25<=a)throw Error(i(301));a+=1,ca=la=null,t.updateQueue=null,oa.current=ts,e=n(r,o)}while(da)}if(oa.current=Xa,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(i(300));return e}function va(){var e=0!==pa;return pa=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ya(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(i(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=la,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=p,s=r):c=c.next=p,sa.lanes|=d,Rl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(ys=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,Rl|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=ya(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(ys=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ja(){}function Sa(e,t){var n=sa,r=ya(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,ys=!0),r=r.queue,Ra(_a.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Ta(9,Ca.bind(null,n,r,o,t),void 0,null),null===Pl)throw Error(i(349));0!==(30&aa)||Na(n,t,o)}return o}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,r){t.value=n,t.getSnapshot=r,Ea(t)&&Pa(e)}function _a(e,t,n){return n(function(){Ea(t)&&Pa(e)})}function Ea(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Pa(e){var t=Li(e,1);null!==t&&nc(t,e,1,-1)}function Ia(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ja.bind(null,sa,e),[t.memoizedState,e]}function Ta(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Da(){return ya().memoizedState}function Oa(e,t,n,r){var o=ba();sa.flags|=e,o.memoizedState=Ta(1|t,n,void 0,void 0===r?null:r)}function Aa(e,t,n,r){var o=ya();r=void 0===r?null:r;var i=void 0;if(null!==la){var a=la.memoizedState;if(i=a.destroy,null!==r&&ma(r,a.deps))return void(o.memoizedState=Ta(t,n,i,r))}sa.flags|=e,o.memoizedState=Ta(1|t,n,i,r)}function La(e,t){return Oa(8390656,8,e,t)}function Ra(e,t){return Aa(2048,8,e,t)}function Ma(e,t){return Aa(4,2,e,t)}function Ba(e,t){return Aa(4,4,e,t)}function $a(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Aa(4,4,$a.bind(null,t,e),n)}function Fa(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,ys=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),sa.lanes|=n,Rl|=n,e.baseState=!0),t)}function Va(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{yt=n,ia.transition=r}}function Ga(){return ya().memoizedState}function qa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ka(e))Qa(t,n);else if(null!==(n=Ai(e,t,n,r))){nc(n,e,r,ec()),Ya(n,t,r)}}function Ja(e,t,n){var r=tc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ka(e))Qa(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(o.next=o,Oi(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Ai(e,t,o,r))&&(nc(n,e,r,o=ec()),Ya(n,t,r))}}function Ka(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Qa(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Xa={readContext:Ti,useCallback:ha,useContext:ha,useEffect:ha,useImperativeHandle:ha,useInsertionEffect:ha,useLayoutEffect:ha,useMemo:ha,useReducer:ha,useRef:ha,useState:ha,useDebugValue:ha,useDeferredValue:ha,useTransition:ha,useMutableSource:ha,useSyncExternalStore:ha,useId:ha,unstable_isNewReconciler:!1},Za={readContext:Ti,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,$a.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Ia,useDebugValue:Fa,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Ia(!1),t=e[0];return e=Va.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,o=ba();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Pl)throw Error(i(349));0!==(30&aa)||Na(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,La(_a.bind(null,r,a,e),[e]),r.flags|=2048,Ta(9,Ca.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Pl.identifierPrefix;if(ii){var n=Xo;t=":"+t+"R"+(n=(Yo&~(1<<32-at(Yo)-1)).toString(32)+n),0<(n=pa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ti,useCallback:za,useContext:Ti,useEffect:Ra,useImperativeHandle:Ua,useInsertionEffect:Ma,useLayoutEffect:Ba,useMemo:Wa,useReducer:wa,useRef:Da,useState:function(){return wa(xa)},useDebugValue:Fa,useDeferredValue:function(e){return Ha(ya(),la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ya().memoizedState]},useMutableSource:ja,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1},ts={readContext:Ti,useCallback:za,useContext:Ti,useEffect:Ra,useImperativeHandle:Ua,useInsertionEffect:Ma,useLayoutEffect:Ba,useMemo:Wa,useReducer:ka,useRef:Da,useState:function(){return ka(xa)},useDebugValue:Fa,useDeferredValue:function(e){var t=ya();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[ka(xa)[0],ya().memoizedState]},useMutableSource:ja,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=$i(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,o))&&(nc(t,e,o,r),Fi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=$i(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,o))&&(nc(t,e,o,r),Fi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),o=$i(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Ui(e,o,r))&&(nc(t,e,r,n),Fi(t,e,r))}};function is(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,i))}function as(e,t,n){var r=!1,o=Eo,i=t.contextType;return"object"===typeof i&&null!==i?i=Ti(i):(o=Oo(t)?To:Po.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Do(e,o):Eo),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Mi(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Ti(i):(i=Oo(t)?To:Po.current,o.context=Do(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(rs(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),Wi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=F(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=$i(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=r),ds(0,t)},n}function hs(e,t,n){(n=$i(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$i(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var bs=x.ReactCurrentOwner,ys=!1;function xs(e,t,n,r){t.child=null===e?ki(t,null,n,r):wi(t,e.child,n,r)}function ws(e,t,n,r,o){n=n.render;var i=t.ref;return Ii(t,o),r=ga(e,t,n,r,i,o),n=va(),null===e||ys?(ii&&n&&ti(t),t.flags|=1,xs(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function ks(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Dc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ac(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,js(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hs(e,t,o)}return t.flags|=1,(e=Oc(i,r)).ref=t.ref,e.return=t,t.child=e}function js(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(ys=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Hs(e,t,o);0!==(131072&e.flags)&&(ys=!0)}}return Cs(e,t,n,r,o)}function Ss(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_o(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_o(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,_o(Ol,Dl),Dl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,_o(Ol,Dl),Dl|=r;return xs(e,t,o,n),t.child}function Ns(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,o){var i=Oo(n)?To:Po.current;return i=Do(t,i),Ii(t,o),n=ga(e,t,n,r,i,o),r=va(),null===e||ys?(ii&&r&&ti(t),t.flags|=1,xs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function _s(e,t,n,r,o){if(Oo(n)){var i=!0;Mo(t)}else i=!1;if(Ii(t,o),null===t.stateNode)Ws(e,t),as(t,n,r),ls(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ti(c):c=Do(t,c=Oo(n)?To:Po.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),Ri=!1;var p=t.memoizedState;a.state=p,Wi(t,r,a,o),l=t.memoizedState,s!==r||p!==l||Io.current||Ri?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Ri||is(t,n,s,r,p,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Bi(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,d=t.pendingProps,p=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ti(l):l=Do(t,l=Oo(n)?To:Po.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||p!==l)&&ss(t,a,r,l),Ri=!1,p=t.memoizedState,a.state=p,Wi(t,r,a,o);var h=t.memoizedState;s!==d||p!==h||Io.current||Ri?("function"===typeof f&&(rs(t,n,f,r),h=t.memoizedState),(c=Ri||is(t,n,c,r,p,h,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Es(e,t,n,r,i,o)}function Es(e,t,n,r,o,i){Ns(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&Bo(t,n,!1),Hs(e,t,i);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,s,i)):xs(e,t,s,i),t.memoizedState=r.state,o&&Bo(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Lo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lo(0,t.context,!1),Qi(e,t.containerInfo)}function Is(e,t,n,r,o){return hi(),mi(o),t.flags|=256,xs(e,t,n,r),t.child}var Ts,Ds,Os,As,Ls={dehydrated:null,treeContext:null,retryLane:0};function Rs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,n){var r,o=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),_o(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Rc(l,o,0,null),e=Lc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Rs(n),t.memoizedState=Ls,e):Bs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,$s(e,t,s,r=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Rc({mode:"visible",children:r.children},o,0,null),(a=Lc(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&wi(t,e.child,null,s),t.child.memoizedState=Rs(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return $s(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,$s(e,t,s,r=us(a=Error(i(419)),r,void 0))}if(l=0!==(s&e.childLanes),ys||l){if(null!==(r=Pl)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Li(e,o),nc(r,e,o,-1))}return mc(),$s(e,t,s,r=us(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Jo[Ko++]=Yo,Jo[Ko++]=Xo,Jo[Ko++]=Qo,Yo=e.id,Xo=e.overflow,Qo=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,a,n);if(s){s=o.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Oc(r,s):(s=Lc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Rs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,o}return e=(s=e.child).sibling,o=Oc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Bs(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $s(e,t,n,r){return null!==r&&mi(r),wi(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Pi(e.return,t,n)}function Fs(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function zs(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_o(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Fs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Fs(t,!0,n,null,i);break;case"together":Fs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vs(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Oo(t.type)&&Ao(),Gs(t),null;case 3:return r=t.stateNode,Yi(),Co(Io),Co(Po),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(pi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(ac(ai),ai=null))),Ds(e,t),Gs(t),null;case 5:Zi(t);var o=Ki(Ji.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Gs(t),null}if(e=Ki(Gi.current),pi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fo]=t,r[ho]=a,e=0!==(1&t.mode),n){case"dialog":$r("cancel",r),$r("close",r);break;case"iframe":case"object":case"embed":$r("load",r);break;case"video":case"audio":for(o=0;o<Lr.length;o++)$r(Lr[o],r);break;case"source":$r("error",r);break;case"img":case"image":case"link":$r("error",r),$r("load",r);break;case"details":$r("toggle",r);break;case"input":Q(r,a),$r("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},$r("invalid",r);break;case"textarea":oe(r,a),$r("invalid",r)}for(var l in be(n,a),o=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&$r("scroll",r)}switch(n){case"input":G(r),Z(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fo]=t,e[ho]=r,Ts(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":$r("cancel",e),$r("close",e),o=r;break;case"iframe":case"object":case"embed":$r("load",e),o=r;break;case"video":case"audio":for(o=0;o<Lr.length;o++)$r(Lr[o],e);o=r;break;case"source":$r("error",e),o=r;break;case"img":case"image":case"link":$r("error",e),$r("load",e),o=r;break;case"details":$r("toggle",e),o=r;break;case"input":Q(e,r),o=K(e,r),$r("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=M({},r,{value:void 0}),$r("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),$r("invalid",e)}for(a in be(n,o),c=o)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&pe(e,u):"number"===typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&$r("scroll",e):null!=u&&y(e,a,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)As(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Ki(Ji.current),Ki(Gi.current),pi(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fo]=t,t.stateNode=r}return Gs(t),null;case 13:if(Co(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))fi(),hi(),t.flags|=98560,a=!1;else if(a=pi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[fo]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else null!==ai&&(ac(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Al&&(Al=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Yi(),Ds(e,t),null===e&&zr(t.stateNode.containerInfo),Gs(t),null;case 10:return Ei(t.type._context),Gs(t),null;case 19:if(Co(ea),null===(a=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Vs(a,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Vs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _o(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>zl&&(t.flags|=128,r=!0,Vs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ii)return Gs(t),null}else 2*Ye()-a.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Vs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=ea.current,_o(ea,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Js(e,t){switch(ni(t),t.tag){case 1:return Oo(t.type)&&Ao(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yi(),Co(Io),Co(Po),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(Co(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Co(ea),null;case 4:return Yi(),null;case 10:return Ei(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ts=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Os=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Ki(Gi.current);var i,a=null;switch(n){case"input":o=K(e,o),r=K(e,r),a=[];break;case"select":o=M({},o,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in be(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&$r("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},As=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Qs=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Xs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&el(t,n,i)}o=o.next}while(o!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fo],delete t[ho],delete t[go],delete t[vo],delete t[bo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Qs||Zs(n,t);case 6:var r=ul,o=dl;ul=null,pl(e,t,n),dl=o,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),zt(e)):lo(ul,n.stateNode));break;case 4:r=ul,o=dl,ul=n.stateNode.containerInfo,dl=!0,pl(e,t,n),ul=r,dl=o;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),o=o.next}while(o!==r)}pl(e,t,n);break;case 1:if(!Qs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,pl(e,t,n),Qs=r):pl(e,t,n);break;default:pl(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach(function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(a,s,o),ul=null,dl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){Sc(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var o=e.stateNode;try{pe(o,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Y(o,a),ye(l,s);var u=ye(l,a);for(s=0;s<c.length;s+=2){var d=c[s],p=c[s+1];"style"===d?ge(o,p):"dangerouslySetInnerHTML"===d?de(o,p):"children"===d?pe(o,p):y(o,d,p,u)}switch(l){case"input":X(o,a);break;case"textarea":ie(o,a);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var h=a.value;null!=h?ne(o,!!a.multiple,h,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[ho]=a}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Fl=Ye())),4&r&&hl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(u=Qs)||d,ml(t,e),Qs=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xs=e,d=e.child;null!==d;){for(p=Xs=d;null!==Xs;){switch(h=(f=Xs).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zs(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Zs(f,f.return);break;case 22:if(null!==f.memoizedState){wl(p);continue}}null!==h?(h.return=f,Xs=h):wl(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{o=p.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=p.stateNode,s=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Sc(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ml(t,e),vl(e),4&r&&hl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(pe(o,""),r.flags&=-33),cl(e,sl(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(i(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Xs=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var o=Xs,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Ks;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Ks;var c=Qs;if(Ks=a,(Qs=l)&&!c)for(Xs=o;null!==Xs;)l=(a=Xs).child,22===a.tag&&null!==a.memoizedState?kl(o):null!==l?(l.return=a,Xs=l):kl(o);for(;null!==i;)Xs=i,yl(i,t,n),i=i.sibling;Xs=o,Ks=s,Qs=c}xl(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Xs=i):xl(e)}}function xl(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hi(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hi(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&zt(p)}}}break;default:throw Error(i(163))}Qs||512&t.flags&&ol(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function wl(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function kl(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){Sc(t,o,l)}}var i=t.return;try{ol(t)}catch(l){Sc(t,i,l)}break;case 5:var a=t.return;try{ol(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var jl,Sl=Math.ceil,Nl=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,_l=x.ReactCurrentBatchConfig,El=0,Pl=null,Il=null,Tl=0,Dl=0,Ol=No(0),Al=0,Ll=null,Rl=0,Ml=0,Bl=0,$l=null,Ul=null,Fl=0,zl=1/0,Wl=null,Hl=!1,Vl=null,Gl=null,ql=!1,Jl=null,Kl=0,Ql=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&El)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Tl?Tl&-Tl:null!==gi.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Ql)throw Ql=0,Yl=null,Error(i(185));vt(e,n,r),0!==(2&El)&&e===Pl||(e===Pl&&(0===(2&El)&&(Ml|=n),4===Al&&sc(e,Tl)),rc(e,r),1===n&&0===El&&0===(1&t.mode)&&(zl=Ye()+500,Uo&&Wo()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,l=o[a];-1===l?0!==(s&n)&&0===(s&r)||(o[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=pt(e,e===Pl?Tl:0);if(0===r)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){Uo=!0,zo(e)}(lc.bind(null,e)):zo(lc.bind(null,e)),ao(function(){0===(6&El)&&Wo()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(i(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=pt(e,e===Pl?Tl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var o=El;El|=2;var a=hc();for(Pl===e&&Tl===t||(Wl=null,zl=Ye()+500,pc(e,t));;)try{bc();break}catch(l){fc(e,l)}_i(),Nl.current=a,El=o,null!==Il?t=0:(Pl=null,Tl=0,t=Al)}if(0!==t){if(2===t&&(0!==(o=ht(e))&&(r=o,t=ic(e,o))),1===t)throw n=Ll,pc(e,0),sc(e,r),rc(e,Ye()),n;if(6===t)sc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gc(e,r))&&(0!==(a=ht(e))&&(r=a,t=ic(e,a))),1===t))throw n=Ll,pc(e,0),sc(e,r),rc(e,Ye()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Ul,Wl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Fl+500-Ye())){if(0!==pt(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(wc.bind(null,e,Ul,Wl),t);break}wc(e,Ul,Wl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ro(wc.bind(null,e,Ul,Wl),r);break}wc(e,Ul,Wl);break;default:throw Error(i(329))}}}return rc(e,Ye()),e.callbackNode===n?oc.bind(null,e):null}function ic(e,t){var n=$l;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function sc(e,t){for(t&=~Bl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&El))throw Error(i(327));kc();var t=pt(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ll,pc(e,0),sc(e,t),rc(e,Ye()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Wl),rc(e,Ye()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(zl=Ye()+500,Uo&&Wo())}}function uc(e){null!==Jl&&0===Jl.tag&&0===(6&El)&&kc();var t=El;El|=1;var n=_l.transition,r=yt;try{if(_l.transition=null,yt=1,e)return e()}finally{yt=r,_l.transition=n,0===(6&(El=t))&&Wo()}}function dc(){Dl=Ol.current,Co(Ol)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ao();break;case 3:Yi(),Co(Io),Co(Po),ra();break;case 5:Zi(r);break;case 4:Yi();break;case 13:case 19:Co(ea);break;case 10:Ei(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Il=e=Oc(e.current,null),Tl=Dl=t,Al=0,Ll=null,Bl=Ml=Rl=0,Ul=$l=null,null!==Di){for(t=0;t<Di.length;t++)if(null!==(r=(n=Di[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Di=null}return e}function fc(e,t){for(;;){var n=Il;try{if(_i(),oa.current=Xa,ua){for(var r=sa.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,pa=0,Cl.current=null,null===n||null===n.return){Al=1,Ll=t,Il=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=gs(s);if(null!==h){h.flags&=-257,vs(h,s,l,0,t),1&h.mode&&ms(a,u,t),c=u;var m=(t=h).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(a,u,t),mc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),mi(cs(c,l));break e}}a=c=cs(c,l),4!==Al&&(Al=2),null===$l?$l=[a]:$l.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zi(a,fs(0,c,t));break e;case 1:l=c;var b=a.type,y=a.stateNode;if(0===(128&a.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gl||!Gl.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,zi(a,hs(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(x){t=x,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function hc(){var e=Nl.current;return Nl.current=Xa,null===e?Xa:e}function mc(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===Pl||0===(268435455&Rl)&&0===(268435455&Ml)||sc(Pl,Tl)}function gc(e,t){var n=El;El|=2;var r=hc();for(Pl===e&&Tl===t||(Wl=null,pc(e,t));;)try{vc();break}catch(o){fc(e,o)}if(_i(),El=n,Nl.current=r,null!==Il)throw Error(i(261));return Pl=null,Tl=0,Al}function vc(){for(;null!==Il;)yc(Il)}function bc(){for(;null!==Il&&!Ke();)yc(Il)}function yc(e){var t=jl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?xc(e):Il=t,Cl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Dl)))return void(Il=n)}else{if(null!==(n=Js(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Al=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Al&&(Al=5)}function wc(e,t,n){var r=yt,o=_l.transition;try{_l.transition=null,yt=1,function(e,t,n,r){do{kc()}while(null!==Jl);if(0!==(6&El))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Pl&&(Il=Pl=null,Tl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Pc(tt,function(){return kc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=_l.transition,_l.transition=null;var s=yt;yt=1;var l=El;El|=4,Cl.current=null,function(e,t){if(eo=Ht,fr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,p=e,f=null;t:for(;;){for(var h;p!==n||0!==o&&3!==p.nodeType||(l=s+o),p!==a||0!==r&&3!==p.nodeType||(c=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(h=p.firstChild);)f=p,p=h;for(;;){if(p===e)break t;if(f===n&&++u===o&&(l=s),f===a&&++d===r&&(c=s),null!==(h=p.nextSibling))break;f=(p=f).parentNode}p=h}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ht=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}m=tl,tl=!1}(e,n),gl(n,e),hr(to),Ht=!!eo,to=eo=null,e.current=n,bl(n,e,o),Qe(),El=l,yt=s,_l.transition=a}else e.current=n;if(ql&&(ql=!1,Jl=e,Kl=o),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Kl)&&0!==e.tag&&kc(),a=e.pendingLanes,0!==(1&a)?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,Wo()}(e,t,n,r)}finally{_l.transition=o,yt=r}return null}function kc(){if(null!==Jl){var e=xt(Kl),t=_l.transition,n=yt;try{if(_l.transition=null,yt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,Kl=0,0!==(6&El))throw Error(i(331));var o=El;for(El|=4,Xs=e.current;null!==Xs;){var a=Xs,s=a.child;if(0!==(16&Xs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xs=u;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var p=d.child;if(null!==p)p.return=d,Xs=p;else for(;null!==Xs;){var f=(d=Xs).sibling,h=d.return;if(il(d),d===u){Xs=null;break}if(null!==f){f.return=h,Xs=f;break}Xs=h}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(a=Xs).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,Xs=b;break e}Xs=a.return}}var y=e.current;for(Xs=y;null!==Xs;){var x=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Xs=x;else e:for(s=y;null!==Xs;){if(0!==(2048&(l=Xs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Sc(l,l.return,k)}if(l===s){Xs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xs=w;break e}Xs=l.return}}if(El=o,Wo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(k){}r=!0}return r}finally{yt=n,_l.transition=t}}return!1}function jc(e,t,n){e=Ui(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Ui(t,e=hs(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Tl&n)===n&&(4===Al||3===Al&&(130023424&Tl)===Tl&&500>Ye()-Fl?pc(e,0):Bl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Li(e,t))&&(vt(e,t,n),rc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cc(e,n)}function Pc(e,t){return qe(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,r){return new Ic(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ac(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Dc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case j:return Lc(n.children,o,a,t);case S:s=8,o|=8;break;case N:return(e=Tc(12,n,t,2|o)).elementType=N,e.lanes=a,e;case P:return(e=Tc(13,n,t,o)).elementType=P,e.lanes=a,e;case I:return(e=Tc(19,n,t,o)).elementType=I,e.lanes=a,e;case O:return Rc(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case _:s=9;break e;case E:s=11;break e;case T:s=14;break e;case D:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Tc(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Tc(7,e,r,t)).lanes=n,e}function Rc(e,t,n,r){return(e=Tc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $c(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,o,i,a,s,l){return e=new $c(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Tc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mi(i),e}function Fc(e){if(!e)return Eo;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Oo(n))return Ro(e,n,t)}return t}function zc(e,t,n,r,o,i,a,s,l){return(e=Uc(n,r,!0,e,0,i,0,s,l)).context=Fc(null),n=e.current,(i=$i(r=ec(),o=tc(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,o),e.current.lanes=o,vt(e,o,r),rc(e,r),e}function Wc(e,t,n,r){var o=t.current,i=ec(),a=tc(o);return n=Fc(n),null===t.context?t.context=n:t.pendingContext=n,(t=$i(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(o,t,a))&&(nc(e,o,a,i),Fi(e,o,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Io.current)ys=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ys=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),hi();break;case 5:Xi(t);break;case 1:Oo(t.type)&&Mo(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;_o(ji,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_o(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(_o(ea,1&ea.current),null!==(e=Hs(e,t,n))?e.sibling:null);_o(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),_o(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Hs(e,t,n)}(e,t,n);ys=0!==(131072&e.flags)}else ys=!1,ii&&0!==(1048576&t.flags)&&ei(t,qo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var o=Do(t,Po.current);Ii(t,n),o=ga(null,t,r,e,o,n);var a=va();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oo(r)?(a=!0,Mo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Mi(t),o.updater=os,t.stateNode=o,o._reactInternals=t,ls(t,r,e,n),t=Es(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),xs(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===T)return 14}return 2}(r),e=ns(r,e),o){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=_s(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ns(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Cs(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,_s(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(Ps(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Bi(e,t),Wi(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Is(e,t,r,n,o=cs(Error(i(423)),t));break e}if(r!==o){t=Is(e,t,r,n,o=cs(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=ki(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===o){t=Hs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return Xi(t),null===e&&ui(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),Ns(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Ms(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wi(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,ws(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,_o(ji,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!Io.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=$i(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Pi(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Pi(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ii(t,n),r=r(o=Ti(o)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),ks(e,t,r,o=ns(r.type,o),n);case 15:return js(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),Ws(e,t),t.tag=1,Oo(r)?(e=!0,Mo(t)):e=!1,Ii(t,n),as(t,r,o),ls(t,r,o,n),Es(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Ss(e,t,n)}throw Error(i(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Hc(a);s.call(e)}}Wc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[mo]=a.current,zr(8===e.nodeType?e.parentNode:e),uc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[mo]=l.current,zr(8===e.nodeType?e.parentNode:e),uc(function(){Wc(t,l,n,r)}),l}(n,t,e,o,r);return Hc(a)}Kc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wc(e,t,null,null)},Kc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Wc(null,e,null,null)}),t[mo]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),rc(t,Ye()),0===(6&El)&&(zl=Ye()+500,Wo()))}break;case 13:uc(function(){var t=Li(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Gc(e,1)}},kt=function(e){if(13===e.tag){var t=Li(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),n=Li(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},St=function(){return yt},Nt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},ke=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ko(r);if(!o)throw Error(i(90));q(r),X(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Pe=uc;var eu={usingClientEntryPoint:!1,Events:[xo,wo,ko,Ce,_e,cc]},tu={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ot=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(i(299));var n=!1,r="",o=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,zr(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,o,0,a,s),e[mo]=t.current,zr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Kc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[mo]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(374));class i extends o.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="";"plain"===r?o="pl":"phrase"===r?o="ph":"websearch"===r&&(o="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}t.default=i},745:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const r=n(400);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`}},763:(e,t,n)=>{e.exports=n(983)},829:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:o}=t;this.url=e,this.headers=n,this.schema=r,this.fetch=o}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let i=!1;const a=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new o.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new o.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new o.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const o=r(n(210));t.PostgrestClient=o.default;const i=r(n(829));t.PostgrestQueryBuilder=i.default;const a=r(n(736));t.PostgrestFilterBuilder=a.default;const s=r(n(374));t.PostgrestTransformBuilder=s.default;const l=r(n(286));t.PostgrestBuilder=l.default;const c=r(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:o.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:l.default,PostgrestError:c.default}},983:(e,t)=>{var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case i:case s:case a:case f:return e;default:switch(e=e&&e.$$typeof){case c:case p:case g:case m:case l:return e;default:return t}}case o:return t}}}function k(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=p,t.Fragment=i,t.Lazy=g,t.Memo=m,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=f,t.isAsyncMode=function(e){return k(e)||w(e)===u},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===s||e===a||e===f||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===p||e.$$typeof===b||e.$$typeof===y||e.$$typeof===x||e.$$typeof===v)},t.typeOf=w}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(43),o=n(391);const i={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a;const s=new Uint8Array(16);function l(){if(!a&&(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(s)}const c=[];for(let wc=0;wc<256;++wc)c.push((wc+256).toString(16).slice(1));function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]}const d=function(e,t,n){if(i.randomUUID&&!t&&!e)return i.randomUUID();const r=(e=e||{}).random||(e.rng||l)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return u(r)};function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,p(e,t)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(null,arguments)}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}function v(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var w="function"===typeof Symbol&&Symbol.observable||"@@observable",k=function(){return Math.random().toString(36).substring(7).split("").join(".")},j={INIT:"@@redux/INIT"+k(),REPLACE:"@@redux/REPLACE"+k(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+k()}};function S(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function N(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(x(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(x(1));return n(N)(e,t)}if("function"!==typeof e)throw new Error(x(2));var o=e,i=t,a=[],s=a,l=!1;function c(){s===a&&(s=a.slice())}function u(){if(l)throw new Error(x(3));return i}function d(e){if("function"!==typeof e)throw new Error(x(4));if(l)throw new Error(x(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(x(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),a=null}}}function p(e){if(!S(e))throw new Error(x(7));if("undefined"===typeof e.type)throw new Error(x(8));if(l)throw new Error(x(9));try{l=!0,i=o(i,e)}finally{l=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}return p({type:j.INIT}),(r={dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(x(10));o=e,p({type:j.REPLACE})}})[w]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(x(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[w]=function(){return this},e},r}function C(e,t){return function(){return t(e.apply(this,arguments))}}function _(e,t){if("function"===typeof e)return C(e,t);if("object"!==typeof e||null===e)throw new Error(x(16));var n={};for(var r in e){var o=e[r];"function"===typeof o&&(n[r]=C(o,t))}return n}function E(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var P=r.createContext(null);var I=function(e){e()},T=function(){return I};var D={notify:function(){},get:function(){return[]}};function O(e,t){var n,r=D;function o(){a.onStateChange&&a.onStateChange()}function i(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){var e=T(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}var a={addNestedSub:function(e){return i(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:i,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=D)},getListeners:function(){return r}};return a}var A="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;const L=function(e){var t=e.store,n=e.context,o=e.children,i=(0,r.useMemo)(function(){var e=O(t);return{store:t,subscription:e}},[t]),a=(0,r.useMemo)(function(){return t.getState()},[t]);A(function(){var e=i.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[i,a]);var s=n||P;return r.createElement(s.Provider,{value:i},o)};function R(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}var M=n(219),B=n.n(M),$=n(86),U=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],F=["reactReduxForwardedRef"],z=[],W=[null,null];function H(e,t){var n=e[1];return[t.payload,n+1]}function V(e,t,n){A(function(){return e.apply(void 0,t)},n)}function G(e,t,n,r,o,i,a){e.current=r,t.current=o,n.current=!1,i.current&&(i.current=null,a())}function q(e,t,n,r,o,i,a,s,l,c){if(e){var u=!1,d=null,p=function(){if(!u){var e,n,p=t.getState();try{e=r(p,o.current)}catch(f){n=f,d=f}n||(d=null),e===i.current?a.current||l():(i.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=p,n.trySubscribe(),p();return function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var J=function(){return[null,0]};function K(e,t){void 0===t&&(t={});var n=t,o=n.getDisplayName,i=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,a=n.methodName,s=void 0===a?"connectAdvanced":a,l=n.renderCountProp,c=void 0===l?void 0:l,u=n.shouldHandleStateChanges,d=void 0===u||u,p=n.storeKey,f=void 0===p?"store":p,m=(n.withRef,n.forwardRef),g=void 0!==m&&m,v=n.context,b=void 0===v?P:v,y=R(n,U),x=b;return function(t){var n=t.displayName||t.name||"Component",o=i(n),a=h({},y,{getDisplayName:i,methodName:s,renderCountProp:c,shouldHandleStateChanges:d,storeKey:f,displayName:o,wrappedComponentName:n,WrappedComponent:t}),l=y.pure;var u=l?r.useMemo:function(e){return e()};function p(n){var o=(0,r.useMemo)(function(){var e=n.reactReduxForwardedRef,t=R(n,F);return[n.context,e,t]},[n]),i=o[0],s=o[1],l=o[2],c=(0,r.useMemo)(function(){return i&&i.Consumer&&(0,$.isContextConsumer)(r.createElement(i.Consumer,null))?i:x},[i,x]),p=(0,r.useContext)(c),f=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(p)&&Boolean(p.store);var m=f?n.store:p.store,g=(0,r.useMemo)(function(){return function(t){return e(t.dispatch,a)}(m)},[m]),v=(0,r.useMemo)(function(){if(!d)return W;var e=O(m,f?null:p.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[m,f,p]),b=v[0],y=v[1],w=(0,r.useMemo)(function(){return f?p:h({},p,{subscription:b})},[f,p,b]),k=(0,r.useReducer)(H,z,J),j=k[0][0],S=k[1];if(j&&j.error)throw j.error;var N=(0,r.useRef)(),C=(0,r.useRef)(l),_=(0,r.useRef)(),E=(0,r.useRef)(!1),P=u(function(){return _.current&&l===C.current?_.current:g(m.getState(),l)},[m,j,l]);V(G,[C,N,E,l,P,_,y]),V(q,[d,m,b,g,C,N,E,_,y,S],[m,b,g]);var I=(0,r.useMemo)(function(){return r.createElement(t,h({},P,{ref:s}))},[s,t,P]);return(0,r.useMemo)(function(){return d?r.createElement(c.Provider,{value:w},I):I},[c,I,w])}var m=l?r.memo(p):p;if(m.WrappedComponent=t,m.displayName=p.displayName=o,g){var v=r.forwardRef(function(e,t){return r.createElement(m,h({},e,{reactReduxForwardedRef:t}))});return v.displayName=o,v.WrappedComponent=t,B()(v,t)}return B()(m,t)}}function Q(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function Y(e,t){if(Q(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!Q(e[n[o]],t[n[o]]))return!1;return!0}function X(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function Z(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function ee(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Z(e);var o=r(t,n);return"function"===typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=Z(o),o=r(t,n)),o},r}}const te=[function(e){return"function"===typeof e?ee(e):void 0},function(e){return e?void 0:X(function(e){return{dispatch:e}})},function(e){return e&&"object"===typeof e?X(function(t){return function(e,t){var n={},r=function(r){var o=e[r];"function"===typeof o&&(n[r]=function(){return t(o.apply(void 0,arguments))})};for(var o in e)r(o);return n}(e,t)}):void 0}];const ne=[function(e){return"function"===typeof e?ee(e):void 0},function(e){return e?void 0:X(function(){return{}})}];function re(e,t,n){return h({},n,e,t)}const oe=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,s){var l=e(t,n,s);return a?o&&i(l,r)||(r=l):(a=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return re}}];var ie=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function ae(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}}function se(e,t,n,r,o){var i,a,s,l,c,u=o.areStatesEqual,d=o.areOwnPropsEqual,p=o.areStatePropsEqual,f=!1;function h(o,f){var h=!d(f,a),m=!u(o,i,f,a);return i=o,a=f,h&&m?(s=e(i,a),t.dependsOnOwnProps&&(l=t(r,a)),c=n(s,l,a)):h?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(l=t(r,a)),c=n(s,l,a)):m?function(){var t=e(i,a),r=!p(t,s);return s=t,r&&(c=n(s,l,a)),c}():c}return function(o,u){return f?h(o,u):(s=e(i=o,a=u),l=t(r,a),c=n(s,l,a),f=!0,c)}}function le(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=R(t,ie),a=n(e,i),s=r(e,i),l=o(e,i);return(i.pure?se:ae)(a,s,l,e,i)}var ce=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function ue(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function de(e,t){return e===t}function pe(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?K:n,o=t.mapStateToPropsFactories,i=void 0===o?ne:o,a=t.mapDispatchToPropsFactories,s=void 0===a?te:a,l=t.mergePropsFactories,c=void 0===l?oe:l,u=t.selectorFactory,d=void 0===u?le:u;return function(e,t,n,o){void 0===o&&(o={});var a=o,l=a.pure,u=void 0===l||l,p=a.areStatesEqual,f=void 0===p?de:p,m=a.areOwnPropsEqual,g=void 0===m?Y:m,v=a.areStatePropsEqual,b=void 0===v?Y:v,y=a.areMergedPropsEqual,x=void 0===y?Y:y,w=R(a,ce),k=ue(e,i,"mapStateToProps"),j=ue(t,s,"mapDispatchToProps"),S=ue(n,c,"mergeProps");return r(d,h({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:k,initMapDispatchToProps:j,initMergeProps:S,pure:u,areStatesEqual:f,areOwnPropsEqual:g,areStatePropsEqual:b,areMergedPropsEqual:x},w))}}const fe=pe();var he,me=n(950);function ge(e,t){var n=(0,r.useState)(function(){return{inputs:t,result:e()}})[0],o=(0,r.useRef)(!0),i=(0,r.useRef)(n),a=o.current||Boolean(t&&i.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,i.current.inputs))?i.current:{inputs:t,result:e()};return(0,r.useEffect)(function(){o.current=!1,i.current=a},[a]),a.result}he=me.unstable_batchedUpdates,I=he;var ve=ge,be=function(e,t){return ge(function(){return e},t)},ye="Invariant failed";var xe=function(e){var t=e.top,n=e.right,r=e.bottom,o=e.left;return{top:t,right:n,bottom:r,left:o,width:n-o,height:r-t,x:o,y:t,center:{x:(n+o)/2,y:(r+t)/2}}},we=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},ke=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},je={top:0,right:0,bottom:0,left:0},Se=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?je:n,o=e.border,i=void 0===o?je:o,a=e.padding,s=void 0===a?je:a,l=xe(we(t,r)),c=xe(ke(t,i)),u=xe(ke(c,s));return{marginBox:l,borderBox:xe(t),paddingBox:c,contentBox:u,margin:r,border:i,padding:s}},Ne=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e){if(!e)throw new Error(ye)}(!1),n},Ce=function(e,t){var n,r,o=e.borderBox,i=e.border,a=e.margin,s=e.padding,l=(r=t,{top:(n=o).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return Se({borderBox:l,border:i,margin:a,padding:s})},_e=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),Ce(e,t)},Ee=function(e,t){var n={top:Ne(t.marginTop),right:Ne(t.marginRight),bottom:Ne(t.marginBottom),left:Ne(t.marginLeft)},r={top:Ne(t.paddingTop),right:Ne(t.paddingRight),bottom:Ne(t.paddingBottom),left:Ne(t.paddingLeft)},o={top:Ne(t.borderTopWidth),right:Ne(t.borderRightWidth),bottom:Ne(t.borderBottomWidth),left:Ne(t.borderLeftWidth)};return Se({borderBox:e,margin:n,padding:r,border:o})},Pe=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return Ee(t,n)},Ie=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function Te(e,t){return e===t||!(!Ie(e)||!Ie(t))}function De(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Te(e[n],t[n]))return!1;return!0}const Oe=function(e,t){var n;void 0===t&&(t=De);var r,o=[],i=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return i&&n===this&&t(a,o)||(r=e.apply(this,a),i=!0,n=this,o=a),r}};const Ae=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t=o,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function Le(e,t){}Le.bind(null,"warn"),Le.bind(null,"error");function Re(){}function Me(e,t,n){var r=t.map(function(t){var r=function(e,t){return h({},e,{},t)}(n,t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}});return function(){r.forEach(function(e){e()})}}var Be="Invariant failed";function $e(e){this.message=e}function Ue(e,t){if(!e)throw new $e(Be)}$e.prototype.toString=function(){return this.message};var Fe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=Re,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof $e&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}f(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=Me(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof $e))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(r.Component),ze=function(e){return e+1},We=function(e,t){var n=e.droppableId===t.droppableId,r=ze(e.index),o=ze(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+o+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+o+"\n  "},He=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},Ve=function(e){return"\n  The item has returned to its starting position\n  of "+ze(e.index)+"\n"},Ge="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",qe=function(e){return"\n  You have lifted an item in position "+ze(e.source.index)+"\n"},Je=function(e){var t=e.destination;if(t)return We(e.source,t);var n=e.combine;return n?He(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Ke=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Ve(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+We(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+He(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Ve(e.source)+"\n  "},Qe={x:0,y:0},Ye=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Xe=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Ze=function(e,t){return e.x===t.x&&e.y===t.y},et=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},tt=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},nt=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},rt=function(e,t){return Math.min.apply(Math,t.map(function(t){return nt(e,t)}))},ot=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},it=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},at=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},st=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=xe({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):xe(e)},lt=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,o=e.frame,i=function(e,t){return t?it(e,t.scroll.diff.displacement):e}(t.marginBox,o),a=function(e,t,n){var r;return n&&n.increasedBy?h({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(i,r,n);return{page:t,withPlaceholder:n,active:st(a,o)}},ct=function(e,t){e.frame||Ue(!1);var n=e.frame,r=Xe(t,n.scroll.initial),o=et(r),i=h({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:o},max:n.scroll.max}});return h({},e,{frame:i,subject:lt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i})})};function ut(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function dt(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function pt(e,t){if(e.find)return e.find(t);var n=dt(e,t);return-1!==n?e[n]:void 0}function ft(e){return Array.prototype.slice.call(e)}var ht=Oe(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),mt=Oe(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),gt=Oe(function(e){return ut(e)}),vt=Oe(function(e){return ut(e)}),bt=Oe(function(e,t){var n=vt(t).filter(function(t){return e===t.descriptor.droppableId}).sort(function(e,t){return e.descriptor.index-t.descriptor.index});return n});function yt(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function xt(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var wt=Oe(function(e,t){return t.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),kt=function(e,t){return e.descriptor.droppableId===t.descriptor.id},jt={point:Qe,value:0},St={invisible:{},visible:{},all:[]},Nt={displaced:St,displacedBy:jt,at:null},Ct=function(e,t){return function(n){return e<=n&&n<=t}},_t=function(e){var t=Ct(e.top,e.bottom),n=Ct(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var o=t(r.top)||t(r.bottom),i=n(r.left)||n(r.right);if(o&&i)return!0;var a=r.top<e.top&&r.bottom>e.bottom,s=r.left<e.left&&r.right>e.right;return!(!a||!s)||(a&&i||s&&o)}},Et=function(e){var t=Ct(e.top,e.bottom),n=Ct(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},Pt={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},It={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Tt=function(e){var t=e.target,n=e.destination,r=e.viewport,o=e.withDroppableDisplacement,i=e.isVisibleThroughFrameFn,a=o?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:Qe;return it(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(a,n,i)&&function(e,t,n){return n(t)(e)}(a,r,i)},Dt=function(e){return Tt(h({},e,{isVisibleThroughFrameFn:_t}))},Ot=function(e){return Tt(h({},e,{isVisibleThroughFrameFn:Et}))};function At(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,o=e.viewport,i=e.forceShouldAnimate,a=e.last;return t.reduce(function(e,t){var s=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return xe(we(n,r))}(t,r),l=t.descriptor.id;if(e.all.push(l),!Dt({target:s,destination:n,viewport:o,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,n){if("boolean"===typeof n)return n;if(!t)return!0;var r=t.invisible,o=t.visible;if(r[e])return!1;var i=o[e];return!i||i.shouldAnimate}(l,a,i),u={draggableId:l,shouldAnimate:c};return e.visible[l]=u,e},{all:[],visible:{},invisible:{}})}function Lt(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,o=e.destination,i=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:St,displacedBy:r,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:i}}}}function Rt(e){var t=e.draggable,n=e.insideDestination,r=e.destination,o=e.viewport,i=e.displacedBy,a=e.last,s=e.index,l=e.forceShouldAnimate,c=kt(t,r);if(null==s)return Lt({insideDestination:n,inHomeList:c,displacedBy:i,destination:r});var u=pt(n,function(e){return e.descriptor.index===s});if(!u)return Lt({insideDestination:n,inHomeList:c,displacedBy:i,destination:r});var d=wt(t,n),p=n.indexOf(u);return{displaced:At({afterDragging:d.slice(p),destination:r,displacedBy:i,last:a,viewport:o.frame,forceShouldAnimate:l}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Mt(e,t){return Boolean(t.effected[e])}var Bt=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,o=e.draggables,i=e.destination,a=e.insideDestination,s=e.previousImpact,l=e.viewport,c=e.afterCritical,u=s.at;if(u||Ue(!1),"REORDER"===u.type){var d=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,o=e.location;if(!r.length)return null;var i=o.index,a=t?i+1:i-1,s=r[0].descriptor.index,l=r[r.length-1].descriptor.index;return a<s||a>(n?l:l+1)?null:a}({isMovingForward:t,isInHomeList:n,location:u.destination,insideDestination:a});return null==d?null:Rt({draggable:r,insideDestination:a,destination:i,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:d})}var p=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,o=e.combine,i=e.afterCritical;if(!n.isCombineEnabled)return null;var a=o.draggableId,s=r[a].descriptor.index;return Mt(a,i)?t?s:s-1:t?s+1:s}({isMovingForward:t,destination:i,displaced:s.displaced,draggables:o,combine:u.combine,afterCritical:c});return null==p?null:Rt({draggable:r,insideDestination:a,destination:i,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:p})},$t=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,o=xt(n);o||Ue(!1);var i=o.draggableId,a=r[i].page.borderBox.center,s=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,o=e.displacedBy,i=Boolean(t.visible[r]||t.invisible[r]);return Mt(r,n)?i?Qe:et(o.point):i?o.point:Qe}({displaced:n.displaced,afterCritical:t,combineWith:i,displacedBy:n.displacedBy});return Ye(a,s)},Ut=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},Ft=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},zt=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return tt(t.line,n.marginBox[t.end]+Ut(t,r),Ft(t,n.marginBox,r))},Wt=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return tt(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),Ft(t,n.marginBox,r))},Ht=function(e){var t=e.impact,n=e.draggable,r=e.draggables,o=e.droppable,i=e.afterCritical,a=bt(o.descriptor.id,r),s=n.page,l=o.axis;if(!a.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return tt(t.line,n.contentBox[t.start]+Ut(t,r),Ft(t,n.contentBox,r))}({axis:l,moveInto:o.page,isMoving:s});var c=t.displaced,u=t.displacedBy,d=c.all[0];if(d){var p=r[d];if(Mt(d,i))return Wt({axis:l,moveRelativeTo:p.page,isMoving:s});var f=Ce(p.page,u.point);return Wt({axis:l,moveRelativeTo:f,isMoving:s})}var h=a[a.length-1];if(h.descriptor.id===n.descriptor.id)return s.borderBox.center;if(Mt(h.descriptor.id,i)){var m=Ce(h.page,et(i.displacedBy.point));return zt({axis:l,moveRelativeTo:m,isMoving:s})}return zt({axis:l,moveRelativeTo:h.page,isMoving:s})},Vt=function(e,t){var n=e.frame;return n?Ye(t,n.scroll.diff.displacement):t},Gt=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,o=e.draggables,i=e.afterCritical,a=n.page.borderBox.center,s=t.at;return r&&s?"REORDER"===s.type?Ht({impact:t,draggable:n,draggables:o,droppable:r,afterCritical:i}):$t({impact:t,draggables:o,afterCritical:i}):a}(e),n=e.droppable;return n?Vt(n,t):t},qt=function(e,t){var n=Xe(t,e.scroll.initial),r=et(n);return{frame:xe({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Jt(e,t){return e.map(function(e){return t[e]})}var Kt=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=function(e,t){return Ye(e.scroll.diff.displacement,t)}(e.viewport,t),o=Xe(r,n.page.borderBox.center);return Ye(n.client.borderBox.center,o)},Qt=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,o=e.viewport,i=e.withDroppableDisplacement,a=e.onlyOnMainAxis,s=void 0!==a&&a,l=Xe(r,t.page.borderBox.center),c={target:it(t.page.borderBox,l),destination:n,withDroppableDisplacement:i,viewport:o};return s?function(e){return Tt(h({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=Ct(e.top,e.bottom),r=Ct(e.left,e.right);return function(e){return t===Pt?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(c):Ot(c)},Yt=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,o=e.draggables,i=e.previousImpact,a=e.viewport,s=e.previousPageBorderBoxCenter,l=e.previousClientSelection,c=e.afterCritical;if(!r.isEnabled)return null;var u=bt(r.descriptor.id,o),d=kt(n,r),p=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,o=e.insideDestination,i=e.previousImpact;if(!r.isCombineEnabled)return null;if(!yt(i))return null;function a(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return h({},i,{at:t})}var s=i.displaced.all,l=s.length?s[0]:null;if(t)return l?a(l):null;var c=wt(n,o);if(!l)return c.length?a(c[c.length-1].descriptor.id):null;var u=dt(c,function(e){return e.descriptor.id===l});-1===u&&Ue(!1);var d=u-1;return d<0?null:a(c[d].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:u,previousImpact:i})||Bt({isMovingForward:t,isInHomeList:d,draggable:n,draggables:o,destination:r,insideDestination:u,previousImpact:i,viewport:a,afterCritical:c});if(!p)return null;var f=Gt({impact:p,draggable:n,droppable:r,draggables:o,afterCritical:c});if(Qt({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Kt({pageBorderBoxCenter:f,draggable:n,viewport:a}),impact:p,scrollJumpRequest:null};var m=Xe(f,s),g=function(e){var t=e.impact,n=e.viewport,r=e.destination,o=e.draggables,i=e.maxScrollChange,a=qt(n,Ye(n.scroll.current,i)),s=r.frame?ct(r,Ye(r.frame.scroll.current,i)):r,l=t.displaced,c=At({afterDragging:Jt(l.all,o),destination:r,displacedBy:t.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),u=At({afterDragging:Jt(l.all,o),destination:s,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),d={},p={},f=[l,c,u];return l.all.forEach(function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,f);t?p[e]=t:d[e]=!0}),h({},t,{displaced:{all:l.all,invisible:d,visible:p}})}({impact:p,viewport:a,destination:r,draggables:o,maxScrollChange:m});return{clientSelection:l,impact:g,scrollJumpRequest:m}},Xt=function(e){var t=e.subject.active;return t||Ue(!1),t},Zt=function(e,t){var n=e.page.borderBox.center;return Mt(e.descriptor.id,t)?Xe(n,t.displacedBy.point):n},en=function(e,t){var n=e.page.borderBox;return Mt(e.descriptor.id,t)?it(n,et(t.displacedBy.point)):n},tn=Oe(function(e,t){var n=t[e.line];return{value:n,point:tt(e.line,n)}}),nn=function(e,t){return h({},e,{scroll:h({},e.scroll,{max:t})})},rn=function(e,t,n){var r=e.frame;kt(t,e)&&Ue(!1),e.subject.withPlaceholder&&Ue(!1);var o=tn(e.axis,t.displaceBy).point,i=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return tt(r.line,t[r.line]);var o=e.subject.page.contentBox[r.size],i=bt(e.descriptor.id,n).reduce(function(e,t){return e+t.client.marginBox[r.size]},0)+t[r.line]-o;return i<=0?null:tt(r.line,i)}(e,o,n),a={placeholderSize:o,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return h({},e,{subject:lt({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame})});var s=i?Ye(r.scroll.max,i):r.scroll.max,l=nn(r,s);return h({},e,{subject:lt({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:l}),frame:l})},on=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,o=e.isOver,i=e.draggables,a=e.droppables,s=e.viewport,l=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,o=e.droppables,i=e.viewport,a=r.subject.active;if(!a)return null;var s=r.axis,l=Ct(a[s.start],a[s.end]),c=gt(o).filter(function(e){return e!==r}).filter(function(e){return e.isEnabled}).filter(function(e){return Boolean(e.subject.active)}).filter(function(e){return _t(i.frame)(Xt(e))}).filter(function(e){var n=Xt(e);return t?a[s.crossAxisEnd]<n[s.crossAxisEnd]:n[s.crossAxisStart]<a[s.crossAxisStart]}).filter(function(e){var t=Xt(e),n=Ct(t[s.start],t[s.end]);return l(t[s.start])||l(t[s.end])||n(a[s.start])||n(a[s.end])}).sort(function(e,n){var r=Xt(e)[s.crossAxisStart],o=Xt(n)[s.crossAxisStart];return t?r-o:o-r}).filter(function(e,t,n){return Xt(e)[s.crossAxisStart]===Xt(n[0])[s.crossAxisStart]});if(!c.length)return null;if(1===c.length)return c[0];var u=c.filter(function(e){return Ct(Xt(e)[s.start],Xt(e)[s.end])(n[s.line])});return 1===u.length?u[0]:u.length>1?u.sort(function(e,t){return Xt(e)[s.start]-Xt(t)[s.start]})[0]:c.sort(function(e,t){var r=rt(n,at(Xt(e))),o=rt(n,at(Xt(t)));return r!==o?r-o:Xt(e)[s.start]-Xt(t)[s.start]})[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:o,droppables:a,viewport:s});if(!c)return null;var u=bt(c.descriptor.id,i),d=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,o=e.insideDestination,i=e.afterCritical,a=o.filter(function(e){return Ot({target:en(e,i),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(e,n){var o=nt(t,Vt(r,Zt(e,i))),a=nt(t,Vt(r,Zt(n,i)));return o<a?-1:a<o?1:e.descriptor.index-n.descriptor.index});return a[0]||null}({pageBorderBoxCenter:n,viewport:s,destination:c,insideDestination:u,afterCritical:l}),p=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,o=e.draggable,i=e.draggables,a=e.destination,s=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:St,displacedBy:jt,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},u=Gt({impact:c,draggable:o,droppable:a,draggables:i,afterCritical:l}),d=kt(o,a)?a:rn(a,o,i);return Qt({draggable:o,destination:d,newPageBorderBoxCenter:u,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var p=Boolean(t[a.axis.line]<=n.page.borderBox.center[a.axis.line]),f=function(){var e=n.descriptor.index;return n.descriptor.id===o.descriptor.id||p?e:e+1}(),h=tn(a.axis,o.displaceBy);return Rt({draggable:o,insideDestination:r,destination:a,viewport:s,displacedBy:h,last:St,index:f})}({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:i,moveRelativeTo:d,insideDestination:u,viewport:s,afterCritical:l});if(!p)return null;var f=Gt({impact:p,draggable:r,droppable:c,draggables:i,afterCritical:l});return{clientSelection:Kt({pageBorderBoxCenter:f,draggable:r,viewport:s}),impact:p,scrollJumpRequest:null}},an=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},sn=function(e){var t=e.state,n=e.type,r=function(e,t){var n=an(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),o=Boolean(r),i=t.dimensions.droppables[t.critical.droppable.id],a=r||i,s=a.axis.direction,l="vertical"===s&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===s&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(l&&!o)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,p=t.dimensions,f=p.draggables,h=p.droppables;return l?Yt({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:a,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):on({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:a,draggables:f,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function ln(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function cn(e){var t=Ct(e.top,e.bottom),n=Ct(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function un(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,o=gt(r).filter(function(e){if(!e.isEnabled)return!1;var n,r,o=e.subject.active;if(!o)return!1;if(r=o,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(cn(o)(t.center))return!0;var i=e.axis,a=o.center[i.crossAxisLine],s=t[i.crossAxisStart],l=t[i.crossAxisEnd],c=Ct(o[i.crossAxisStart],o[i.crossAxisEnd]),u=c(s),d=c(l);return!u&&!d||(u?s<a:l>a)});return o.length?1===o.length?o[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,o=n.page.borderBox.center,i=r.map(function(e){var n=e.axis,r=tt(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:nt(o,r)}}).sort(function(e,t){return t.distance-e.distance});return i[0]?i[0].id:null}({pageBorderBox:t,draggable:n,candidates:o}):null}var dn=function(e,t){return xe(it(e,t))};function pn(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var fn=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,o=e.droppables,i=e.previousImpact,a=e.viewport,s=e.afterCritical,l=dn(n.page.borderBox,t),c=un({pageBorderBox:l,draggable:n,droppables:o});if(!c)return Nt;var u=o[c],d=bt(u.descriptor.id,r),p=function(e,t){var n=e.frame;return n?dn(t,n.scroll.diff.value):t}(u,l);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,o=e.destination,i=e.insideDestination,a=e.afterCritical;if(!o.isCombineEnabled)return null;var s=o.axis,l=tn(o.axis,t.displaceBy),c=l.value,u=n[s.start],d=n[s.end],p=pt(wt(t,i),function(e){var t=e.descriptor.id,n=e.page.borderBox,o=n[s.size]/4,i=Mt(t,a),l=pn({displaced:r.displaced,id:t});return i?l?d>n[s.start]+o&&d<n[s.end]-o:u>n[s.start]-c+o&&u<n[s.end]-c-o:l?d>n[s.start]+c+o&&d<n[s.end]+c-o:u>n[s.start]+o&&u<n[s.end]-o});return p?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:o.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:p,draggable:n,previousImpact:i,destination:u,insideDestination:d,afterCritical:s})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,o=e.insideDestination,i=e.last,a=e.viewport,s=e.afterCritical,l=r.axis,c=tn(r.axis,n.displaceBy),u=c.value,d=t[l.start],p=t[l.end],f=function(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:pt(wt(n,o),function(e){var t=e.descriptor.id,n=e.page.borderBox.center[l.line],r=Mt(t,s),o=pn({displaced:i,id:t});return r?o?p<=n:d<n-u:o?p<=n+u:d<n}),inHomeList:kt(n,r)});return Rt({draggable:n,insideDestination:o,destination:r,viewport:a,last:i,displacedBy:c,index:f})}({pageBorderBoxWithDroppableScroll:p,draggable:n,destination:u,insideDestination:d,last:i.displaced,viewport:a,afterCritical:s})},hn=function(e,t){var n;return h({},e,((n={})[t.descriptor.id]=t,n))},mn=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,o=an(t),i=an(n);if(!o)return r;if(o===i)return r;var a=r[o];if(!a.subject.withPlaceholder)return r;var s=function(e){var t=e.subject.withPlaceholder;t||Ue(!1);var n=e.frame;if(!n)return h({},e,{subject:lt({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||Ue(!1);var o=nn(n,r);return h({},e,{subject:lt({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null}),frame:o})}(a);return hn(r,s)},gn=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,o=e.viewport,i=e.impact,a=e.scrollJumpRequest,s=o||t.viewport,l=r||t.dimensions,c=n||t.current.client.selection,u=Xe(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:Ye(t.initial.client.borderBoxCenter,u)},p={selection:Ye(d.selection,s.scroll.current),borderBoxCenter:Ye(d.borderBoxCenter,s.scroll.current),offset:Ye(d.offset,s.scroll.diff.value)},f={client:d,page:p};if("COLLECTING"===t.phase)return h({phase:"COLLECTING"},t,{dimensions:l,viewport:s,current:f});var m=l.draggables[t.critical.draggable.id],g=i||fn({pageOffset:p.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),v=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,o=e.previousImpact,i=e.impact,a=mn({previousImpact:o,impact:i,droppables:r}),s=an(i);if(!s)return a;var l=r[s];if(kt(t,l))return a;if(l.subject.withPlaceholder)return a;var c=rn(l,t,n);return hn(a,c)}({draggable:m,impact:g,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return h({},t,{current:f,dimensions:{draggables:l.draggables,droppables:v},impact:g,viewport:s,scrollJumpRequest:a||null,forceShouldAnimate:!a&&null})};var vn=function(e){var t=e.impact,n=e.viewport,r=e.draggables,o=e.destination,i=e.forceShouldAnimate,a=t.displaced,s=function(e,t){return e.map(function(e){return t[e]})}(a.all,r);return h({},t,{displaced:At({afterDragging:s,destination:o,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:i,last:a})})},bn=function(e){var t=e.impact,n=e.draggable,r=e.droppable,o=e.draggables,i=e.viewport,a=e.afterCritical,s=Gt({impact:t,draggable:n,draggables:o,droppable:r,afterCritical:a});return Kt({pageBorderBoxCenter:s,draggable:n,viewport:i})},yn=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&Ue(!1);var o=t.impact,i=r||t.viewport,a=n||t.dimensions,s=a.draggables,l=a.droppables,c=s[t.critical.draggable.id],u=an(o);u||Ue(!1);var d=l[u],p=vn({impact:o,viewport:i,destination:d,draggables:s}),f=bn({impact:p,draggable:c,droppable:d,draggables:s,viewport:i,afterCritical:t.afterCritical});return gn({impact:p,clientSelection:f,state:t,dimensions:a,viewport:i})},xn=function(e){var t=e.draggable,n=e.home,r=e.draggables,o=e.viewport,i=tn(n.axis,t.displaceBy),a=bt(n.descriptor.id,r),s=a.indexOf(t);-1===s&&Ue(!1);var l,c=a.slice(s+1),u=c.reduce(function(e,t){return e[t.descriptor.id]=!0,e},{}),d={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:i,effected:u};return{impact:{displaced:At({afterDragging:c,destination:n,displacedBy:i,last:null,viewport:o.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:d}},wn=function(e){0},kn=function(e){0},jn=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,o=r.scroll.diff.value;return t.map(function(e){var t=e.descriptor.droppableId,i=function(e){var t=e.frame;return t||Ue(!1),t}(n[t]),a=i.scroll.diff.value,s=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,o=Ce(t.client,n),i=_e(o,r);return h({},t,{placeholder:h({},t.placeholder,{client:o}),client:o,page:i})}({draggable:e,offset:Ye(o,a),initialWindowScroll:r.scroll.initial});return s})},Sn=function(e){return"SNAP"===e.movementMode},Nn=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:hn(e.droppables,t)}}(e.dimensions,t);return!Sn(e)||n?gn({state:e,dimensions:r}):yn({state:e,dimensions:r})};function Cn(e){return e.isDragging&&"SNAP"===e.movementMode?h({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var _n={phase:"IDLE",completed:null,shouldFlush:!1},En=function(e,t){if(void 0===e&&(e=_n),"FLUSH"===t.type)return h({},_n,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&Ue(!1);var n=t.payload,r=n.critical,o=n.clientSelection,i=n.viewport,a=n.dimensions,s=n.movementMode,l=a.draggables[r.draggable.id],c=a.droppables[r.droppable.id],u={selection:o,borderBoxCenter:l.client.borderBox.center,offset:Qe},d={client:u,page:{selection:Ye(u.selection,i.scroll.initial),borderBoxCenter:Ye(u.selection,i.scroll.initial),offset:Ye(u.selection,i.scroll.diff.value)}},p=gt(a.droppables).every(function(e){return!e.isFixedOnPage}),f=xn({draggable:l,home:c,draggables:a.draggables,viewport:i}),m=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:a,initial:d,current:d,isWindowScrollAllowed:p,impact:m,afterCritical:f.afterCritical,onLiftImpact:m,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&Ue(!1),h({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&Ue(!1),function(e){var t=e.state,n=e.published;wn();var r=n.modified.map(function(e){var n=t.dimensions.droppables[e.droppableId];return ct(n,e.scroll)}),o=h({},t.dimensions.droppables,{},ht(r)),i=mt(jn({additions:n.additions,updatedDroppables:o,viewport:t.viewport})),a=h({},t.dimensions.draggables,{},i);n.removals.forEach(function(e){delete a[e]});var s={droppables:o,draggables:a},l=an(t.impact),c=l?s.droppables[l]:null,u=s.draggables[t.critical.draggable.id],d=s.droppables[t.critical.droppable.id],p=xn({draggable:u,home:d,draggables:a,viewport:t.viewport}),f=p.impact,m=p.afterCritical,g=c&&c.isCombineEnabled?t.impact:f,v=fn({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:g,viewport:t.viewport,afterCritical:m});kn();var b=h({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:f,dimensions:s,afterCritical:m,forceShouldAnimate:!1});return"COLLECTING"===t.phase?b:h({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;ln(e)||Ue(!1);var g=t.payload.client;return Ze(g,e.current.client.selection)?e:gn({state:e,clientSelection:g,impact:Sn(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return Cn(e);if("COLLECTING"===e.phase)return Cn(e);ln(e)||Ue(!1);var v=t.payload,b=v.id,y=v.newScroll,x=e.dimensions.droppables[b];if(!x)return e;var w=ct(x,y);return Nn(e,w,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;ln(e)||Ue(!1);var k=t.payload,j=k.id,S=k.isEnabled,N=e.dimensions.droppables[j];N||Ue(!1),N.isEnabled===S&&Ue(!1);var C=h({},N,{isEnabled:S});return Nn(e,C,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;ln(e)||Ue(!1);var _=t.payload,E=_.id,P=_.isCombineEnabled,I=e.dimensions.droppables[E];I||Ue(!1),I.isCombineEnabled===P&&Ue(!1);var T=h({},I,{isCombineEnabled:P});return Nn(e,T,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;ln(e)||Ue(!1),e.isWindowScrollAllowed||Ue(!1);var D=t.payload.newScroll;if(Ze(e.viewport.scroll.current,D))return Cn(e);var O=qt(e.viewport,D);return Sn(e)?yn({state:e,viewport:O}):gn({state:e,viewport:O})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!ln(e))return e;var A=t.payload.maxScroll;if(Ze(A,e.viewport.scroll.max))return e;var L=h({},e.viewport,{scroll:h({},e.viewport.scroll,{max:A})});return h({phase:"DRAGGING"},e,{viewport:L})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&Ue(!1);var R=sn({state:e,type:t.type});return R?gn({state:e,impact:R.impact,clientSelection:R.clientSelection,scrollJumpRequest:R.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var M=t.payload.reason;return"COLLECTING"!==e.phase&&Ue(!1),h({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:M})}if("DROP_ANIMATE"===t.type){var B=t.payload,$=B.completed,U=B.dropDuration,F=B.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&Ue(!1),{phase:"DROP_ANIMATING",completed:$,dropDuration:U,newHomeClientOffset:F,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},Pn=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},In=function(){return{type:"COLLECTION_STARTING",payload:null}},Tn=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},Dn=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},On=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},An=function(e){return{type:"MOVE",payload:e}},Ln=function(){return{type:"MOVE_UP",payload:null}},Rn=function(){return{type:"MOVE_DOWN",payload:null}},Mn=function(){return{type:"MOVE_RIGHT",payload:null}},Bn=function(){return{type:"MOVE_LEFT",payload:null}},$n=function(e){return{type:"DROP_COMPLETE",payload:e}},Un=function(e){return{type:"DROP",payload:e}},Fn=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var zn="cubic-bezier(.2,1,.1,1)",Wn={drop:0,combining:.7},Hn={drop:.75},Vn=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",Gn={fluid:"opacity "+Vn,snap:"transform "+Vn+", opacity "+Vn,drop:function(e){var t=e+"s "+zn;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Vn,placeholder:"height "+Vn+", width "+Vn+", margin "+Vn},qn=function(e){return Ze(e,Qe)?null:"translate("+e.x+"px, "+e.y+"px)"},Jn=qn,Kn=function(e,t){var n=qn(e);return n?t?n+" scale("+Hn.drop+")":n:null},Qn=.33,Yn=.55,Xn=Yn-Qn,Zn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var o=t(),i=r.payload.reason;if("COLLECTING"!==o.phase){if("IDLE"!==o.phase){"DROP_PENDING"===o.phase&&o.isWaiting&&Ue(!1),"DRAGGING"!==o.phase&&"DROP_PENDING"!==o.phase&&Ue(!1);var a=o.critical,s=o.dimensions,l=s.draggables[o.critical.draggable.id],c=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,o=e.home,i=e.viewport,a=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:h({},r,{displaced:St}),didDropInsideDroppable:!0}:{impact:vn({draggables:t,impact:a,destination:o,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:i,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),u=c.impact,d=c.didDropInsideDroppable,p=d?yt(u):null,f=d?xt(u):null,m={index:a.draggable.index,droppableId:a.droppable.id},g={draggableId:l.descriptor.id,type:l.descriptor.type,source:m,reason:i,mode:o.movementMode,destination:p,combine:f},v=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,o=e.viewport,i=e.afterCritical,a=r.draggables,s=r.droppables,l=an(t),c=l?s[l]:null,u=s[n.descriptor.droppableId],d=bn({impact:t,draggable:n,draggables:a,afterCritical:i,droppable:c||u,viewport:o});return Xe(d,n.client.borderBox.center)}({impact:u,draggable:l,dimensions:s,viewport:o.viewport,afterCritical:o.afterCritical}),b={critical:o.critical,afterCritical:o.afterCritical,result:g,impact:u};if(!Ze(o.current.client.offset,v)||Boolean(g.combine)){var y=function(e){var t=e.current,n=e.destination,r=e.reason,o=nt(t,n);if(o<=0)return Qn;if(o>=1500)return Yn;var i=Qn+Xn*(o/1500);return Number(("CANCEL"===r?.6*i:i).toFixed(2))}({current:o.current.client.offset,destination:v,reason:i});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:v,dropDuration:y,completed:b}))}else n($n({completed:b}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:i}))}else e(r)}}},er=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function tr(e){var t=e.onWindowScroll;var n=Ae(function(){t(er())}),r=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(n),o=Re;function i(){return o!==Re}return{start:function(){i()&&Ue(!1),o=Me(window,[r])},stop:function(){i()||Ue(!1),n.cancel(),o(),o=Re},isActive:i}}var nr=function(e){var t=tr({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},rr=function(){var e=[];return{add:function(t){var n=setTimeout(function(){return function(t){var n=dt(e,function(e){return e.timerId===t});-1===n&&Ue(!1),e.splice(n,1)[0].callback()}(n)}),r={timerId:n,callback:t};e.push(r)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach(function(e){clearTimeout(e.timerId),e.callback()})}}}},or=function(e,t){wn(),t(),kn()},ir=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},ar=function(e,t,n,r){if(e){var o=function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),o=function(o){t||n||(t=!0,e(o),clearTimeout(r))};return o.wasCalled=function(){return t},o}(n);e(t,{announce:o}),o.wasCalled()||n(r(t))}else n(r(t))},sr=function(e,t){var n=function(e,t){var n=rr(),r=null,o=function(n){r||Ue(!1),r=null,or(0,function(){return ar(e().onDragEnd,n,t,Ke)})};return{beforeCapture:function(t,n){r&&Ue(!1),or(0,function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})})},beforeStart:function(t,n){r&&Ue(!1),or(0,function(){var r=e().onBeforeDragStart;r&&r(ir(t,n))})},start:function(o,i){r&&Ue(!1);var a=ir(o,i);r={mode:i,lastCritical:o,lastLocation:a.source,lastCombine:null},n.add(function(){or(0,function(){return ar(e().onDragStart,a,t,qe)})})},update:function(o,i){var a=yt(i),s=xt(i);r||Ue(!1);var l=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(o,r.lastCritical);l&&(r.lastCritical=o);var c,u,d=(u=a,!(null==(c=r.lastLocation)&&null==u||null!=c&&null!=u&&c.droppableId===u.droppableId&&c.index===u.index));d&&(r.lastLocation=a);var p=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(r.lastCombine,s);if(p&&(r.lastCombine=s),l||d||p){var f=h({},ir(o,r.mode),{combine:s,destination:a});n.add(function(){or(0,function(){return ar(e().onDragUpdate,f,t,Je)})})}},flush:function(){r||Ue(!1),n.flush()},drop:o,abort:function(){if(r){var e=h({},ir(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});o(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var o=r.payload.critical;return n.beforeStart(o,r.payload.movementMode),t(r),void n.start(o,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var i=r.payload.completed.result;return n.flush(),t(r),void n.drop(i)}if(t(r),"FLUSH"!==r.type){var a=e.getState();"DRAGGING"===a.phase&&n.update(a.critical,a.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},lr=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&Ue(!1),e.dispatch($n({completed:r.completed}))}else t(n)}}},cr=function(e){var t=null,n=null;return function(r){return function(o){if("FLUSH"!==o.type&&"DROP_COMPLETE"!==o.type&&"DROP_ANIMATION_FINISHED"!==o.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(o),"DROP_ANIMATE"===o.type){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame(function(){n=null,t=Me(window,[i])})}}}},ur=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(Un({reason:r.reason})))}}}},dr=E,pr=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,o=e.styleMarshal,i=e.getResponders,a=e.announce,s=e.autoScroller;return N(En,dr(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(x(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map(function(e){return e(o)});return r=E.apply(void 0,i)(n.dispatch),y(y({},n),{},{dispatch:r})}}}((t=o,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(o){if("LIFT"===o.type){var i=o.payload,a=i.id,s=i.clientSelection,l=i.movementMode,c=n();"DROP_ANIMATING"===c.phase&&r($n({completed:c.completed})),"IDLE"!==n().phase&&Ue(!1),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:a,movementMode:l}});var u={draggableId:a,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},d=e.startPublishing(u),p=d.critical,f=d.dimensions,h=d.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:p,dimensions:f,clientSelection:s,movementMode:l,viewport:h}})}else t(o)}}}}(n),Zn,lr,cr,ur,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var o=t.getState();return"DRAGGING"!==o.phase&&Ue(!1),void e.start(o)}n(r),e.scroll(t.getState())}}}}(s),nr,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var o=r.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),sr(i,a))))};var fr=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,o=e.width,i=Xe({x:n,y:t},{x:o,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},hr=function(){var e=document.documentElement;return e||Ue(!1),e},mr=function(){var e=hr();return fr({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},gr=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry;wn();var o=function(){var e=er(),t=mr(),n=e.y,r=e.x,o=hr(),i=o.clientWidth,a=o.clientHeight;return{frame:xe({top:n,left:r,right:r+i,bottom:n+a}),scroll:{initial:e,current:e,max:t,diff:{value:Qe,displacement:Qe}}}}(),i=o.scroll.current,a=t.droppable,s=r.droppable.getAllByType(a.type).map(function(e){return e.callbacks.getDimensionAndWatchScroll(i,n)}),l=r.draggable.getAllByType(t.draggable.type).map(function(e){return e.getDimension(i)}),c={draggables:mt(l),droppables:ht(s)};return kn(),{dimensions:c,critical:t,viewport:o}};function vr(e,t,n){return n.descriptor.id!==t.id&&(n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var br=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},o=null,i=function(){o||(n.collectionStarting(),o=requestAnimationFrame(function(){o=null,wn();var e=r,i=e.additions,a=e.removals,s=e.modified,l=Object.keys(i).map(function(e){return t.draggable.getById(e).getDimension(Qe)}).sort(function(e,t){return e.descriptor.index-t.descriptor.index}),c=Object.keys(s).map(function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}}),u={additions:l,removals:Object.keys(a),modified:c};r={additions:{},removals:{},modified:{}},kn(),n.publish(u)}))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],i()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],i()},stop:function(){o&&(cancelAnimationFrame(o),o=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=function(t){n||Ue(!1);var o=n.critical.draggable;"ADDITION"===t.type&&vr(e,o,t.value)&&r.add(t.value),"REMOVAL"===t.type&&vr(e,o,t.value)&&r.remove(t.value)},i={updateDroppableIsEnabled:function(r,o){e.droppable.exists(r)||Ue(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:o})},updateDroppableIsCombineEnabled:function(r,o){n&&(e.droppable.exists(r)||Ue(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:o}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,o){n&&(e.droppable.exists(r)||Ue(!1),t.updateDroppableScroll({id:r,newScroll:o}))},startPublishing:function(t){n&&Ue(!1);var r=e.draggable.getById(t.draggableId),i=e.droppable.getById(r.descriptor.droppableId),a={draggable:r.descriptor,droppable:i.descriptor},s=e.subscribe(o);return n={critical:a,unsubscribe:s},gr({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach(function(e){return e.callbacks.dragStopped()}),n.unsubscribe(),n=null}}};return i},yr=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},xr=function(e){window.scrollBy(e.x,e.y)},wr=Oe(function(e){return gt(e).filter(function(e){return!!e.isEnabled&&!!e.frame})}),kr=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var o=r[n];return o.frame?o:null}var i=function(e,t){var n=pt(wr(t),function(t){return t.frame||Ue(!1),cn(t.frame.pageMarginBox)(e)});return n}(t,r);return i},jr=.25,Sr=.05,Nr=28,Cr=function(e){return Math.pow(e,2)},_r={stopDampeningAt:1200,accelerateAt:360},Er=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,o=n-t;return 0===o?0:(r-t)/o},Pr=_r.accelerateAt,Ir=_r.stopDampeningAt,Tr=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,o=e.shouldUseTimeDampening,i=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Nr;if(e===t.startScrollingFrom)return 1;var n=Er({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=Nr*Cr(1-n);return Math.ceil(r)}(t,n);return 0===i?0:o?Math.max(function(e,t){var n=t,r=Ir,o=Date.now()-n;if(o>=Ir)return e;if(o<Pr)return 1;var i=Er({startOfRange:Pr,endOfRange:r,current:o}),a=e*Cr(i);return Math.ceil(a)}(i,r),1):i},Dr=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,o=e.axis,i=e.shouldUseTimeDampening,a=function(e,t){return{startScrollingFrom:e[t.size]*jr,maxScrollValueAt:e[t.size]*Sr}}(t,o);return n[o.end]<n[o.start]?Tr({distanceToEdge:n[o.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:i}):-1*Tr({distanceToEdge:n[o.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:i})},Or=ot(function(e){return 0===e?0:e}),Ar=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,o=e.center,i=e.shouldUseTimeDampening,a={top:o.y-n.top,right:n.right-o.x,bottom:n.bottom-o.y,left:o.x-n.left},s=Dr({container:n,distanceToEdges:a,dragStartTime:t,axis:Pt,shouldUseTimeDampening:i}),l=Dr({container:n,distanceToEdges:a,dragStartTime:t,axis:It,shouldUseTimeDampening:i}),c=Or({x:l,y:s});if(Ze(c,Qe))return null;var u=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,o=n.height>t.height,i=n.width>t.width;return i||o?i&&o?null:{x:i?0:r.x,y:o?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return u?Ze(u,Qe)?null:u:null},Lr=ot(function(e){return 0===e?0:e>0?1:-1}),Rr=function(){var e=function(e,t){return e<0?e:e>t?e-t:0};return function(t){var n=t.current,r=t.max,o=t.change,i=Ye(n,o),a={x:e(i.x,r.x),y:e(i.y,r.y)};return Ze(a,Qe)?null:a}}(),Mr=function(e){var t=e.max,n=e.current,r=e.change,o={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},i=Lr(r),a=Rr({max:o,current:n,change:i});return!a||(0!==i.x&&0===a.x||0!==i.y&&0===a.y)},Br=function(e,t){return Mr({current:e.scroll.current,max:e.scroll.max,change:t})},$r=function(e,t){var n=e.frame;return!!n&&Mr({current:n.scroll.current,max:n.scroll.max,change:t})},Ur=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,o=e.scrollWindow,i=e.scrollDroppable,a=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,n=e.subject,r=e.center,o=e.dragStartTime,i=e.shouldUseTimeDampening,a=Ar({dragStartTime:o,container:t.frame,subject:n,center:r,shouldUseTimeDampening:i});return a&&Br(t,a)?a:null}({dragStartTime:n,viewport:t.viewport,subject:s,center:a,shouldUseTimeDampening:r});if(l)return void o(l)}var c=kr({center:a,destination:an(t.impact),droppables:t.dimensions.droppables});if(c){var u=function(e){var t=e.droppable,n=e.subject,r=e.center,o=e.dragStartTime,i=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var s=Ar({dragStartTime:o,container:a.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:i});return s&&$r(t,s)?s:null}({dragStartTime:n,droppable:c,subject:s,center:a,shouldUseTimeDampening:r});u&&i(c.descriptor.id,u)}},Fr=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,o=function(e,t){if(!$r(e,t))return t;var r=function(e,t){var n=e.frame;return n&&$r(e,t)?Rr({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var o=Xe(t,r);return n(e.descriptor.id,o),Xe(t,o)},i=function(e,t,n){if(!e)return n;if(!Br(t,n))return n;var o=function(e,t){if(!Br(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return Rr({current:r,max:n,change:t})}(t,n);if(!o)return r(n),null;var i=Xe(n,o);return r(i),Xe(n,i)};return function(e){var n=e.scrollJumpRequest;if(n){var r=an(e.impact);r||Ue(!1);var a=o(e.dimensions.droppables[r],n);if(a){var s=e.viewport,l=i(e.isWindowScrollAllowed,s,a);l&&function(e,n){var r=Ye(e.current.client.selection,n);t({client:r})}(e,l)}}}},zr=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,o=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=Ae(t),o=Ae(n),i=null,a=function(e){i||Ue(!1);var t=i,n=t.shouldUseTimeDampening,a=t.dragStartTime;Ur({state:e,scrollWindow:r,scrollDroppable:o,dragStartTime:a,shouldUseTimeDampening:n})};return{start:function(e){wn(),i&&Ue(!1);var t=Date.now(),n=!1,r=function(){n=!0};Ur({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),i={dragStartTime:t,shouldUseTimeDampening:n},kn(),n&&a(e)},stop:function(){i&&(r.cancel(),o.cancel(),i=null)},scroll:a}}({scrollWindow:n,scrollDroppable:t}),i=Fr({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&i(e):o.scroll(e))},start:o.start,stop:o.stop}},Wr="data-rbd",Hr=function(){var e=Wr+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Vr=function(){var e=Wr+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Gr=function(){var e=Wr+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),qr={contextId:Wr+"-scroll-container-context-id"},Jr=function(e,t){return e.map(function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""}).join(" ")},Kr="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect,Qr=function(){var e=document.querySelector("head");return e||Ue(!1),e},Yr=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Xr(e,t){var n=ve(function(){return function(e){var t,n=(t=e,function(e){return"["+e+'="'+t+'"]'}),r=function(){var e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:n(Hr.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}}(),o=[function(){var e="\n      transition: "+Gn.outOfTheWay+";\n    ";return{selector:n(Vr.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}}(),r,{selector:n(Gr.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Jr(o,"always"),resting:Jr(o,"resting"),dragging:Jr(o,"dragging"),dropAnimating:Jr(o,"dropAnimating"),userCancel:Jr(o,"userCancel")}}(e)},[e]),o=(0,r.useRef)(null),i=(0,r.useRef)(null),a=be(Oe(function(e){var t=i.current;t||Ue(!1),t.textContent=e}),[]),s=be(function(e){var t=o.current;t||Ue(!1),t.textContent=e},[]);Kr(function(){(o.current||i.current)&&Ue(!1);var r=Yr(t),l=Yr(t);return o.current=r,i.current=l,r.setAttribute(Wr+"-always",e),l.setAttribute(Wr+"-dynamic",e),Qr().appendChild(r),Qr().appendChild(l),s(n.always),a(n.resting),function(){var e=function(e){var t=e.current;t||Ue(!1),Qr().removeChild(t),e.current=null};e(o),e(i)}},[t,s,a,n.always,n.resting,e]);var l=be(function(){return a(n.dragging)},[a,n.dragging]),c=be(function(e){a("DROP"!==e?n.userCancel:n.dropAnimating)},[a,n.dropAnimating,n.userCancel]),u=be(function(){i.current&&a(n.resting)},[a,n.resting]);return ve(function(){return{dragging:l,dropping:c,resting:u}},[l,c,u])}var Zr=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function eo(e){return e instanceof Zr(e).HTMLElement}function to(e,t){var n="["+Hr.contextId+'="'+e+'"]',r=ft(document.querySelectorAll(n));if(!r.length)return null;var o=pt(r,function(e){return e.getAttribute(Hr.draggableId)===t});return o&&eo(o)?o:null}function no(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach(function(t){return t(e)})}function r(t){return e.draggables[t]||null}function o(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var o=t.descriptor.id,i=r(o);i&&t.uniqueId===i.uniqueId&&(delete e.draggables[o],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||Ue(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return ut(e.draggables).filter(function(e){return e.descriptor.type===t})}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=o(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=o(e);return t||Ue(!1),t},findById:o,exists:function(e){return Boolean(o(e))},getAllByType:function(t){return ut(e.droppables).filter(function(e){return e.descriptor.type===t})}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var ro=r.createContext(null),oo=function(){var e=document.body;return e||Ue(!1),e},io={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var ao=0,so={separator:"::"};function lo(e,t){return void 0===t&&(t=so),ve(function(){return""+e+t.separator+ao++},[t.separator,e])}var co=r.createContext(null);function uo(e){0}function po(e,t){uo()}function fo(){po()}function ho(e){var t=(0,r.useRef)(e);return(0,r.useEffect)(function(){t.current=e}),t}var mo,go=((mo={})[13]=!0,mo[9]=!0,mo),vo=function(e){go[e.keyCode]&&e.preventDefault()},bo=function(){var e="visibilitychange";return"undefined"===typeof document?e:pt([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],function(e){return"on"+e in document})||e}();var yo,xo={type:"IDLE"};function wo(e){var t=e.cancel,n=e.completed,r=e.getPhase,o=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,i=e.clientY;if(0===t){var a={x:n,y:i},s=r();if("DRAGGING"===s.type)return e.preventDefault(),void s.actions.move(a);"PENDING"!==s.type&&Ue(!1);var l=s.point;if(c=l,u=a,Math.abs(u.x-c.x)>=5||Math.abs(u.y-c.y)>=5){var c,u;e.preventDefault();var d=s.actions.fluidLift(a);o({type:"DRAGGING",actions:d})}}}},{eventName:"mouseup",fn:function(e){var o=r();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void vo(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&Ue(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:bo,fn:t}]}function ko(){}var jo=((yo={})[34]=!0,yo[33]=!0,yo[36]=!0,yo[35]=!0,yo);function So(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(jo[r.keyCode]?r.preventDefault():vo(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:bo,fn:n}]}var No={type:"IDLE"};var Co={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function _o(e,t){if(null==t)return!1;if(Boolean(Co[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&_o(e,t.parentElement)}function Eo(e,t){var n=t.target;return!!eo(n)&&_o(e,n)}var Po=function(e){return xe(e.getBoundingClientRect()).center};var Io=function(){var e="matches";return"undefined"===typeof document?e:pt([e,"msMatchesSelector","webkitMatchesSelector"],function(e){return e in Element.prototype})||e}();function To(e,t){return null==e?null:e[Io](t)?e:To(e.parentElement,t)}function Do(e,t){return e.closest?e.closest(t):To(e,t)}function Oo(e,t){var n,r=t.target;if(!((n=r)instanceof Zr(n).Element))return null;var o=function(e){return"["+Hr.contextId+'="'+e+'"]'}(e),i=Do(r,o);return i&&eo(i)?i:null}function Ao(e){e.preventDefault()}function Lo(e){var t=e.expected,n=e.phase,r=e.isLockActive;e.shouldWarn;return!!r()&&t===n}function Ro(e){var t=e.lockAPI,n=e.store,r=e.registry,o=e.draggableId;if(t.isClaimed())return!1;var i=r.draggable.findById(o);return!!i&&(!!i.options.isEnabled&&!!yr(n.getState(),o))}function Mo(e){var t=e.lockAPI,n=e.contextId,r=e.store,o=e.registry,i=e.draggableId,a=e.forceSensorStop,s=e.sourceEvent;if(!Ro({lockAPI:t,store:r,registry:o,draggableId:i}))return null;var l=o.draggable.getById(i),c=function(e,t){var n="["+Vr.contextId+'="'+e+'"]',r=pt(ft(document.querySelectorAll(n)),function(e){return e.getAttribute(Vr.id)===t});return r&&eo(r)?r:null}(n,l.descriptor.id);if(!c)return null;if(s&&!l.options.canDragInteractiveElements&&Eo(c,s))return null;var u=t.claim(a||Re),d="PRE_DRAG";function p(){return l.options.shouldRespectForcePress}function f(){return t.isActive(u)}var m=function(e,t){Lo({expected:e,phase:d,isLockActive:f,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function g(e){function n(){t.release(),d="COMPLETED"}function o(t,o){if(void 0===o&&(o={shouldBlockNextClick:!1}),e.cleanup(),o.shouldBlockNextClick){var i=Me(window,[{eventName:"click",fn:Ao,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(i)}n(),r.dispatch(Un({reason:t}))}return"PRE_DRAG"!==d&&(n(),"PRE_DRAG"!==d&&Ue(!1)),r.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),d="DRAGGING",h({isActive:function(){return Lo({expected:"DRAGGING",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return o("DROP",e)},cancel:function(e){return o("CANCEL",e)}},e.actions)}var v={isActive:function(){return Lo({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(e){var t=Ae(function(e){m(function(){return An({client:e})})});return h({},g({liftActionArgs:{id:i,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return m(Ln)},moveRight:function(){return m(Mn)},moveDown:function(){return m(Rn)},moveLeft:function(){return m(Bn)}};return g({liftActionArgs:{id:i,clientSelection:Po(c),movementMode:"SNAP"},cleanup:Re,actions:e})},abort:function(){Lo({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!0})&&t.release()}};return v}var Bo=[function(e){var t=(0,r.useRef)(xo),n=(0,r.useRef)(Re),o=ve(function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var o=e.tryGetLock(r,s,{sourceEvent:t});if(o){t.preventDefault();var i={x:t.clientX,y:t.clientY};n.current(),u(o,i)}}}}}},[e]),i=ve(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}},[e]),a=be(function(){n.current=Me(window,[i,o],{passive:!1,capture:!0})},[i,o]),s=be(function(){"IDLE"!==t.current.type&&(t.current=xo,n.current(),a())},[a]),l=be(function(){var e=t.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[s]),c=be(function(){var e=wo({cancel:l,completed:s,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=Me(window,e,{capture:!0,passive:!1})},[l,s]),u=be(function(e,n){"IDLE"!==t.current.type&&Ue(!1),t.current={type:"PENDING",point:n,actions:e},c()},[c]);Kr(function(){return a(),function(){n.current()}},[a])},function(e){var t=(0,r.useRef)(ko),n=ve(function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var r=e.findClosestDraggableId(n);if(r){var i=e.tryGetLock(r,l,{sourceEvent:n});if(i){n.preventDefault();var a=!0,s=i.snapLift();t.current(),t.current=Me(window,So(s,l),{capture:!0,passive:!1})}}}function l(){a||Ue(!1),a=!1,t.current(),o()}}}},[e]),o=be(function(){t.current=Me(window,[n],{passive:!1,capture:!0})},[n]);Kr(function(){return o(),function(){t.current()}},[o])},function(e){var t=(0,r.useRef)(No),n=(0,r.useRef)(Re),o=be(function(){return t.current},[]),i=be(function(e){t.current=e},[]),a=ve(function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var o=e.tryGetLock(r,l,{sourceEvent:t});if(o){var i=t.touches[0],a={x:i.clientX,y:i.clientY};n.current(),p(o,a)}}}}}},[e]),s=be(function(){n.current=Me(window,[a],{capture:!0,passive:!1})},[a]),l=be(function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),i(No),n.current(),s())},[s,i]),c=be(function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[l]),u=be(function(){var e={capture:!0,passive:!1},t={cancel:c,completed:l,getPhase:o},r=Me(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var o=e.touches[0],i={x:o.clientX,y:o.clientY};e.preventDefault(),n.actions.move(i)}else t()}},{eventName:"touchend",fn:function(e){var o=r();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&Ue(!1);var o=e.touches[0];if(o&&o.force>=.15){var i=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return i?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();i&&t()}}},{eventName:bo,fn:t}]}(t),e),i=Me(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:bo,fn:t}]}(t),e);n.current=function(){r(),i()}},[c,o,l]),d=be(function(){var e=o();"PENDING"!==e.type&&Ue(!1);var t=e.actions.fluidLift(e.point);i({type:"DRAGGING",actions:t,hasMoved:!1})},[o,i]),p=be(function(e,t){"IDLE"!==o().type&&Ue(!1);var n=setTimeout(d,120);i({type:"PENDING",point:t,actions:e,longPressTimerId:n}),u()},[u,o,i,d]);Kr(function(){return s(),function(){n.current();var e=o();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),i(No))}},[o,s,i]),Kr(function(){return Me(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])},[])}];function $o(e){var t=e.contextId,n=e.store,o=e.registry,i=e.customSensors,a=e.enableDefaultSensors,s=[].concat(a?Bo:[],i||[]),l=(0,r.useState)(function(){return function(){var e=null;function t(){e||Ue(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&Ue(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()})[0],c=be(function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()},[l]);Kr(function(){var e=n.getState();return n.subscribe(function(){var t=n.getState();c(e,t),e=t})},[l,n,c]),Kr(function(){return l.tryAbandon},[l.tryAbandon]);var u=be(function(e){return Ro({lockAPI:l,registry:o,store:n,draggableId:e})},[l,o,n]),d=be(function(e,r,i){return Mo({lockAPI:l,registry:o,contextId:t,store:n,draggableId:e,forceSensorStop:r,sourceEvent:i&&i.sourceEvent?i.sourceEvent:null})},[t,l,o,n]),p=be(function(e){return function(e,t){var n=Oo(e,t);return n?n.getAttribute(Hr.draggableId):null}(t,e)},[t]),f=be(function(e){var t=o.draggable.findById(e);return t?t.options:null},[o.draggable]),h=be(function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch({type:"FLUSH",payload:null}))},[l,n]),m=be(l.isClaimed,[l]),g=ve(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:p,findOptionsForDraggable:f,tryReleaseLock:h,isLockClaimed:m}},[u,d,p,f,h,m]);uo();for(var v=0;v<s.length;v++)s[v](g)}function Uo(e){return e.current||Ue(!1),e.current}function Fo(e){var t=e.contextId,n=e.setCallbacks,o=e.sensors,i=e.nonce,a=e.dragHandleUsageInstructions,s=(0,r.useRef)(null);fo();var l=ho(e),c=be(function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(l.current)},[l]),u=function(e){var t=ve(function(){return function(e){return"rbd-announcement-"+e}(e)},[e]),n=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),h(e.style,io),oo().appendChild(e),function(){setTimeout(function(){var t=oo();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)})}},[t]),be(function(e){var t=n.current;t&&(t.textContent=e)},[])}(t),d=function(e){var t=e.contextId,n=e.text,o=lo("hidden-text",{separator:"-"}),i=ve(function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:o}).contextId+"-"+e.uniqueId;var e},[o,t]);return(0,r.useEffect)(function(){var e=document.createElement("div");return e.id=i,e.textContent=n,e.style.display="none",oo().appendChild(e),function(){var t=oo();t.contains(e)&&t.removeChild(e)}},[i,n]),i}({contextId:t,text:a}),p=Xr(t,i),f=be(function(e){Uo(s).dispatch(e)},[]),m=ve(function(){return _({publishWhileDragging:Pn,updateDroppableScroll:Tn,updateDroppableIsEnabled:Dn,updateDroppableIsCombineEnabled:On,collectionStarting:In},f)},[f]),g=function(){var e=ve(no,[]);return(0,r.useEffect)(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}(),v=ve(function(){return br(g,m)},[g,m]),b=ve(function(){return zr(h({scrollWindow:xr,scrollDroppable:v.scrollDroppable},_({move:An},f)))},[v.scrollDroppable,f]),y=function(e){var t=(0,r.useRef)({}),n=(0,r.useRef)(null),o=(0,r.useRef)(null),i=(0,r.useRef)(!1),a=be(function(e,n){var r={id:e,focus:n};return t.current[e]=r,function(){var n=t.current;n[e]!==r&&delete n[e]}},[]),s=be(function(t){var n=to(e,t);n&&n!==document.activeElement&&n.focus()},[e]),l=be(function(e,t){n.current===e&&(n.current=t)},[]),c=be(function(){o.current||i.current&&(o.current=requestAnimationFrame(function(){o.current=null;var e=n.current;e&&s(e)}))},[s]),u=be(function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(Hr.draggableId)===e&&(n.current=e)},[]);return Kr(function(){return i.current=!0,function(){i.current=!1;var e=o.current;e&&cancelAnimationFrame(e)}},[]),ve(function(){return{register:a,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[a,u,c,l])}(t),x=ve(function(){return pr({announce:u,autoScroller:b,dimensionMarshal:v,focusMarshal:y,getResponders:c,styleMarshal:p})},[u,b,v,y,c,p]);s.current=x;var w=be(function(){var e=Uo(s);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})},[]),k=be(function(){var e=Uo(s).getState();return e.isDragging||"DROP_ANIMATING"===e.phase},[]);n(ve(function(){return{isDragging:k,tryAbort:w}},[k,w]));var j=be(function(e){return yr(Uo(s).getState(),e)},[]),S=be(function(){return ln(Uo(s).getState())},[]),N=ve(function(){return{marshal:v,focus:y,contextId:t,canLift:j,isMovementAllowed:S,dragHandleUsageInstructionsId:d,registry:g}},[t,v,d,y,j,S,g]);return $o({contextId:t,store:x,registry:g,customSensors:o,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,r.useEffect)(function(){return w},[w]),r.createElement(co.Provider,{value:N},r.createElement(L,{context:ro,store:x},e.children))}var zo=0;function Wo(e){var t=ve(function(){return""+zo++},[]),n=e.dragHandleUsageInstructions||Ge;return r.createElement(Fe,null,function(o){return r.createElement(Fo,{nonce:e.nonce,contextId:t,setCallbacks:o,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Ho=function(e){return function(t){return e===t}},Vo=Ho("scroll"),Go=Ho("auto"),qo=(Ho("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),Jo=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return qo(n,Vo)||qo(n,Go)}(t)?t:e(t.parentElement)},Ko=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Qo=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},Yo=function(e){return{closestScrollable:Jo(e),isFixedOnPage:Qo(e)}},Xo=function(e){var t=e.ref,n=e.descriptor,r=e.env,o=e.windowScroll,i=e.direction,a=e.isDropDisabled,s=e.isCombineEnabled,l=e.shouldClipSubject,c=r.closestScrollable,u=function(e,t){var n=Pe(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,i=r+t.scrollHeight,a=o+t.scrollWidth,s=we({top:r,right:a,bottom:i,left:o},n.border);return Se({borderBox:s,margin:n.margin,border:n.border,padding:n.padding})}(t,c),d=_e(u,o),p=function(){if(!c)return null;var e=Pe(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:_e(e,o),scroll:Ko(c),scrollSize:t,shouldClipSubject:l}}(),f=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,o=e.isFixedOnPage,i=e.direction,a=e.client,s=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,t=l.client,n=fr({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:n,diff:{value:Qe,displacement:Qe}}}}(),u="vertical"===i?Pt:It;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:o,axis:u,isEnabled:n,client:a,page:s,frame:c,subject:lt({page:s,withPlaceholder:null,axis:u,frame:c})}}({descriptor:n,isEnabled:!a,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:i,client:u,page:d,closest:p});return f},Zo={passive:!1},ei={passive:!0},ti=function(e){return e.shouldPublishImmediately?Zo:ei};function ni(e){var t=(0,r.useContext)(e);return t||Ue(!1),t}var ri=function(e){return e&&e.env.closestScrollable||null};function oi(){}var ii={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},ai=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,o=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||"close"===r?ii:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?Gn.placeholder:null}};var si=r.memo(function(e){var t=(0,r.useRef)(null),n=be(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),o=e.animate,i=e.onTransitionEnd,a=e.onClose,s=e.contextId,l=(0,r.useState)("open"===e.animate),c=l[0],u=l[1];(0,r.useEffect)(function(){return c?"open"!==o?(n(),u(!1),oi):t.current?oi:(t.current=setTimeout(function(){t.current=null,u(!1)}),n):oi},[o,c,n]);var d=be(function(e){"height"===e.propertyName&&(i(),"close"===o&&a())},[o,a,i]),p=ai({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return r.createElement(e.placeholder.tagName,{style:p,"data-rbd-placeholder-context-id":s,onTransitionEnd:d,ref:e.innerRef})}),li=r.createContext(null);var ci=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return f(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(r.PureComponent),ui=5e3,di=4500,pi=function(e,t){return t?Gn.drop(t.duration):e?Gn.snap:Gn.fluid},fi=function(e,t){return e?t?Wn.drop:Wn.combining:null};function hi(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,o=e.dropping,i=Boolean(r),a=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),s=Boolean(o),l=s?Kn(n,i):Jn(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:pi(a,o),transform:l,opacity:fi(i,s),zIndex:s?di:ui,pointerEvents:"none"}}(e):{transform:Jn((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}function mi(e){var t=lo("draggable"),n=e.descriptor,o=e.registry,i=e.getDraggableRef,a=e.canDragInteractiveElements,s=e.shouldRespectForcePress,l=e.isEnabled,c=ve(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:s,isEnabled:l}},[a,l,s]),u=be(function(e){var t=i();return t||Ue(!1),function(e,t,n){void 0===n&&(n=Qe);var r=window.getComputedStyle(t),o=t.getBoundingClientRect(),i=Ee(o,r),a=_e(i,n);return{descriptor:e,placeholder:{client:i,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:i.marginBox.width,y:i.marginBox.height},client:i,page:a}}(n,t,e)},[n,i]),d=ve(function(){return{uniqueId:t,descriptor:n,options:c,getDimension:u}},[n,u,c,t]),p=(0,r.useRef)(d),f=(0,r.useRef)(!0);Kr(function(){return o.draggable.register(p.current),function(){return o.draggable.unregister(p.current)}},[o.draggable]),Kr(function(){if(f.current)f.current=!1;else{var e=p.current;p.current=d,o.draggable.update(d,e)}},[d,o.draggable])}function gi(e,t,n){po()}function vi(e){e.preventDefault()}var bi=function(e,t){return e===t},yi=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function xi(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var wi={mapped:{type:"SECONDARY",offset:Qe,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:xi(null)}};var ki=fe(function(){var e=function(){var e=Oe(function(e,t){return{x:e,y:t}}),t=Oe(function(e,t,n,r,o){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(o),dropAnimation:o,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}}),n=Oe(function(e,n,r,o,i,a,s){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:i,combineWith:a,mode:n,offset:e,dimension:r,forceShouldAnimate:s,snapshot:t(n,o,i,a,null)}}});return function(r,o){if(r.isDragging){if(r.critical.draggable.id!==o.draggableId)return null;var i=r.current.client.offset,a=r.dimensions.draggables[o.draggableId],s=an(r.impact),l=(u=r.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,c=r.forceShouldAnimate;return n(e(i.x,i.y),r.movementMode,a,o.isClone,s,l,c)}var u;if("DROP_ANIMATING"===r.phase){var d=r.completed;if(d.result.draggableId!==o.draggableId)return null;var p=o.isClone,f=r.dimensions.draggables[o.draggableId],h=d.result,m=h.mode,g=yi(h),v=function(e){return e.combine?e.combine.draggableId:null}(h),b={duration:r.dropDuration,curve:zn,moveTo:r.newHomeClientOffset,opacity:v?Wn.drop:null,scale:v?Hn.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:f,dropping:b,draggingOver:g,combineWith:v,mode:m,forceShouldAnimate:null,snapshot:t(m,p,g,v,b)}}}return null}}(),t=function(){var e=Oe(function(e,t){return{x:e,y:t}}),t=Oe(xi),n=Oe(function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}}),r=function(e){return e?n(Qe,e,!0):null},o=function(t,o,i,a){var s=i.displaced.visible[t],l=Boolean(a.inVirtualList&&a.effected[t]),c=xt(i),u=c&&c.draggableId===t?o:null;if(!s){if(!l)return r(u);if(i.displaced.invisible[t])return null;var d=et(a.displacedBy.point),p=e(d.x,d.y);return n(p,u,!0)}if(l)return r(u);var f=i.displacedBy.point,h=e(f.x,f.y);return n(h,u,s.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:o(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:o(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(n,r){return e(n,r)||t(n,r)||wi}},{dropAnimationFinished:Fn},null,{context:ro,pure:!0,areStatePropsEqual:bi})(function(e){var t=(0,r.useRef)(null),n=be(function(e){t.current=e},[]),o=be(function(){return t.current},[]),i=ni(co),a=i.contextId,s=i.dragHandleUsageInstructionsId,l=i.registry,c=ni(li),u=c.type,d=c.droppableId,p=ve(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}},[e.draggableId,e.index,u,d]),f=e.children,h=e.draggableId,m=e.isEnabled,g=e.shouldRespectForcePress,v=e.canDragInteractiveElements,b=e.isClone,y=e.mapped,x=e.dropAnimationFinished;gi(),uo(),b||mi(ve(function(){return{descriptor:p,registry:l,getDraggableRef:o,canDragInteractiveElements:v,shouldRespectForcePress:g,isEnabled:m}},[p,l,o,v,g,m]));var w=ve(function(){return m?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:vi}:null},[a,s,h,m]),k=be(function(e){"DRAGGING"===y.type&&y.dropping&&"transform"===e.propertyName&&x()},[x,y]),j=ve(function(){var e=hi(y),t="DRAGGING"===y.type&&y.dropping?k:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:w}},[a,w,h,y,k,n]),S=ve(function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}},[p.droppableId,p.id,p.index,p.type]);return f(j,y.snapshot,S)});function ji(e){return ni(li).isUsingCloneFor!==e.draggableId||e.isClone?r.createElement(ki,e):null}function Si(e){var t="boolean"!==typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),o=Boolean(e.shouldRespectForcePress);return r.createElement(ji,h({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:o}))}var Ni=function(e,t){return e===t.droppable.type},Ci=function(e,t){return t.draggables[e.draggable.id]};var _i={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||Ue(!1),document.body}},Ei=fe(function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=h({},e,{shouldAnimatePlaceholder:!1}),n=Oe(function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}}),r=Oe(function(r,o,i,a,s,l){var c=s.descriptor.id;if(s.descriptor.droppableId===r){var u=l?{render:l,dragging:n(s.descriptor)}:null,d={isDraggingOver:i,draggingOverWith:i?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:u}}if(!o)return t;if(!a)return e;var p={isDraggingOver:i,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return function(n,o){var i=o.droppableId,a=o.type,s=!o.isDropDisabled,l=o.renderClone;if(n.isDragging){var c=n.critical;if(!Ni(a,c))return t;var u=Ci(c,n.dimensions),d=an(n.impact)===i;return r(i,s,d,d,u,l)}if("DROP_ANIMATING"===n.phase){var p=n.completed;if(!Ni(a,p.critical))return t;var f=Ci(p.critical,n.dimensions);return r(i,s,yi(p.result)===i,an(p.impact)===i,f,l)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var h=n.completed;if(!Ni(a,h.critical))return t;var m=an(h.impact)===i,g=Boolean(h.impact.at&&"COMBINE"===h.impact.at.type),v=h.critical.droppable.id===i;return m?g?e:t:v?e:t}return t}},{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:ro,pure:!0,areStatePropsEqual:bi})(function(e){var t=(0,r.useContext)(co);t||Ue(!1);var n=t.contextId,o=t.isMovementAllowed,i=(0,r.useRef)(null),a=(0,r.useRef)(null),s=e.children,l=e.droppableId,c=e.type,u=e.mode,d=e.direction,p=e.ignoreContainerClipping,f=e.isDropDisabled,h=e.isCombineEnabled,m=e.snapshot,g=e.useClone,v=e.updateViewportMaxScroll,b=e.getContainerForClone,y=be(function(){return i.current},[]),x=be(function(e){i.current=e},[]),w=(be(function(){return a.current},[]),be(function(e){a.current=e},[]));po();var k=be(function(){o()&&v({maxScroll:mr()})},[o,v]);!function(e){var t=(0,r.useRef)(null),n=ni(co),o=lo("droppable"),i=n.registry,a=n.marshal,s=ho(e),l=ve(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=(0,r.useRef)(l),u=ve(function(){return Oe(function(e,n){t.current||Ue(!1);var r={x:e,y:n};a.updateDroppableScroll(l.id,r)})},[l.id,a]),d=be(function(){var e=t.current;return e&&e.env.closestScrollable?Ko(e.env.closestScrollable):Qe},[]),p=be(function(){var e=d();u(e.x,e.y)},[d,u]),f=ve(function(){return Ae(p)},[p]),h=be(function(){var e=t.current,n=ri(e);e&&n||Ue(!1),e.scrollOptions.shouldPublishImmediately?p():f()},[f,p]),m=be(function(e,r){t.current&&Ue(!1);var o=s.current,i=o.getDroppableRef();i||Ue(!1);var a=Yo(i),c={ref:i,descriptor:l,env:a,scrollOptions:r};t.current=c;var u=Xo({ref:i,descriptor:l,env:a,windowScroll:e,direction:o.direction,isDropDisabled:o.isDropDisabled,isCombineEnabled:o.isCombineEnabled,shouldClipSubject:!o.ignoreContainerClipping}),d=a.closestScrollable;return d&&(d.setAttribute(qr.contextId,n.contextId),d.addEventListener("scroll",h,ti(c.scrollOptions))),u},[n.contextId,l,h,s]),g=be(function(){var e=t.current,n=ri(e);return e&&n||Ue(!1),Ko(n)},[]),v=be(function(){var e=t.current;e||Ue(!1);var n=ri(e);t.current=null,n&&(f.cancel(),n.removeAttribute(qr.contextId),n.removeEventListener("scroll",h,ti(e.scrollOptions)))},[h,f]),b=be(function(e){var n=t.current;n||Ue(!1);var r=ri(n);r||Ue(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x},[]),y=ve(function(){return{getDimensionAndWatchScroll:m,getScrollWhileDragging:g,dragStopped:v,scroll:b}},[v,m,g,b]),x=ve(function(){return{uniqueId:o,descriptor:l,callbacks:y}},[y,l,o]);Kr(function(){return c.current=x.descriptor,i.droppable.register(x),function(){t.current&&v(),i.droppable.unregister(x)}},[y,l,v,x,a,i.droppable]),Kr(function(){t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),Kr(function(){t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:f,isCombineEnabled:h,ignoreContainerClipping:p,getDroppableRef:y});var j=r.createElement(ci,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(e){var t=e.onClose,o=e.data,i=e.animate;return r.createElement(si,{placeholder:o,onClose:t,innerRef:w,animate:i,contextId:n,onTransitionEnd:k})}),S=ve(function(){return{innerRef:x,placeholder:j,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":n}}},[n,l,j,x]),N=g?g.dragging.draggableId:null,C=ve(function(){return{droppableId:l,type:c,isUsingCloneFor:N}},[l,N,c]);return r.createElement(li.Provider,{value:C},s(S,m),function(){if(!g)return null;var e=g.dragging,t=g.render,n=r.createElement(ji,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(n,r){return t(n,r,e)});return me.createPortal(n,b())}())});Ei.defaultProps=_i;class Pi extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class Ii extends Pi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ti extends Pi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Di extends Pi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Oi;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Oi||(Oi={}));var Ai=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class Li{constructor(e){let{headers:t={},customFetch:r,region:o=Oi.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=o,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return Ai(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:i}=t;let a={},{region:s}=t;s||(s=this.region);const l=new URL(`${this.url}/${e}`);let c;s&&"any"!==s&&(a["x-region"]=s,l.searchParams.set("forceFunctionRegion",s)),i&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=i):"string"===typeof i?(a["Content-Type"]="text/plain",c=i):"undefined"!==typeof FormData&&i instanceof FormData?c=i:(a["Content-Type"]="application/json",c=JSON.stringify(i)));const u=yield this.fetch(l.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:c}).catch(e=>{throw new Ii(e)}),d=u.headers.get("x-relay-error");if(d&&"true"===d)throw new Ti(u);if(!u.ok)throw new Di(u);let p,f=(null!==(n=u.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return p="application/json"===f?yield u.json():"application/octet-stream"===f?yield u.blob():"text/event-stream"===f?u:"multipart/form-data"===f?yield u.formData():yield u.text(),{data:p,error:null,response:u}}catch(r){return{data:null,error:r,response:r instanceof Di||r instanceof Ti?r.context:void 0}}})}}var Ri=n(980);const{PostgrestClient:Mi,PostgrestQueryBuilder:Bi,PostgrestFilterBuilder:$i,PostgrestTransformBuilder:Ui,PostgrestBuilder:Fi,PostgrestError:zi}=Ri;const Wi=function(){if("undefined"!==typeof WebSocket)return WebSocket;if("undefined"!==typeof global.WebSocket)return global.WebSocket;if("undefined"!==typeof window.WebSocket)return window.WebSocket;if("undefined"!==typeof self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var Hi,Vi,Gi,qi,Ji,Ki;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Hi||(Hi={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Vi||(Vi={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Gi||(Gi={})),function(e){e.websocket="websocket"}(qi||(qi={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Ji||(Ji={}));class Qi{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),o=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+r));i+=r;const s=n.decode(e.slice(i,i+o));i+=o;return{ref:null,topic:a,event:s,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class Yi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Ki||(Ki={}));const Xi=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,o)=>(n[o]=Zi(o,e,t,r),n),{})},Zi=(e,t,n,r)=>{const o=t.find(t=>t.name===e),i=null===o||void 0===o?void 0:o.type,a=n[e];return i&&!r.includes(i)?ea(i,a):ta(a)},ea=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return ia(t,n)}switch(e){case Ki.bool:return na(t);case Ki.float4:case Ki.float8:case Ki.int2:case Ki.int4:case Ki.int8:case Ki.numeric:case Ki.oid:return ra(t);case Ki.json:case Ki.jsonb:return oa(t);case Ki.timestamp:return aa(t);case Ki.abstime:case Ki.date:case Ki.daterange:case Ki.int4range:case Ki.int8range:case Ki.money:case Ki.reltime:case Ki.text:case Ki.time:case Ki.timestamptz:case Ki.timetz:case Ki.tsrange:case Ki.tstzrange:default:return ta(t)}},ta=e=>e,na=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ra=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},oa=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ia=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(o){r=i?i.split(","):[]}return r.map(e=>ea(t,e))}return e},aa=e=>"string"===typeof e?e.replace(" ","T"):e,sa=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class la{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ca,ua,da,pa;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(ca||(ca={}));class fa{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fa.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=fa.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=fa.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const o=this.cloneDeep(e),i=this.transformState(t),a={},s={};return this.map(o,(e,t)=>{i[e]||(s[e]=t)}),this.map(i,(e,t)=>{const n=o[e];if(n){const r=t.map(e=>e.presence_ref),o=n.map(e=>e.presence_ref),i=t.filter(e=>o.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);i.length>0&&(a[e]=i),l.length>0&&(s[e]=l)}else a[e]=t}),this.syncDiff(o,{joins:a,leaves:s},n,r)}static syncDiff(e,t,n,r){const{joins:o,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(o,(t,r)=>{var o;const i=null!==(o=e[t])&&void 0!==o?o:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map(e=>e.presence_ref),r=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,i,r)}),this.map(i,(t,n)=>{let o=e[t];if(!o)return;const i=n.map(e=>e.presence_ref);o=o.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=o,r(t,o,n),0===o.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(ua||(ua={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(da||(da={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(pa||(pa={}));class ha{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Vi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new la(this,Gi.join,this.params,this.timeout),this.rejoinTimer=new Yi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vi.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Vi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gi.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new fa(this),this.broadcastEndpointURL=sa(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Vi.closed){const{config:{broadcast:o,presence:i,private:a}}=this.params;this._onError(t=>null===e||void 0===e?void 0:e(pa.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(pa.CLOSED));const s={},l={broadcast:o,presence:i,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],private:a};this.socket.accessTokenValue&&(s.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},s)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,o=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,i=[];for(let r=0;r<o;r++){const o=t[r],{filter:{event:a,schema:s,table:l,filter:c}}=o,u=n&&n[r];if(!u||u.event!==a||u.schema!==s||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=Vi.errored,void(null===e||void 0===e||e(pa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},o),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e(pa.SUBSCRIBED))}null===e||void 0===e||e(pa.SUBSCRIBED)}).receive("error",t=>{this.state=Vi.errored,null===e||void 0===e||e(pa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(pa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,o,i;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(o=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===o?void 0:o.broadcast)||void 0===i?void 0:i.ack)||n("ok"),a.receive("ok",()=>n("ok")),a.receive("error",()=>n("error")),a.receive("timeout",()=>n("timed out"))});{const{event:i,payload:a}=e,s={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(o){return"AbortError"===o.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Vi.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new la(this,Gi.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const r=new AbortController,o=setTimeout(()=>r.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(o),i}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new la(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,o;const i=e.toLocaleLowerCase(),{close:a,error:s,leave:l,join:c}=Gi;if(n&&[a,s,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i}).map(e=>e.callback(u,n)):null===(o=this.bindings[i])||void 0===o||o.filter(e=>{var n,r,o,a,s,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===a||(null===a||void 0===a?void 0:a.toLocaleLowerCase())===(null===(o=t.data)||void 0===o?void 0:o.type.toLocaleLowerCase()))}{const n=null===(s=null===(a=null===e||void 0===e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:o,errors:i}=e,a={schema:t,table:n,commit_timestamp:r,eventType:o,new:{},old:{},errors:i};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===Vi.closed}_isJoined(){return this.state===Vi.joined}_isJoining(){return this.state===Vi.joining}_isLeaving(){return this.state===Vi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),o={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&ha.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Gi.close,{},e)}_onError(e){this._on(Gi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Xi(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Xi(e.columns,e.old_record)),t}}const ma=()=>{};class ga{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ma,this.ref=0,this.logger=ma,this.conn=null,this.sendBuffer=[],this.serializer=new Qi,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},this.endPoint=`${e}/${qi.websocket}`,this.httpEndpoint=sa(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),((null===t||void 0===t?void 0:t.logLevel)||(null===t||void 0===t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const o=null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Yi(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Wi),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Hi.connecting:return Ji.Connecting;case Hi.open:return Ji.Open;case Hi.closing:return Ji.Closing;default:return Ji.Closed}}isConnected(){return this.connectionState()===Ji.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new ha(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:o}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${o})`,r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:"realtime-js/2.11.15"};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(Gi.access_token,{access_token:e})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:r,ref:o}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${t} ${n} ${o&&"("+o+")"||""}`,r),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,o)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Gi.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class va extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ba(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class ya extends va{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class xa extends va{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var wa=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const ka=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},ja=e=>{if(Array.isArray(e))return e.map(e=>ja(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const o=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[o]=ja(r)}),t};var Sa=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const Na=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ca=(e,t,r)=>Sa(void 0,void 0,void 0,function*(){const o=yield wa(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof o&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{t(new ya(Na(n),e.status||500))}).catch(e=>{t(new xa(Na(e),e))}):t(new xa(Na(e),e))});function _a(e,t,n,r,o,i){return Sa(this,void 0,void 0,function*(){return new Promise((a,s)=>{e(n,((e,t,n,r)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),n))})(t,r,o,i)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>Ca(e,s,r))})})}function Ea(e,t,n,r){return Sa(this,void 0,void 0,function*(){return _a(e,"GET",t,n,r)})}function Pa(e,t,n,r,o){return Sa(this,void 0,void 0,function*(){return _a(e,"POST",t,r,o,n)})}function Ia(e,t,n,r,o){return Sa(this,void 0,void 0,function*(){return _a(e,"DELETE",t,r,o,n)})}var Ta=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const Da={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Oa={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Aa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=ka(r)}uploadOrUpdate(e,t,n,r){return Ta(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},Oa),r);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const s=i.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),s&&o.append("metadata",this.encodeMetadata(s)),o.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),s&&o.append("metadata",this.encodeMetadata(s))):(o=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,s&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(s)))),(null===r||void 0===r?void 0:r.headers)&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:o,headers:a},(null===i||void 0===i?void 0:i.duplex)?{duplex:i.duplex}:{})),d=yield u.json();if(u.ok)return{data:{path:l,id:d.Id,fullPath:d.Key},error:null};return{data:null,error:d}}catch(o){if(ba(o))return{data:null,error:o};throw o}})}upload(e,t,n){return Ta(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return Ta(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Oa.upsert},r),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const s=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:i}),l=yield s.json();if(s.ok)return{data:{path:o,fullPath:l.Key},error:null};return{data:null,error:l}}catch(s){if(ba(s))return{data:null,error:s};throw s}})}createSignedUploadUrl(e,t){return Ta(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const o=yield Pa(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new va("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(n){if(ba(n))return{data:null,error:n};throw n}})}update(e,t,n){return Ta(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Ta(this,void 0,void 0,function*(){try{return{data:yield Pa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ba(r))return{data:null,error:r};throw r}})}copy(e,t,n){return Ta(this,void 0,void 0,function*(){try{return{data:{path:(yield Pa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ba(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return Ta(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),o=yield Pa(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(r){if(ba(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return Ta(this,void 0,void 0,function*(){try{const r=yield Pa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${o}`):null})),error:null}}catch(r){if(ba(r))return{data:null,error:r};throw r}})}download(e,t){return Ta(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),o=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield Ea(this.fetch,`${this.url}/${n}/${t}${o}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(i){if(ba(i))return{data:null,error:i};throw i}})}info(e){return Ta(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Ea(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ja(e),error:null}}catch(n){if(ba(n))return{data:null,error:n};throw n}})}exists(e){return Ta(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return Sa(this,void 0,void 0,function*(){return _a(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ba(n)&&n instanceof xa){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],o=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==o&&r.push(o);const i="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==a&&r.push(a);let s=r.join("&");return""!==s&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${s}`)}}}remove(e){return Ta(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ba(t))return{data:null,error:t};throw t}})}list(e,t,n){return Ta(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Da),t),{prefix:e||""});return{data:yield Pa(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ba(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const La={"X-Client-Info":"storage-js/2.7.1"};var Ra=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class Ma{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},La),t),this.fetch=ka(n)}listBuckets(){return Ra(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ba(e))return{data:null,error:e};throw e}})}getBucket(e){return Ra(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ba(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Ra(this,void 0,void 0,function*(){try{return{data:yield Pa(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ba(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Ra(this,void 0,void 0,function*(){try{const n=yield function(e,t,n,r,o){return Sa(this,void 0,void 0,function*(){return _a(e,"PUT",t,r,o,n)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(ba(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ra(this,void 0,void 0,function*(){try{return{data:yield Pa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ba(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ra(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ba(t))return{data:null,error:t};throw t}})}}class Ba extends Ma{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new Aa(this.url,this.headers,e,this.fetch)}}let $a="";$a="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ua={headers:{"X-Client-Info":`supabase-js-${$a}/2.51.0`}},Fa={schema:"public"},za={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wa={};var Ha=n(630),Va=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const Ga=e=>{let t;return t=e||("undefined"===typeof fetch?Ha.default:fetch),function(){return t(...arguments)}},qa=(e,t,n)=>{const r=Ga(n),o="undefined"===typeof Headers?Ha.Headers:Headers;return(n,i)=>Va(void 0,void 0,void 0,function*(){var a;const s=null!==(a=yield t())&&void 0!==a?a:e;let l=new o(null===i||void 0===i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${s}`),r(n,Object.assign(Object.assign({},i),{headers:l}))})};var Ja=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const Ka="2.71.0",Qa=3e4,Ya=9e4,Xa={"X-Client-Info":`gotrue-js/${Ka}`},Za="X-Supabase-Api-Version",es={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ts=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class ns extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function rs(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class os extends ns{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class is extends ns{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class as extends ns{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class ss extends as{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ls extends as{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cs extends as{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class us extends as{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ds extends as{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ps extends as{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function fs(e){return rs(e)&&"AuthRetryableFetchError"===e.name}class hs extends as{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class ms extends as{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const gs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vs=" \t\n\r=".split(""),bs=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<vs.length;t+=1)e[vs[t].charCodeAt(0)]=-2;for(let t=0;t<gs.length;t+=1)e[gs[t].charCodeAt(0)]=t;return e})();function ys(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(gs[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(gs[e]),t.queuedBits-=6}}function xs(e,t,n){const r=bs[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function ws(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let a=0;a<e.length;a+=1)xs(e.charCodeAt(a),o,i);return t.join("")}function ks(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function js(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}ks(r,t)}}function Ss(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let o=0;o<e.length;o+=1)xs(e.charCodeAt(o),n,r);return new Uint8Array(t)}function Ns(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>ys(e,n,r)),ys(null,n,r),t.join("")}const Cs=()=>"undefined"!==typeof window&&"undefined"!==typeof document,_s={tested:!1,writable:!1},Es=()=>{if(!Cs())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(_s.tested)return _s.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),_s.tested=!0,_s.writable=!0}catch(t){_s.tested=!0,_s.writable=!1}return _s.writable};const Ps=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Is=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ts=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},Ds=async(e,t)=>{await e.removeItem(t)};class Os{constructor(){this.promise=new Os.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function As(e){const t=e.split(".");if(3!==t.length)throw new ms("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!ts.test(t[n]))throw new ms("JWT not in base64url format");return{header:JSON.parse(ws(t[0])),payload:JSON.parse(ws(t[1])),signature:Ss(t[2]),raw:{header:t[0],payload:t[1]}}}function Ls(e){return("0"+e.toString(16)).substr(-2)}async function Rs(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ms(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Ls).join("")}();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await Is(e,`${t}-code-verifier`,o);const i=await Rs(r);return[i,r===i?"plain":"s256"]}Os.promiseConstructor=Promise;const Bs=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const $s=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Us(e){if(!$s.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Fs(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var zs=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Ws=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Hs=[502,503,504];async function Vs(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new ps(Ws(e),0);if(Hs.includes(e.status))throw new ps(Ws(e),e.status);let r,o;try{r=await e.json()}catch(a){throw new is(Ws(a),a)}const i=function(e){const t=e.headers.get(Za);if(!t)return null;if(!t.match(Bs))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(a){return null}}(e);if(i&&i.getTime()>=es.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?o=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(o=r.error_code),o){if("weak_password"===o)throw new hs(Ws(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===o)throw new ss}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new hs(Ws(r),e.status,r.weak_password.reasons);throw new os(Ws(r),e.status||500,o)}async function Gs(e,t,n,r){var o;const i=Object.assign({},null===r||void 0===r?void 0:r.headers);i[Za]||(i[Za]=es.name),(null===r||void 0===r?void 0:r.jwt)&&(i.Authorization=`Bearer ${r.jwt}`);const a=null!==(o=null===r||void 0===r?void 0:r.query)&&void 0!==o?o:{};(null===r||void 0===r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,r,o,i){const a=((e,t,n,r)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))})(t,r,o,i);let s;try{s=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new ps(Ws(l),0)}s.ok||await Vs(s);if(null===r||void 0===r?void 0:r.noResolveJson)return s;try{return await s.json()}catch(l){await Vs(l)}}(e,t,n+s,{headers:i,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function qs(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Js(e){const t=qs(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Ks(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Qs(e){return{data:e,error:null}}function Ys(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i}=e,a=zs(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},a)},error:null}}function Xs(e){return e}const Zs=["global","local","others"];var el=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};class tl{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=Ps(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zs[0];if(Zs.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zs.join(", ")}`);try{return await Gs(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(rs(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Gs(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ks})}catch(n){if(rs(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=el(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await Gs(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ys,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(rs(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Gs(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ks})}catch(t){if(rs(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,o,i,a,s;try{const l={nextPage:null,lastPage:0,total:0},c=await Gs(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(o=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==o?o:""},xform:Xs});if(c.error)throw c.error;const u=await c.json(),d=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,p=null!==(s=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==s?s:[];return p.length>0&&(p.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(rs(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Us(e);try{return await Gs(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ks})}catch(t){if(rs(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Us(e);try{return await Gs(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ks})}catch(n){if(rs(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Us(e);try{return await Gs(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ks})}catch(n){if(rs(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Us(e.userId);try{const{data:t,error:n}=await Gs(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(rs(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Us(e.userId),Us(e.id);try{return{data:await Gs(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(rs(t))return{data:null,error:t};throw t}}}function nl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const rl=!!(globalThis&&Es()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class ol extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class il extends ol{}async function al(e,t,n){rl&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),rl&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw rl&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new il(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(rl)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}rl&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{rl&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const sl={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xa,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ll(e,t,n){return await n()}const cl={};class ul{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ul.nextInstanceID,ul.nextInstanceID+=1,this.instanceID>0&&Cs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},sl),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new tl({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Ps(r.fetch),this.lock=r.lock||ll,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Cs()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=al:this.lock=ll,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Es()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nl(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=nl(this.memoryStorage)),Cs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=cl[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){cl[this.storageKey]=Object.assign(Object.assign({},cl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=cl[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){cl[this.storageKey]=Object.assign(Object.assign({},cl[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(`GoTrueClient@${this.instanceID} (${Ka}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Cs()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:o}=await this._getSessionFromURL(t,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),function(e){return rs(e)&&"AuthImplicitGrantRedirectError"===e.name}(o)){const t=null===(e=o.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return rs(t)?{error:t}:{error:new is("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const o=await Gs(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:qs}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const s=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(o){if(rs(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,n,r;try{let o;if("email"in e){const{email:n,password:r,options:i}=e;let a=null,s=null;"pkce"===this.flowType&&([a,s]=await Ms(this.storage,this.storageKey)),o=await Gs(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:s},xform:qs})}else{if(!("phone"in e))throw new cs("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:a}=e;o=await Gs(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null===a||void 0===a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:qs})}}const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const s=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(o){if(rs(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:o}=e;t=await Gs(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:Js})}else{if(!("phone"in e))throw new cs("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:o}=e;t=await Gs(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:Js})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new ls}}catch(t){if(rs(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,o;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(o=e.options)||void 0===o?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,o,i,a,s,l,c,u,d,p;let f,h;if("message"in e)f=e.message,h=e.signature;else{const{chain:d,wallet:p,statement:m,options:g}=e;let v;if(Cs())if("object"===typeof p)v=p;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof p||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=p}const b=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),h=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${b.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${null!==(r=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");h=e}}try{const{data:t,error:n}=await Gs(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Ns(h)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(p=e.options)||void 0===p?void 0:p.captchaToken}}:null),xform:qs});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new ls}}catch(m){if(rs(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await Ts(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:o}=await Gs(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:qs});if(await Ds(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:o}):{data:{user:null,session:null,redirectType:null},error:new ls}}catch(o){if(rs(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:o,nonce:i}=e,a=await Gs(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:qs}),{data:s,error:l}=a;return l?{data:{user:null,session:null},error:l}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:l}):{data:{user:null,session:null},error:new ls}}catch(t){if(rs(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,o,i;try{if("email"in e){const{email:r,options:o}=e;let i=null,a=null;"pkce"===this.flowType&&([i,a]=await Ms(this.storage,this.storageKey));const{error:s}=await Gs(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},create_user:null===(n=null===o||void 0===o?void 0:o.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:i,code_challenge_method:a},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:s}=await Gs(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(o=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(i=null===n||void 0===n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:s}}throw new cs("You must provide either an email or phone number.")}catch(a){if(rs(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,o;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,o=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:a}=await Gs(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:qs});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const s=i.session,l=i.user;return(null===s||void 0===s?void 0:s.access_token)&&(await this._saveSession(s),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(r){if(rs(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let o=null,i=null;return"pkce"===this.flowType&&([o,i]=await Ms(this.storage,this.storageKey)),await Gs(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:Qs})}catch(o){if(rs(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new ss;const{error:r}=await Gs(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(rs(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:o}=e,{error:i}=await Gs(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:r,options:o}=e,{data:i,error:a}=await Gs(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:a}}throw new cs("You must provide either an email or phone number and a type")}catch(t){if(rs(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Ts(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Ya;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Ts(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=Fs()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Gs(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ks}):await this._useSession(async e=>{var t,n,r;const{data:o,error:i}=e;if(i)throw i;return(null===(t=o.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Gs(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Ks}):{data:{user:null},error:new ss}})}catch(t){if(rs(t))return function(e){return rs(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Ds(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:o}=n;if(o)throw o;if(!r.session)throw new ss;const i=r.session;let a=null,s=null;"pkce"===this.flowType&&null!=e.email&&([a,s]=await Ms(this.storage,this.storageKey));const{data:l,error:c}=await Gs(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:s}),jwt:i.access_token,xform:Ks});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(rs(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ss;const t=Date.now()/1e3;let n=t,r=!0,o=null;const{payload:i}=As(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};o=t}else{const{data:r,error:i}=await this._getUser(e.access_token);if(i)throw i;o={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(rs(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:o}=t;if(o)throw o;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new ss;const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(rs(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Cs())throw new us("No browser detected.");if(e.error||e.error_description||e.error_code)throw new us(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new ds("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new us("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ds("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:o,refresh_token:i,expires_in:a,expires_at:s,token_type:l}=e;if(!o||!a||!i||!l)throw new us("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let d=c+u;s&&(d=parseInt(s));const p=d-c;1e3*p<=Qa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${u}s`);const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:h,error:m}=await this._getUser(o);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:o,expires_in:u,expires_at:d,refresh_token:i,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(rs(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ts(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:o}=t;if(o)return{error:o};const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return rs(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Ds(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:o}=t;if(o)throw o;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(o){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await Ms(this.storage,this.storageKey,!0));try{return await Gs(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(rs(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(rs(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,o,i,a;const{data:s,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(o=e.options)||void 0===o?void 0:o.queryParams,skipBrowserRedirect:!0});return await Gs(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(i=s.session)||void 0===i?void 0:i.access_token)&&void 0!==a?a:void 0})});if(r)throw r;return Cs()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(rs(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:o,error:i}=t;if(i)throw i;return await Gs(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(rs(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const o=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Gs(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qs})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&fs(t)&&Date.now()+n-o<Qa},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!r(i,null,t))return void e(t)}catch(o){if(!r(i,o))return void t(o)}})()}))}catch(o){if(this._debug(t,"error",o),rs(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Cs()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const o=await Ts(this.storage,this.storageKey);if(o&&this.userStorage){let t=await Ts(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:o.user},await Is(this.userStorage,this.storageKey+"-user",t)),o.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:Fs()}else if(o&&!o.user&&!o.user){const e=await Ts(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(o.user=e.user,await Ds(this.storage,this.storageKey+"-user"),await Is(this.storage,this.storageKey,o)):o.user=Fs()}if(this._debug(n,"session from storage",o),!this._isValidSession(o))return this._debug(n,"session is not valid"),void(null!==o&&await this._removeSession());const i=1e3*(null!==(t=o.expires_at)&&void 0!==t?t:1/0)-Date.now()<Ya;if(this._debug(n,`session has${i?"":" not"} expired with margin of 90000s`),i){if(this.autoRefreshToken&&o.refresh_token){const{error:e}=await this._callRefreshToken(o.refresh_token);e&&(console.error(e),fs(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(o.user&&!0===o.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(o.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(o.user=e.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){return this._debug(n,"error",o),void console.error(o)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new ss;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Os;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new ss;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(o){if(this._debug(r,"error",o),rs(o)){const e={session:null,error:o};return fs(o)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(o){r.push(o)}});if(await Promise.all(o),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Is(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=structuredClone(e);await Is(this.storage,this.storageKey,r)}else{const e=structuredClone(t);await Is(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Ds(this.storage,this.storageKey),await Ds(this.storage,this.storageKey+"-code-verifier"),await Ds(this.storage,this.storageKey+"-user"),this.userStorage&&await Ds(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Cs()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qa);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Qa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof ol))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Cs()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null===n||void 0===n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await Ms(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;return o?{data:null,error:o}:await Gs(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(rs(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:o,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:s,error:l}=await Gs(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(n=null===o||void 0===o?void 0:o.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===s||void 0===s?void 0:s.totp)||void 0===r?void 0:r.qr_code)&&(s.totp.qr_code=`data:image/svg+xml;utf-8,${s.totp.qr_code}`),{data:s,error:null})})}catch(t){if(rs(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;if(o)return{data:null,error:o};const{data:i,error:a}=await Gs(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(t){if(rs(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;return o?{data:null,error:o}:await Gs(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(rs(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),o=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:o}=e;if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=As(r.access_token);let a=null;i.aal&&(a=i.aal);let s=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(s="aal2");return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:i.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:r,error:o}=await Gs(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=n,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:o,signature:i,raw:{header:a,payload:s}}=As(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(o.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:o,header:r,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,i,function(e){const t=[];return js(e,e=>t.push(e)),new Uint8Array(t)}(`${a}.${s}`)))throw new ms("Invalid JWT signature");return{data:{claims:o,header:r,signature:i},error:null}}catch(n){if(rs(n))return{data:null,error:n};throw n}}}ul.nextInstanceID=0;const dl=ul;class pl extends dl{constructor(e){super(e)}}var fl=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class hl{constructor(e,t,n){var r,o,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=(s=e).endsWith("/")?s:s+"/";var s;const l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u=function(e,t){var n,r;const{db:o,auth:i,realtime:a,global:s}=e,{db:l,auth:c,realtime:u,global:d}=t,p={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),a),global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null===s||void 0===s?void 0:s.headers)&&void 0!==r?r:{})}),accessToken:()=>Ja(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}(null!==n&&void 0!==n?n:{},{db:Fa,realtime:Wa,auth:Object.assign(Object.assign({},za),{storageKey:c}),global:Ua});this.storageKey=null!==(r=u.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(o=u.global.headers)&&void 0!==o?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=u.auth)&&void 0!==i?i:{},this.headers,u.global.fetch),this.fetch=qa(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Mi(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Li(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ba(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return fl(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:o,detectSessionInUrl:i,storage:a,storageKey:s,flowType:l,lock:c,debug:u}=e;const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pl({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),t),storageKey:s,autoRefreshToken:r,persistSession:o,detectSessionInUrl:i,storage:a,flowType:l,lock:c,debug:u,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ga(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const ml=((e,t,n)=>new hl(e,t,n))("https://sxfperfomejmoxmwajpc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4ZnBlcmZvbWVqbW94bXdhanBjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzNDU0MTcsImV4cCI6MjA2OTkyMTQxN30.-vB_wWlhDpO_lpqmHbcrtXawlLGjMAh148SWLLcQIH4"),gl=()=>{let e=localStorage.getItem("userSessionId");return e||(e="user_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),localStorage.setItem("userSessionId",e)),{uid:e,isAnonymous:!0}},vl=e=>{if(!e||!e.uid)return"Anonymous";const t=e.uid,n=["Quick","Smart","Bright","Cool","Fast","Sharp","Bold","Swift"],r=["Fox","Wolf","Eagle","Lion","Tiger","Hawk","Bear","Shark"];let o=0;for(let s=0;s<t.length;s++)o=(o<<5)-o+t.charCodeAt(s)&4294967295;const i=Math.abs(o)%n.length,a=Math.abs(o>>8)%r.length;return`${n[i]} ${r[a]}`},bl="journey_maps",yl="journey_map_versions",xl="job_performers",wl=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{console.log("\ud83d\udd04 journeyService: Creating version history"),console.log("\ud83d\udd04 journeyService: journeyMapId for version:",e,"type:",typeof e);const i=parseInt(e,10);if(isNaN(i))return void console.warn("\u26a0\ufe0f journeyService: Invalid journeyMapId for version history, skipping:",e);const a={journey_map_id:i,change_type:t,change_details:n,previous_data:r,new_data:o,timestamp:(new Date).toISOString()};console.log("\ud83d\udd04 journeyService: Version entry:",JSON.stringify(a,null,2));const{error:s}=await ml.from(yl).insert([a]);s?(console.error("\u274c journeyService: Error creating version history:",s),console.error("\u274c journeyService: Version history error details:",JSON.stringify(s,null,2))):console.log("\u2705 journeyService: Version history created successfully")}catch(i){console.error("\u274c journeyService: Exception in createVersionHistory:",i),console.error("\u274c journeyService: Exception details:",JSON.stringify(i,null,2))}},kl=e=>{const t=async()=>{const{data:t,error:n}=await ml.from(bl).select("*").order("last_modified",{ascending:!1});n?console.error("Error fetching journey maps:",n):e(t||[])};t();const n=ml.channel("journey_maps_changes").on("postgres_changes",{event:"*",schema:"public",table:bl},()=>{t()}).subscribe();return()=>{n.unsubscribe()}},jl=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Stages updated";try{if(console.log("\ud83d\udd04 journeyService: updateJourneyMapStages called"),console.log("\ud83d\udd04 journeyService: journeyMapId:",e,"type:",typeof e),console.log("\ud83d\udd04 journeyService: stages:",JSON.stringify(t,null,2)),!e||"string"!==typeof e&&"number"!==typeof e)throw new Error(`Invalid journeyMapId: ${e} (type: ${typeof e})`);const r=t.map(e=>({...e,id:String(e.id),tasks:e.tasks.map(e=>({...e,id:String(e.id),jobPerformerIds:Array.isArray(e.jobPerformerIds)?e.jobPerformerIds:[],steps:e.steps.map(e=>({...e,id:String(e.id),personaId:e.personaId?String(e.personaId):null,jobPerformerIds:Array.isArray(e.jobPerformerIds)?e.jobPerformerIds:[],painPoints:Array.isArray(e.painPoints)?e.painPoints:[],opportunities:Array.isArray(e.opportunities)?e.opportunities:[],currentExperiences:Array.isArray(e.currentExperiences)?e.currentExperiences:[],insights:e.insights||""}))}))}));console.log("\ud83d\udd04 journeyService: sanitizedStages:",JSON.stringify(r,null,2));const o=await Sl(e),{error:i}=await ml.from(bl).update({stages:r,last_modified:(new Date).toISOString()}).eq("id",e);if(i)throw console.error("\u274c journeyService: Supabase error:",i),i;console.log("\u2705 journeyService: Stages updated successfully"),await wl(e,"stages_updated",n,null===o||void 0===o?void 0:o.stages,r)}catch(r){console.error("\u274c journeyService: Error updating journey map:",r),console.error("\u274c journeyService: Error details:",JSON.stringify(r,null,2));const e=new Error(r.message||r.error_description||r.hint||`Database error: ${JSON.stringify(r)}`);throw e.originalError=r,e}},Sl=async e=>{try{console.log("\ud83d\udd04 journeyService: getJourneyMap called with:",e,"type:",typeof e);const t=parseInt(e,10);let n=e;isNaN(t)||t.toString()!==e.toString()?(console.log("\ud83d\udd04 journeyService: Using UUID string directly:",n),n=e):(n=t,console.log("\ud83d\udd04 journeyService: Using integer ID:",n));const{data:r,error:o}=await ml.from(bl).select("*").eq("id",n).single();if(o)throw console.error("\u274c journeyService: Database error:",o),o;return console.log("\u2705 journeyService: Retrieved journey map:",r),r}catch(t){throw console.error("Error getting journey map:",t),t}},Nl=async(e,t,n,r)=>{await wl(e,`stage_${t}`,r,null,n)},Cl=async(e,t,n,r)=>{await wl(e,`task_${t}`,r,null,n)},_l=async(e,t,n,r)=>{await wl(e,`step_${t}`,r,null,n)},El=async()=>{try{const e=gl(),{data:t,error:n}=await ml.from(xl).select("*").eq("user_id",e.uid).order("created_at",{ascending:!0});if(n)throw n;return t||[]}catch(e){throw console.error("Error fetching job performers:",e),e}},Pl=async e=>{try{const t=gl(),{data:n,error:r}=await ml.from(xl).insert([{...e,user_id:t.uid,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}]).select();if(r)throw r;return n[0]}catch(t){throw console.error("Error creating job performer:",t),t}},Il=async(e,t)=>{try{console.log("\ud83d\udd27 updateJobPerformer called with:",{id:e,jobPerformerData:t});const{data:n,error:r}=await ml.from(xl).update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select();if(console.log("\ud83d\udd27 updateJobPerformer result:",{data:n,error:r}),r)throw r;return n[0]}catch(n){throw console.error("Error updating job performer:",n),console.error("Error details:",JSON.stringify(n,null,2)),n}},Tl=async e=>{try{const t=gl(),{error:n}=await ml.from(xl).delete().eq("id",e).eq("user_id",t.uid);if(n)throw n}catch(t){throw console.error("Error deleting job performer:",t),t}},Dl=e=>{const t=gl();let n;try{n=ml.channel("job_performers_changes").on("postgres_changes",{event:"*",schema:"public",table:xl,filter:`user_id=eq.${t.uid}`},async()=>{try{const t=await El();e(t)}catch(t){console.error("Error in job performers subscription:",t),e([])}}).subscribe()}catch(r){console.error("Failed to set up job performers subscription:",r),n=null}return(async()=>{try{const t=await El();e(t)}catch(r){console.error("Error fetching job performers, using defaults:",r),e([])}})(),()=>{n&&n.unsubscribe()}},Ol=[{id:"customer",name:"Customer",description:"End users who interact with the product or service",color:"#3B82F6",resources:[],isDefault:!0},{id:"support-agent",name:"Support Agent",description:"Customer service representatives who help users",color:"#10B981",resources:[],isDefault:!0},{id:"product-manager",name:"Product Manager",description:"Team members responsible for product strategy and development",color:"#8B5CF6",resources:[],isDefault:!0},{id:"admin",name:"Admin User",description:"Administrative users with elevated permissions",color:"#EF4444",resources:[],isDefault:!0}],Al=e=>{if(e.hexColor&&e.hexColor.startsWith("#"))return console.log("\ud83c\udfa8 convertToPersonaFormat: Already converted, returning as-is:",e),e;const t=e.color,n=e.isDefault||!1;console.log("\ud83c\udfa8 convertToPersonaFormat INPUT (fresh conversion):",e),console.log("\ud83c\udfa8 convertToPersonaFormat EXTRACTED hexColor:",t);const r={id:e.id,name:e.name,description:e.description,color:"bg-gray-500",textColor:"text-white",borderColor:"border-gray-500",hexColor:t,resources:e.resources||[],isDefault:n};return console.log("\ud83c\udfa8 convertToPersonaFormat OUTPUT:",r),r},Ll=e=>Array.isArray(e)?e.map(e=>$l(e)).filter(e=>null!==e):[],Rl=e=>!Array.isArray(e)||e.length<=1?[]:e.slice(0,4).map(e=>e.hexColor||e.hex_color||e.color||"#6B7280"),Ml=async()=>{try{console.log("\ud83d\udd0d getAllJobPerformers: Fetching from database...");let e=await El();if(console.log("\ud83d\udd0d Database job performers:",e),e.length>0){const t=Ol.map(e=>e.id);e.some(e=>t.includes(e.id)&&!e.replaces_default_id)&&(console.log("\ud83d\udd27 Auto-cleaning duplicate job performers..."),await(async()=>{try{const e=await El(),t=Ol.map(e=>e.id),n=e.filter(e=>t.includes(e.id)&&!e.replaces_default_id);for(const r of n)await Il(r.id,{...r,replaces_default_id:r.id});console.log(`\u2705 Cleaned up ${n.length} duplicate job performers`)}catch(e){console.error("Error cleaning up duplicates:",e)}})(),e=await El())}if(!e||0===e.length){console.log("\ud83d\udd0d Database empty, returning defaults");const e=Ol.map(Al);return console.log("\ud83d\udd0d Final converted defaults:",e),e}const t=new Set;e.forEach(e=>{e.replaces_default_id&&t.add(e.replaces_default_id)});const n=[...e];Ol.forEach(e=>{t.has(e.id)||n.push(e)});const r=n.map(Al);return console.log("\ud83d\udd0d Final combined result (database + remaining defaults):",r),r}catch(e){return console.error("Error fetching job performers:",e),console.log("\ud83d\udd0d Error occurred, returning defaults as fallback"),Ol.map(Al)}};let Bl=[];const $l=e=>{if(console.log("\ud83d\udd0d getPersonaByIdSync called with id:",e),console.log("\ud83d\udd0d Current PERSONAS array:",Bl),!Bl||0===Bl.length)return console.log("\ud83d\udd0d PERSONAS array empty, returning null"),null;const t=Bl.find(t=>t.id==e)||Bl[0];return console.log("\ud83d\udd0d Found persona:",t),t},Ul=e=>{console.log("\ud83d\udd04 updatePersonasArray called with:",e),Bl.length=0,Bl.push(...e.map(Al)),console.log("\ud83d\udd04 PERSONAS array updated to:",Bl),"undefined"!==typeof window&&(window.PERSONAS=Bl)},Fl=e=>{if(!e)return{};const t=e.hexColor||e.hex_color||e.color;return console.log("\ud83c\udfa8 getJobPerformerStyles called with:",{jobPerformer:e.name,hexColor:t,hasHexColor:t&&t.startsWith("#"),isDefault:e.isDefault}),t&&t.startsWith("#")?(console.log("\ud83c\udfa8 Returning custom styles for hex color:",t),{backgroundColor:t,borderLeftColor:t,borderColor:t,color:"#ffffff"}):(console.log("\ud83c\udfa8 No valid hex color, returning empty styles"),{})};var zl=n(579);const Wl=e=>{let{isOpen:t,onClose:n,title:o,children:i,size:a="default"}=e;return(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&n()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,n]),t?(0,zl.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,zl.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,zl.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:n}),(0,zl.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"\u200b"}),(0,zl.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:w-full sm:p-6 "+("large"===a?"sm:max-w-4xl":"sm:max-w-lg"),children:[(0,zl.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:o}),(0,zl.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,zl.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i]})]})}):null},Hl=e=>{let{isOpen:t,onClose:n,step:o,onUpdate:i,jobPerformers:a}=e;const[s,l]=(0,r.useState)(""),[c,u]=(0,r.useState)([]),[d,p]=(0,r.useState)(""),[f,h]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[v,b]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(o&&t){l(o.description||"");const e=a||Bl||[];o.jobPerformerIds&&Array.isArray(o.jobPerformerIds)?u(o.jobPerformerIds):o.personaId?u([o.personaId]):u(e.length>0?[e[0].id]:["customer"]),p(o.painPoints?o.painPoints.join(". "):""),h(o.opportunities?o.opportunities.join(". "):""),g(o.insights||"")}},[o,t,a]),(0,r.useEffect)(()=>{const e=()=>{b(e=>e+1)};return window.addEventListener("jobPerformersUpdated",e),()=>{window.removeEventListener("jobPerformersUpdated",e)}},[]);return(0,zl.jsx)(Wl,{isOpen:t,onClose:n,title:"Edit Step",children:(0,zl.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),s.trim()){const e={description:s.trim(),jobPerformerIds:c,personaId:c.length>0?c[0]:null,painPoints:d.split(".").map(e=>e.trim()).filter(e=>e),opportunities:f.split(".").map(e=>e.trim()).filter(e=>e),insights:m.trim()};i(e),n()}},className:"space-y-4",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{htmlFor:"editDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Description *"}),(0,zl.jsx)("textarea",{id:"editDescription",value:s,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Describe what happens in this step...",autoFocus:!0})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Performers"}),(0,zl.jsxs)("div",{className:"space-y-2",children:[c.map((e,t)=>(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("select",{value:e,onChange:e=>{const n=[...c];n[t]=e.target.value,u(n)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:(a||Bl||[]).map(e=>(0,zl.jsx)("option",{value:e.id,children:e.name},e.id))}),c.length>1&&(0,zl.jsx)("button",{type:"button",onClick:()=>{u(c.filter((e,n)=>n!==t))},className:"px-2 py-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Remove job performer",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)),(0,zl.jsx)("button",{type:"button",onClick:()=>{const e=(a||Bl||[]).filter(e=>!c.includes(e.id));e.length>0&&u([...c,e[0].id])},className:"w-full py-2 px-4 border-2 border-dashed border-blue-300 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors",disabled:c.length>=(a||Bl||[]).length,children:"+ Add Job Performer"})]}),c.length>0&&(0,zl.jsx)("div",{className:"flex items-center gap-2 mt-3 flex-wrap",children:Ll(c).map(e=>(0,zl.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zl.jsx)("div",{className:`w-3 h-3 rounded-full ${Fl(e).backgroundColor?"":e.color}`,style:Fl(e).backgroundColor?{backgroundColor:Fl(e).backgroundColor}:{}}),(0,zl.jsx)("span",{className:"text-sm text-gray-600",children:e.name})]},e.id))})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{htmlFor:"editPainPoints",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pain Points"}),(0,zl.jsx)("textarea",{id:"editPainPoints",value:d,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"2",placeholder:"Enter pain points separated by periods..."}),(0,zl.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple pain points with periods"})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{htmlFor:"editOpportunities",className:"block text-sm font-medium text-gray-700 mb-1",children:"Highlights"}),(0,zl.jsx)("textarea",{id:"editOpportunities",value:f,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"2",placeholder:"Enter highlights separated by periods..."}),(0,zl.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple highlights with periods"})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{htmlFor:"editInsights",className:"block text-sm font-medium text-gray-700 mb-1",children:"Lessons Learned"}),(0,zl.jsx)("textarea",{id:"editInsights",value:m,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Enter lessons learned, key takeaways, or additional context..."}),(0,zl.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Add key takeaways, lessons learned, or contextual information"})]}),(0,zl.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,zl.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),(0,zl.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Update Step"})]})]})})},Vl=e=>{let{step:t,index:n,stageId:o,taskId:i,stageName:a,taskName:s,currentView:l,onUpdateStep:c,onDeleteStep:u,onOpenStepDetail:d,isHighlighted:p}=e;const[f,h]=(0,r.useState)(!1);let m=[];if(null!==t&&void 0!==t&&t.jobPerformerIds&&Array.isArray(t.jobPerformerIds))m=Ll(t.jobPerformerIds);else if(null!==t&&void 0!==t&&t.personaId){const e=$l(t.personaId);m=e?[e]:[]}const g=m[0]||null,v=Fl(g),b=Rl(m);console.log("\ud83c\udfa8 StepCard Debug:",{stepId:null===t||void 0===t?void 0:t.id,assignedJobPerformers:m,performerColors:b,hasMultiple:m.length>1});const y=p?"ring-4 ring-yellow-300 ring-opacity-75 shadow-lg transform scale-105":"",x=(0,zl.jsx)("div",{className:`bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-all cursor-pointer h-full flex flex-col relative ${y} ${b.length<=1?"":"step-multi-performer"} ${0!==b.length||g?0===b.length&&g?`border-l-4 ${g.color} ${g.borderColor}`:1===b.length?"border-l-4":"":"border-l-4 border-gray-300"}`,style:{...b.length>0?0===b.length?{}:1===b.length?{borderLeftColor:b[0],borderLeftWidth:"4px"}:{}:v.borderLeftColor?{borderLeftColor:v.borderLeftColor}:{},...(()=>{if(b.length<=1)return{};const e=[],t=100/b.length;return b.forEach((n,r)=>{const o=r*t,i=(r+1)*t;e.push(`${n} ${o}%, ${n} ${i}%`)}),{"--performer-stripes":`linear-gradient(to bottom, ${e.join(", ")})`}})()},onClick:()=>{d?d(t,o,i,a,s):h(!0)},children:(0,zl.jsxs)("div",{className:"flex items-start justify-between h-full",children:[(0,zl.jsxs)("div",{className:"flex-1 flex flex-col h-full",children:[(0,zl.jsx)("p",{className:"text-gray-800 font-medium mb-2",children:t.description||"No description"}),(0,zl.jsxs)("div",{className:"flex-1 space-y-2",children:[t.painPoints&&t.painPoints.length>0&&(0,zl.jsxs)("div",{children:[(0,zl.jsx)("p",{className:"text-xs font-semibold text-red-600 mb-1",children:"Pain Points:"}),(0,zl.jsx)("div",{className:"flex flex-wrap gap-1",children:t.painPoints.map((e,t)=>(0,zl.jsx)("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:e.trim()},t))})]}),t.opportunities&&t.opportunities.length>0&&(0,zl.jsxs)("div",{children:[(0,zl.jsx)("p",{className:"text-xs font-semibold text-green-600 mb-1",children:"Highlights:"}),(0,zl.jsx)("div",{className:"flex flex-wrap gap-1",children:t.opportunities.map((e,t)=>(0,zl.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:e.trim()},t))})]})]}),"step"===l&&m.length>0&&(0,zl.jsxs)("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:[m.slice(0,2).map((e,t)=>(0,zl.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded text-white",style:{backgroundColor:e.hexColor||e.color||"#6B7280",fontSize:"0.65rem"},children:e.name},e.id)),m.length>2&&(0,zl.jsxs)("span",{className:"text-xs px-1.5 py-0.5 rounded bg-gray-200 text-gray-700",style:{fontSize:"0.65rem"},children:["+",m.length-2]})]})]}),(0,zl.jsx)("div",{className:"flex items-center gap-1 ml-2",children:(0,zl.jsx)("button",{onClick:e=>{e.stopPropagation(),window.confirm("Are you sure you want to delete this step?")&&u(o,i,t.id)},className:"text-gray-400 hover:text-red-500 p-1 rounded transition-colors",title:"Delete step",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})});return(0,zl.jsxs)(zl.Fragment,{children:[(0,zl.jsx)("div",{children:x}),(0,zl.jsx)(Hl,{isOpen:f,onClose:()=>h(!1),step:t,onUpdate:e=>c(o,i,t.id,e),jobPerformers:Bl})]})},Gl=e=>{let{isOpen:t,onClose:n,task:o,onUpdate:i,jobPerformers:a=[]}=e;const[s,l]=(0,r.useState)(""),[c,u]=(0,r.useState)([]);(0,r.useEffect)(()=>{o&&t&&(l(o.name||""),u(o.jobPerformerIds||[]))},[o,t]);return(0,zl.jsx)(Wl,{isOpen:t,onClose:n,title:"Edit Task",children:(0,zl.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.trim()&&(i({name:s.trim(),jobPerformerIds:c}),n())},className:"space-y-4",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{htmlFor:"editTaskName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Name *"}),(0,zl.jsx)("input",{type:"text",id:"editTaskName",value:s,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Research, Compare, Decide",autoFocus:!0})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Job Performers"}),(0,zl.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-3",children:a.length>0?a.map(e=>(0,zl.jsxs)("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,zl.jsx)("input",{type:"checkbox",checked:c.includes(e.id),onChange:()=>{return t=e.id,void u(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,zl.jsx)("div",{className:"w-4 h-4 rounded-full border-2 border-gray-300 flex-shrink-0",style:{backgroundColor:e.hexColor||e.color||"#3B82F6"}}),(0,zl.jsx)("span",{className:"text-sm text-gray-700 flex-1",children:e.name})]},e.id)):(0,zl.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No job performers available"})}),c.length>0&&(0,zl.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[c.length," job performer",c.length>1?"s":""," selected"]})]}),(0,zl.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,zl.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),(0,zl.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Update Task"})]})]})})},ql=e=>{let{title:t,onSave:n,className:o="",disabled:i=!1}=e;const[a,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(t),[u,d]=(0,r.useState)(!1),p=(0,r.useRef)(null);(0,r.useEffect)(()=>{c(t)},[t]),(0,r.useEffect)(()=>{a&&p.current&&(p.current.focus(),p.current.select())},[a]);const f=async()=>{if(l.trim()&&l.trim()!==t){d(!0);try{await n(l.trim())}catch(e){console.error("Error saving title:",e),c(t)}finally{d(!1)}}s(!1)},h=e=>{"Enter"===e.key?f():"Escape"===e.key&&(c(t),s(!1))};return i?(0,zl.jsx)("span",{className:o,children:t}):a?(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("input",{ref:p,type:"text",value:l,onChange:e=>c(e.target.value),onBlur:f,onKeyDown:h,className:`${o} bg-transparent border-b-2 border-blue-500 focus:outline-none min-w-0 flex-1`,maxLength:100,disabled:u}),u&&(0,zl.jsx)("div",{className:"w-4 h-4 animate-spin border-2 border-blue-600 border-t-transparent rounded-full"})]}):(0,zl.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,zl.jsx)("span",{className:o,children:t}),(0,zl.jsx)("button",{onClick:e=>{e.stopPropagation(),s(!0)},className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-gray-600 transition-opacity",title:"Edit name",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})},Jl=e=>{var t;let{task:n,stageId:o,stageName:i,currentView:a,onUpdateTask:s,onDeleteTask:l,onAddStep:c,onUpdateStep:u,onDeleteStep:d,onSwitchToStepView:p,onOpenStepDetail:f,onOpenAddStepPanel:h,jobPerformers:m=[]}=e;const[g,v]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),x=Ll(n.jobPerformerIds||[]),w=Rl(x);return(0,zl.jsxs)("div",{className:"bg-white rounded-lg p-4 border-2 border-gray-100 shadow-sm h-full flex flex-col relative "+(w.length<=1?"":"task-multi-performer"),style:{...0===w.length?{}:1===w.length?{borderLeftColor:w[0],borderLeftWidth:"4px"}:{},...(()=>{if(w.length<=1)return{};const e=[],t=100/w.length;return w.forEach((n,r)=>{const o=r*t,i=(r+1)*t;e.push(`${n} ${o}%, ${n} ${i}%`)}),{"--performer-stripes":`linear-gradient(to bottom, ${e.join(", ")})`}})()},children:[(0,zl.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zl.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,zl.jsx)(ql,{title:"string"===typeof n.name?n.name:(null===(t=n.name)||void 0===t?void 0:t.name)||"Unnamed Task",onSave:e=>s(o,n.id,{name:e}),className:"text-md font-semibold text-gray-700"}),x.length>0&&(0,zl.jsxs)("div",{className:"flex items-center gap-1",children:[x.slice(0,3).map((e,t)=>(0,zl.jsx)("div",{className:"w-3 h-3 rounded-full border border-gray-200",style:{backgroundColor:e.hexColor||e.color||"#6B7280",zIndex:x.length-t},title:e.name},e.id)),x.length>3&&(0,zl.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["+",x.length-3]})]})]}),(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:["step"===a&&(0,zl.jsx)("button",{onClick:()=>{var e;return h(o,n.id,i,"string"===typeof n.name?n.name:(null===(e=n.name)||void 0===e?void 0:e.name)||"Unnamed Task")},className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md transition-colors",title:"Add new step",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,zl.jsx)("button",{onClick:()=>{var e;const t="string"===typeof n.name?n.name:(null===(e=n.name)||void 0===e?void 0:e.name)||"this task";window.confirm(`Are you sure you want to delete the "${t}" task? This will also delete all associated steps.`)&&l(o,n.id)},className:"text-red-400 hover:text-red-600 p-1 rounded transition-colors",title:"Delete task",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),(0,zl.jsx)("div",{className:"flex-1",children:(0,zl.jsxs)("div",{className:"grid gap-3 h-full "+(n.steps.length>0?"grid-rows-[repeat(auto-fit,1fr)]":""),style:{gridTemplateRows:n.steps.length>0?`repeat(${n.steps.length}, 1fr)`:"auto"},children:[n.steps.map((e,t)=>{var r;return(0,zl.jsx)(Vl,{step:e,index:t,stageId:o,taskId:n.id,stageName:"string"===typeof i?i:(null===i||void 0===i?void 0:i.name)||"Unnamed Stage",taskName:"string"===typeof n.name?n.name:(null===(r=n.name)||void 0===r?void 0:r.name)||"Unnamed Task",currentView:a,onUpdateStep:u,onDeleteStep:d,onOpenStepDetail:f,isHighlighted:b===e.id},e.id)}),0===n.steps.length&&(0,zl.jsxs)("div",{className:"text-center py-6 text-gray-400",children:[(0,zl.jsx)("svg",{className:"w-10 h-10 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 0 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,zl.jsx)("p",{className:"text-xs",children:"No steps yet"})]})]})}),(0,zl.jsx)(Gl,{isOpen:g,onClose:()=>v(!1),task:n,onUpdate:e=>s(o,n.id,e),jobPerformers:m})]})},Kl=e=>{let{isOpen:t,onClose:n,onAdd:o,jobPerformers:i=[]}=e;const[a,s]=(0,r.useState)(""),[l,c]=(0,r.useState)([]),u=()=>{s(""),c([]),n()};return(0,zl.jsx)(Wl,{isOpen:t,onClose:u,title:"Add New Task",children:(0,zl.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&(o({name:a.trim(),jobPerformerIds:l}),s(""),c([]),n())},className:"space-y-4",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{htmlFor:"taskName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Name *"}),(0,zl.jsx)("input",{type:"text",id:"taskName",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Research, Compare, Decide",autoFocus:!0})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Job Performers"}),(0,zl.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-3",children:i.length>0?i.map(e=>(0,zl.jsxs)("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,zl.jsx)("input",{type:"checkbox",checked:l.includes(e.id),onChange:()=>{return t=e.id,void c(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,zl.jsx)("div",{className:"w-4 h-4 rounded-full border-2 border-gray-300 flex-shrink-0",style:{backgroundColor:e.hexColor||e.color||"#3B82F6"}}),(0,zl.jsx)("span",{className:"text-sm text-gray-700 flex-1",children:e.name})]},e.id)):(0,zl.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No job performers available"})}),l.length>0&&(0,zl.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[l.length," job performer",l.length>1?"s":""," selected"]})]}),(0,zl.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,zl.jsx)("button",{type:"button",onClick:u,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),(0,zl.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Add Task"})]})]})})},Ql=e=>{let{isOpen:t,onClose:n,stage:o,onUpdate:i}=e;const[a,s]=(0,r.useState)("");(0,r.useEffect)(()=>{o&&t&&s(o.name||"")},[o,t]);return(0,zl.jsx)(Wl,{isOpen:t,onClose:n,title:"Edit Stage",children:(0,zl.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&(i(o.id,a.trim()),n())},className:"space-y-4",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{htmlFor:"editStageName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stage Name *"}),(0,zl.jsx)("input",{type:"text",id:"editStageName",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Awareness, Consideration, Purchase",autoFocus:!0})]}),(0,zl.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,zl.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),(0,zl.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Update Stage"})]})]})})},Yl=e=>{var t;let{stage:n,currentView:o,onUpdateStage:i,onDeleteStage:a,onAddTask:s,onUpdateTask:l,onDeleteTask:c,onAddStep:u,onUpdateStep:d,onDeleteStep:p,onSwitchToStepView:f,onOpenStepDetail:h,onOpenAddStepPanel:m,jobPerformers:g=[]}=e;const[v,b]=(0,r.useState)(!1),[y,x]=(0,r.useState)(!1);return(0,zl.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border-2 border-gray-200",children:[(0,zl.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,zl.jsx)(ql,{title:"string"===typeof n.name?n.name:(null===(t=n.name)||void 0===t?void 0:t.name)||"Unnamed Stage",onSave:e=>i(n.id,{name:e}),className:"text-lg font-semibold text-gray-800"}),(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("button",{onClick:()=>b(!0),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md transition-colors",title:"Add new task",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,zl.jsx)("button",{onClick:()=>{var e;const t="string"===typeof n.name?n.name:(null===(e=n.name)||void 0===e?void 0:e.name)||"this stage";window.confirm(`Are you sure you want to delete the "${t}" stage? This will also delete all associated tasks and steps.`)&&a(n.id)},className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Delete stage",children:(0,zl.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),(0,zl.jsxs)("div",{className:"grid grid-flow-col auto-cols-fr gap-4 overflow-x-auto pb-4",children:[n.tasks.map(e=>(0,zl.jsx)(Jl,{task:e,stageId:n.id,stageName:n.name,currentView:o,onUpdateTask:l,onDeleteTask:c,onAddStep:u,onUpdateStep:d,onDeleteStep:p,onSwitchToStepView:f,onOpenStepDetail:h,onOpenAddStepPanel:m,jobPerformers:g},e.id)),0===n.tasks.length&&(0,zl.jsxs)("div",{className:"flex-1 text-center py-8 text-gray-400",children:[(0,zl.jsx)("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,zl.jsx)("p",{className:"text-sm",children:"No tasks yet"})]})]}),(0,zl.jsx)(Kl,{isOpen:v,onClose:()=>b(!1),onAdd:e=>s(n.id,e),jobPerformers:g}),(0,zl.jsx)(Ql,{isOpen:y,onClose:()=>x(!1),stage:n,onUpdate:i})]})},Xl="user_journey",Zl="jobs_to_be_done",ec={[Xl]:{name:"User Journey Map",stage:"Stage",stages:"Job Performers",task:"Task",tasks:"Tasks",step:"Step",steps:"Steps",description:"Create and visualize customer journey stages, tasks, and touchpoints",icon:"\ud83d\uddfa\ufe0f"},[Zl]:{name:"Jobs to be Done Map",stage:"Domain",stages:"Domains",task:"Macro Job",tasks:"Macro Jobs",step:"Micro Job",steps:"Micro Jobs",description:"Map customer jobs, outcomes, and pain points using Jobs-to-be-Done framework",icon:"\ud83c\udfaf"}},tc=e=>ec[e]||ec[Xl],nc=[{type:Xl,title:"User Journey Map",description:"Traditional customer journey mapping with stages, tasks, and steps",icon:"\ud83d\uddfa\ufe0f",defaultName:"My User Journey"},{type:Zl,title:"Jobs to be Done Map",description:"Map customer jobs using the Jobs-to-be-Done framework",icon:"\ud83c\udfaf",defaultName:"My Jobs Map"}],rc=e=>{let{isOpen:t,onClose:n,onAdd:o,journeyMapType:i}=e;const[a,s]=(0,r.useState)(""),l=()=>{s(""),n()},c=tc(i);return(0,zl.jsx)(Wl,{isOpen:t,onClose:l,title:`Add ${c.stage}`,children:(0,zl.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&(o(a.trim()),s(""),n())},className:"space-y-4",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsxs)("label",{htmlFor:"stageName",className:"block text-sm font-medium text-gray-700 mb-1",children:[c.stage," Name"]}),(0,zl.jsx)("input",{type:"text",id:"stageName",value:a,onChange:e=>s(e.target.value),placeholder:`Enter ${c.stage.toLowerCase()} name`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0,required:!0})]}),(0,zl.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,zl.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors",children:"Cancel"}),(0,zl.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:["Add ",c.stage]})]})]})})},oc=e=>{let{jobPerformers:t}=e;return(0,zl.jsx)("div",{className:"flex flex-wrap gap-4 items-center",children:t.map(e=>{const t=Fl(e);return(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("div",{className:`w-4 h-4 rounded-full ${t.backgroundColor?"":e.color}`,style:t.backgroundColor?{backgroundColor:t.backgroundColor}:{}}),(0,zl.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]},e.id)})})},ic=e=>{let{stages:t,onSwitchToStepView:n,onOpenStepDetail:o,onUpdateStep:i,onDeleteStep:a,onDeleteTask:s,onDeleteStage:l,onUpdateStage:c,onUpdateTask:u,onMoveStep:d,onOpenEditPanel:p,editPanel:f,editablePainPoints:h,editableOpportunities:m,editableCurrentExperiences:g,onCloseEditPanel:v,onAddPainPoint:b,onRemovePainPoint:y,onUpdatePainPoint:x,onAddOpportunity:w,onRemoveOpportunity:k,onUpdateOpportunity:j,onAddCurrentExperience:S,onRemoveCurrentExperience:N,onUpdateCurrentExperience:C,onSaveEditChanges:_,jobPerformers:E=[]}=e;const[P,I]=(0,r.useState)({stepId:null,painPointIndex:null,opportunityIndex:null,currentExperienceIndex:null,highlightAllRelated:!1}),[T,D]=(0,r.useState)([]),O=(0,r.useRef)({}),A=(0,r.useRef)(null),L=[],R=[],M=[];t.forEach((e,t)=>{if(e.tasks.length>0){var n;const t=L.length;let r=0;e.tasks.forEach((t,n)=>{const o=L.length;var i,a,s,l;0===t.steps.length?(L.push({id:`empty-${t.id}`,description:"",painPoints:[],opportunities:[],persona:null,stepId:`empty-${t.id}`,taskId:t.id,stageName:"string"===typeof e.name?e.name:(null===(i=e.name)||void 0===i?void 0:i.name)||"Unnamed Stage",taskName:"string"===typeof t.name?t.name:(null===(a=t.name)||void 0===a?void 0:a.name)||"Unnamed Task",isEmpty:!0}),r+=1,R.push({taskName:"string"===typeof t.name?t.name:(null===(s=t.name)||void 0===s?void 0:s.name)||"Unnamed Task",taskId:t.id,startIndex:o,span:1})):(t.steps.forEach((n,r)=>{var o,i;let a=[];if(n.jobPerformerIds&&Array.isArray(n.jobPerformerIds))a=Ll(n.jobPerformerIds);else if(n.personaId){const e=$l(n.personaId);a=e?[e]:[]}L.push({...n,persona:$l(n.personaId),assignedJobPerformers:a,performerColors:Rl(a),stepId:n.id,taskId:t.id,stageName:"string"===typeof e.name?e.name:(null===(o=e.name)||void 0===o?void 0:o.name)||"Unnamed Stage",taskName:"string"===typeof t.name?t.name:(null===(i=t.name)||void 0===i?void 0:i.name)||"Unnamed Task",isEmpty:!1})}),r+=t.steps.length,R.push({taskName:"string"===typeof t.name?t.name:(null===(l=t.name)||void 0===l?void 0:l.name)||"Unnamed Task",taskId:t.id,startIndex:o,span:t.steps.length}))}),M.push({stageName:"string"===typeof e.name?e.name:(null===(n=e.name)||void 0===n?void 0:n.name)||"Unnamed Stage",startIndex:t,span:r})}});const B=()=>{I({stepId:null,painPointIndex:null,opportunityIndex:null,currentExperienceIndex:null,highlightAllRelated:!1})},$=(e,t,n,r,o,i)=>{p(e,t,n,r,o,i)},U=e=>{let{children:t,onEdit:n,className:r,style:o,isHighlighted:i,highlightColor:a="blue",title:s,type:l="step"}=e;return(0,zl.jsx)("div",{className:`${r} cursor-pointer relative transition-all duration-200 ${i?{blue:"ring-4 ring-blue-400 ring-opacity-50 scale-105 shadow-lg bg-blue-200",red:"ring-4 ring-red-400 ring-opacity-50 scale-105 shadow-lg bg-red-200",green:"ring-4 ring-green-400 ring-opacity-50 scale-105 shadow-lg bg-green-200",indigo:"ring-4 ring-indigo-400 ring-opacity-50 scale-105 shadow-lg bg-indigo-200"}[a]:""}`,style:o,onClick:e=>{e.stopPropagation(),n()},title:s,children:t})};return(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&B()},t=e=>{A.current&&!A.current.contains(e.target)&&B()};return document.addEventListener("keydown",e),document.addEventListener("click",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("click",t)}},[]),(0,zl.jsx)(zl.Fragment,{children:(0,zl.jsxs)("div",{ref:A,className:"bg-white p-4 relative w-full min-h-full",onClick:e=>{e.target===e.currentTarget&&B()},children:[T.length>0&&(0,zl.jsx)("svg",{className:"absolute inset-0 pointer-events-none",style:{zIndex:10},children:T.map((e,t)=>(0,zl.jsx)("path",{d:e.path,stroke:e.color,strokeWidth:"2",fill:"none",strokeDasharray:"5,5",opacity:"0.8"},t))}),(0,zl.jsx)("table",{className:"w-max border-separate",style:{borderSpacing:"12px 16px"},children:(0,zl.jsxs)("tbody",{children:[(0,zl.jsxs)("tr",{children:[(0,zl.jsx)("td",{className:"w-32 bg-purple-50 py-4 px-4 rounded-lg",children:(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,zl.jsx)("span",{className:"font-semibold text-purple-800",children:"Stages"})]})}),M.map(e=>(0,zl.jsx)("td",{colSpan:e.span,className:"bg-purple-100 text-center rounded-lg",children:(0,zl.jsx)("div",{className:"py-4 px-4 text-center",children:(0,zl.jsx)(ql,{title:e.stageName,onSave:n=>{const r=t.find(t=>{var n;return("string"===typeof t.name?t.name:null===(n=t.name)||void 0===n?void 0:n.name)===e.stageName});r&&c&&c(r.id,{name:n})},className:"font-semibold text-purple-800 text-center"})})},`stage-${e.stageName}`))]}),(0,zl.jsxs)("tr",{children:[(0,zl.jsx)("td",{className:"w-32 bg-blue-50 py-4 px-4 rounded-lg",children:(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,zl.jsx)("span",{className:"font-semibold text-blue-800",children:"Tasks"})]})}),R.map(e=>(0,zl.jsx)("td",{colSpan:e.span,className:"w-64 text-center",children:(0,zl.jsx)("div",{className:"bg-blue-100 rounded-lg p-3 text-center",children:(0,zl.jsx)(ql,{title:e.taskName,onSave:n=>{const r=t.find(t=>t.tasks.some(t=>t.id===e.taskId));r&&u&&u(r.id,e.taskId,{name:n})},className:"font-semibold text-blue-800 break-words text-center"})})},`task-${e.taskId}`))]}),(0,zl.jsxs)("tr",{children:[(0,zl.jsx)("td",{className:"w-32 bg-indigo-50 py-4 px-4 rounded-lg",children:(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,zl.jsx)("span",{className:"font-semibold text-indigo-800",children:"Steps"})]})}),L.map((e,n)=>{const r=P.stepId===e.stepId,o=`step-${e.taskId}-${e.stepId}`,i=(()=>{let t="bg-indigo-100 rounded-lg p-2 hover:bg-indigo-200",n={},r="",o={};if(e.performerColors&&0!==e.performerColors.length)if(1===e.performerColors.length)t+=" border-l-4",n.borderLeftColor=e.performerColors[0],n.borderLeftWidth="4px";else{r="step-multi-performer";const t=[],n=100/e.performerColors.length;e.performerColors.forEach((e,r)=>{const o=r*n,i=(r+1)*n;t.push(`${e} ${o}%, ${e} ${i}%`)}),o["--performer-stripes"]=`linear-gradient(to bottom, ${t.join(", ")})`}else t+=" border-l-4 border-indigo-300";return{className:t,style:n,wrapperClass:r,wrapperStyle:o}})();return(0,zl.jsx)("td",{className:"w-64 align-top",children:!e.isEmpty&&(0,zl.jsx)("div",{ref:e=>O.current[o]=e,className:`relative ${i.wrapperClass}`,style:i.wrapperStyle,children:(0,zl.jsx)(U,{className:i.className,style:i.style,onEdit:()=>{const n=t.find(t=>t.tasks.some(t=>t.id===e.taskId)),r=null===n||void 0===n?void 0:n.tasks.find(t=>t.id===e.taskId);if(n&&r){var o,i;const t="string"===typeof n.name?n.name:(null===(o=n.name)||void 0===o?void 0:o.name)||"Unnamed Stage",a="string"===typeof r.name?r.name:(null===(i=r.name)||void 0===i?void 0:i.name)||"Unnamed Task";$(e,"step",n.id,t,r.id,a)}},isHighlighted:r,highlightColor:"indigo",title:"Click to edit step details",type:"step",children:(0,zl.jsx)("div",{className:"flex items-start justify-between",children:(0,zl.jsxs)("div",{className:"flex-1",children:[(0,zl.jsx)("p",{className:"text-indigo-800 font-medium text-sm",children:e.description||"No description"}),e.assignedJobPerformers&&e.assignedJobPerformers.length>0&&(0,zl.jsxs)("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:[e.assignedJobPerformers.slice(0,2).map((e,t)=>(0,zl.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded text-white",style:{backgroundColor:e.hexColor||e.color||"#6B7280",fontSize:"0.6rem"},children:e.name},e.id)),e.assignedJobPerformers.length>2&&(0,zl.jsxs)("span",{className:"text-xs px-1.5 py-0.5 rounded bg-gray-200 text-gray-700",style:{fontSize:"0.6rem"},children:["+",e.assignedJobPerformers.length-2]})]})]})})})})},`step-${e.stepId||e.id}`)})]}),(0,zl.jsxs)("tr",{children:[(0,zl.jsx)("td",{className:"w-32 bg-orange-50 py-4 px-4 rounded-lg",children:(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,zl.jsx)("span",{className:"font-semibold text-orange-800",children:"Current Experience"})]})}),L.map((e,n)=>(0,zl.jsx)("td",{className:"w-64 align-top",children:(0,zl.jsx)("div",{className:"space-y-2",children:!e.isEmpty&&(e.currentExperiences&&e.currentExperiences.length>0?e.currentExperiences.map((n,r)=>{const o=P.stepId===e.stepId&&(P.currentExperienceIndex===r||P.highlightAllRelated),i=`currentexperience-${e.taskId}-${e.stepId}-${r}`;return(0,zl.jsx)("div",{ref:e=>O.current[i]=e,children:(0,zl.jsx)(U,{className:"bg-orange-100 rounded-lg p-2 hover:bg-orange-200",onEdit:()=>{const r=t.find(t=>t.tasks.some(t=>t.id===e.taskId)),o=null===r||void 0===r?void 0:r.tasks.find(t=>t.id===e.taskId);if(r&&o){var i,a;const t="string"===typeof r.name?r.name:(null===(i=r.name)||void 0===i?void 0:i.name)||"Unnamed Stage",s="string"===typeof o.name?o.name:(null===(a=o.name)||void 0===a?void 0:a.name)||"Unnamed Task",l={text:n,stepDescription:e.description,persona:e.persona,stepId:e.stepId,taskId:e.taskId,stageName:t,taskName:s};$(l,"currentexperience",r.id,t,o.id,s)}},isHighlighted:o,highlightColor:"orange",title:"Click to edit current experience details",type:"current experience",children:(0,zl.jsx)("p",{className:"text-orange-800 font-medium text-sm",children:n})})},`${e.stepId}-${r}`)}):null)})},`current-${e.stepId||e.id}`))]}),(0,zl.jsxs)("tr",{children:[(0,zl.jsx)("td",{className:"w-32 bg-red-50 py-4 px-4 rounded-lg",children:(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,zl.jsx)("span",{className:"font-semibold text-red-800",children:"Pain Points"})]})}),L.map((e,n)=>(0,zl.jsx)("td",{className:"w-64 align-top",children:(0,zl.jsx)("div",{className:"space-y-2",children:!e.isEmpty&&(e.painPoints&&e.painPoints.length>0?e.painPoints.map((n,r)=>{const o=P.stepId===e.stepId&&(P.painPointIndex===r||P.highlightAllRelated),i=`painpoint-${e.taskId}-${e.stepId}-${r}`;return(0,zl.jsx)("div",{ref:e=>O.current[i]=e,children:(0,zl.jsx)(U,{className:"bg-red-100 rounded-lg p-2 hover:bg-red-200",onEdit:()=>{const r=t.find(t=>t.tasks.some(t=>t.id===e.taskId)),o=null===r||void 0===r?void 0:r.tasks.find(t=>t.id===e.taskId);if(r&&o){var i,a;const t="string"===typeof r.name?r.name:(null===(i=r.name)||void 0===i?void 0:i.name)||"Unnamed Stage",s="string"===typeof o.name?o.name:(null===(a=o.name)||void 0===a?void 0:a.name)||"Unnamed Task",l={text:n,stepDescription:e.description,persona:e.persona,stepId:e.stepId,taskId:e.taskId,stageName:t,taskName:s};$(l,"painpoint",r.id,t,o.id,s)}},isHighlighted:o,highlightColor:"red",title:"Click to edit pain point details",type:"pain point",children:(0,zl.jsx)("p",{className:"text-red-800 font-medium text-sm",children:n})})},`${e.stepId}-${r}`)}):null)})},`pain-${e.stepId||e.id}`))]}),(0,zl.jsxs)("tr",{children:[(0,zl.jsx)("td",{className:"w-32 bg-green-50 py-4 px-4 rounded-lg",children:(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),(0,zl.jsx)("span",{className:"font-semibold text-green-800",children:"Highlights"})]})}),L.map((e,n)=>(0,zl.jsx)("td",{className:"w-64 align-top",children:(0,zl.jsx)("div",{className:"space-y-2",children:!e.isEmpty&&(e.opportunities&&e.opportunities.length>0?e.opportunities.map((n,r)=>{const o=P.stepId===e.stepId&&(P.opportunityIndex===r||P.highlightAllRelated),i=`opportunity-${e.taskId}-${e.stepId}-${r}`;return(0,zl.jsx)("div",{ref:e=>O.current[i]=e,children:(0,zl.jsx)(U,{className:"bg-green-100 rounded-lg p-2 hover:bg-green-200",onEdit:()=>{const r=t.find(t=>t.tasks.some(t=>t.id===e.taskId)),o=null===r||void 0===r?void 0:r.tasks.find(t=>t.id===e.taskId);if(r&&o){var i,a;const t="string"===typeof r.name?r.name:(null===(i=r.name)||void 0===i?void 0:i.name)||"Unnamed Stage",s="string"===typeof o.name?o.name:(null===(a=o.name)||void 0===a?void 0:a.name)||"Unnamed Task",l={text:n,stepDescription:e.description,persona:e.persona,stepId:e.stepId,taskId:e.taskId,stageName:t,taskName:s};$(l,"opportunity",r.id,t,o.id,s)}},isHighlighted:o,highlightColor:"green",title:"Click to edit highlight details",type:"opportunity",children:(0,zl.jsx)("p",{className:"text-green-800 font-medium text-sm",children:n})})},`${e.stepId}-${r}`)}):null)})},`opp-${e.stepId||e.id}`))]}),(0,zl.jsxs)("tr",{children:[(0,zl.jsx)("td",{className:"w-32 bg-purple-50 py-4 px-4 rounded-lg",children:(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),(0,zl.jsx)("span",{className:"font-semibold text-purple-800",children:"Lessons Learned"})]})}),L.map((e,n)=>(0,zl.jsx)("td",{className:"w-64 align-top",children:(0,zl.jsx)("div",{className:"space-y-2",children:!e.isEmpty&&(e.insights&&e.insights.trim()?(0,zl.jsx)("div",{children:(0,zl.jsx)(U,{className:"bg-purple-100 rounded-lg p-2 hover:bg-purple-200",onEdit:()=>{const n=t.find(t=>t.tasks.some(t=>t.id===e.taskId)),r=null===n||void 0===n?void 0:n.tasks.find(t=>t.id===e.taskId);if(n&&r){var o,i;const t="string"===typeof n.name?n.name:(null===(o=n.name)||void 0===o?void 0:o.name)||"Unnamed Stage",a="string"===typeof r.name?r.name:(null===(i=r.name)||void 0===i?void 0:i.name)||"Unnamed Task",s={text:e.insights,stepDescription:e.description,persona:e.persona,stepId:e.stepId,taskId:e.taskId,stageName:t,taskName:a};$(s,"insight",n.id,t,r.id,a)}},isHighlighted:!1,highlightColor:"purple",title:"Click to edit lessons learned details",type:"customer insight",children:(0,zl.jsx)("p",{className:"text-purple-800 font-medium text-sm",children:e.insights})})}):null)})},`insights-${e.stepId||e.id}`))]})]})})]})})},ac=e=>{let{isOpen:t,onClose:n,stages:o,onImportData:i,journeyMapName:a}=e;const[s,l]=(0,r.useState)("export"),[c,u]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),h=(0,r.useRef)(null),m=e=>{const t=JSON.parse(e);if(!t.journeyMap||!t.journeyMap.stages)throw new Error("Invalid file format. Expected a journey map export file.");const r=t.journeyMap.stages;if(!Array.isArray(r))throw new Error("Invalid stages data format.");for(const n of r){if(!n.id||!n.name||!Array.isArray(n.tasks))throw new Error("Invalid stage structure found in file.");for(const e of n.tasks)if(!e.id||!e.name||!Array.isArray(e.steps))throw new Error("Invalid task structure found in file.")}const o=t.journeyMapName||"Imported Journey Map";f(`Successfully loaded "${o}" with ${r.length} stages and ${r.reduce((e,t)=>e+t.tasks.length,0)} tasks.`),setTimeout(()=>{i(r),n()},1e3)},g=e=>{const t=e.split("\n").filter(e=>e.trim());if(t.length<2)throw new Error("CSV file appears to be empty or has no data rows.");const r=t[0].split(",").map(e=>e.trim().replace(/"/g,"")),o=r.findIndex(e=>e.toLowerCase().includes("stage")),a=r.findIndex(e=>e.toLowerCase().includes("task")),s=r.findIndex(e=>e.toLowerCase().includes("step")||e.toLowerCase().includes("description")),l=r.findIndex(e=>e.toLowerCase().includes("persona")),c=r.findIndex(e=>e.toLowerCase().includes("pain")),u=r.findIndex(e=>e.toLowerCase().includes("opportunity"));if(-1===o||-1===a||-1===s)throw new Error("CSV must contain columns for Stage, Task, and Step/Description. Current headers: "+r.join(", "));const p=new Map;for(let n=1;n<t.length;n++){const e=t[n].split(",").map(e=>e.trim().replace(/"/g,""));if(e.length<Math.max(o,a,s)+1)continue;const r=e[o],i=e[a],f=e[s],h=l>=0?e[l]:"",m=c>=0?e[c]:"",g=u>=0?e[u]:"";if(!r||!i||!f)continue;p.has(r)||p.set(r,{id:d(),name:r,tasks:[]});const v=p.get(r);let b=v.tasks.find(e=>e.name===i);b||(b={id:d(),name:i,steps:[]},v.tasks.push(b));const y={id:d(),description:f,personas:h?[h]:[],painPoints:m?m.split(";").filter(e=>e.trim()):[],opportunities:g?g.split(";").filter(e=>e.trim()):[]};b.steps.push(y)}const h=Array.from(p.values());if(0===h.length)throw new Error("No valid data found in CSV file.");const m=h.reduce((e,t)=>e+t.tasks.length,0),g=h.reduce((e,t)=>e+t.tasks.reduce((e,t)=>e+t.steps.length,0),0);f(`Successfully imported ${h.length} stages, ${m} tasks, and ${g} steps from CSV.`),setTimeout(()=>{i(h),n()},1500)},v=()=>{u(""),f(""),h.current&&(h.current.value="")},b=e=>{l(e),v()},y=()=>{v(),l("export"),n()};return(0,zl.jsx)(Wl,{isOpen:t,onClose:y,title:"Import/Export Journey Map Data",children:(0,zl.jsxs)("div",{className:"space-y-6",children:[(0,zl.jsxs)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[(0,zl.jsx)("button",{onClick:()=>b("export"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("export"===s?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-900"),children:"Export Data"}),(0,zl.jsx)("button",{onClick:()=>b("import"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("import"===s?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-900"),children:"Import Data"})]}),"export"===s&&(0,zl.jsxs)("div",{className:"space-y-4",children:[(0,zl.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,zl.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:a||"Current Journey Map"}),(0,zl.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,zl.jsxs)("p",{children:["\u2022 ",o.length," stages"]}),(0,zl.jsxs)("p",{children:["\u2022 ",o.reduce((e,t)=>e+t.tasks.length,0)," tasks"]}),(0,zl.jsxs)("p",{children:["\u2022 ",o.reduce((e,t)=>e+t.tasks.reduce((e,t)=>e+t.steps.length,0),0)," steps"]})]})]}),(0,zl.jsx)("div",{className:"space-y-3",children:(0,zl.jsxs)("div",{children:[(0,zl.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Export Options"}),(0,zl.jsxs)("div",{className:"space-y-2",children:[(0,zl.jsxs)("button",{onClick:()=>{const e={version:"1.0",exportDate:(new Date).toISOString(),journeyMapName:a||"My Journey Map",journeyMap:{stages:o}},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r;const s=(a||"journey-map").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");i.download=`${s}-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export as JSON (Recommended)"]}),(0,zl.jsx)("p",{className:"text-xs text-gray-500 ml-2",children:"Full data export that can be imported back"})]}),(0,zl.jsxs)("div",{className:"space-y-2 mt-3",children:[(0,zl.jsxs)("button",{onClick:()=>{const e=[];e.push(["Stage","Task","Step Description","Persona","Pain Points","Highlights","Insights"]),o.forEach(t=>{t.tasks.forEach(n=>{0===n.steps.length?e.push([t.name,n.name,"","","","",""]):n.steps.forEach(r=>{const o=r.painPoints?r.painPoints.join("; "):"",i=r.opportunities?r.opportunities.join("; "):"";e.push([t.name,n.name,r.description||"",r.personaId||"",o,i,r.insights||""])})})});const t=e.map(e=>e.map(e=>`"${String(e).replace(/"/g,'""')}"`).join(",")).join("\n"),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r;const s=(a||"journey-map").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");i.download=`${s}-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export as CSV"]}),(0,zl.jsx)("p",{className:"text-xs text-gray-500 ml-2",children:"Spreadsheet format for analysis (read-only)"})]})]})})]}),"import"===s&&(0,zl.jsxs)("div",{className:"space-y-4",children:[(0,zl.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,zl.jsxs)("div",{className:"flex items-start gap-3",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 text-amber-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.684-.833-2.464 0L3.349 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("h4",{className:"font-medium text-amber-900 mb-1",children:"Import Warning"}),(0,zl.jsx)("p",{className:"text-sm text-amber-700",children:"Importing will replace ALL current journey map data. This action cannot be undone."})]})]})}),(0,zl.jsxs)("div",{className:"space-y-4",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Journey Map File"}),(0,zl.jsx)("input",{ref:h,type:"file",accept:".json,.csv",onChange:e=>{const t=e.target.files[0];if(!t)return;u(""),f("");const n=new FileReader;n.onload=e=>{try{const n=e.target.result;"csv"===t.name.toLowerCase().split(".").pop()?g(n):m(n)}catch(n){u(`Import failed: ${n.message}`)}},n.onerror=()=>{u("Failed to read file. Please try again.")},n.readAsText(t)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(0,zl.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Only JSON and CSV files are supported"})]}),(0,zl.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,zl.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"CSV Format Requirements"}),(0,zl.jsxs)("div",{className:"text-sm text-blue-700 space-y-2",children:[(0,zl.jsxs)("p",{children:[(0,zl.jsx)("strong",{children:"Required columns:"})," Stage, Task, Step (or Description)"]}),(0,zl.jsxs)("p",{children:[(0,zl.jsx)("strong",{children:"Optional columns:"})," Persona, Pain Points, Highlights"]}),(0,zl.jsxs)("p",{children:[(0,zl.jsx)("strong",{children:"Example header:"})," Stage,Task,Step,Persona,Pain Points,Highlights"]}),(0,zl.jsx)("p",{className:"text-xs",children:"\u2022 Use semicolons (;) to separate multiple pain points or highlights"}),(0,zl.jsx)("p",{className:"text-xs",children:"\u2022 Column names are case-insensitive and can contain partial matches"})]})]}),c&&(0,zl.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,zl.jsxs)("div",{className:"flex items-start gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,zl.jsx)("p",{className:"text-sm text-red-700",children:c})]})}),p&&(0,zl.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,zl.jsxs)("div",{className:"flex items-start gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 text-green-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,zl.jsx)("p",{className:"text-sm text-green-700",children:p})]})})]})]}),(0,zl.jsx)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:(0,zl.jsx)("button",{onClick:y,className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors",children:"Close"})})]})})},sc=e=>{let{zoom:t,zoomIn:n,zoomOut:r,resetZoom:o,fitToView:i,canZoomIn:a,canZoomOut:s,isDragging:l}=e;return(0,zl.jsxs)("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-30 flex items-center gap-3",children:[(0,zl.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 px-2 py-1 text-xs font-medium text-gray-700",children:[Math.round(100*t),"%"]}),(0,zl.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-1 flex items-center gap-1",children:[(0,zl.jsx)("button",{onClick:n,disabled:!a,className:"w-6 h-6 flex items-center justify-center rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Zoom In (Ctrl + Scroll)",children:(0,zl.jsx)("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,zl.jsx)("button",{onClick:o,className:"w-6 h-6 flex items-center justify-center rounded-md hover:bg-gray-100 transition-colors",title:"Reset Zoom & Pan",children:(0,zl.jsx)("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,zl.jsx)("button",{onClick:i,className:"w-6 h-6 flex items-center justify-center rounded-md hover:bg-gray-100 transition-colors",title:"Fit to View",children:(0,zl.jsx)("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),(0,zl.jsx)("button",{onClick:r,disabled:!s,className:"w-6 h-6 flex items-center justify-center rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Zoom Out (Ctrl + Scroll)",children:(0,zl.jsx)("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]}),l&&(0,zl.jsxs)("div",{className:"bg-blue-600 text-white rounded-lg shadow-lg px-2 py-1 text-xs font-medium flex items-center gap-1",children:[(0,zl.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16l3-3m0 0l3 3m-3-3v12M5 12l3-3m0 0l3 3m-3-3v12"})}),"Dragging"]}),(0,zl.jsx)("div",{className:"bg-gray-800 text-white rounded-lg shadow-lg px-2 py-1 text-xs",children:(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("span",{className:"font-medium",children:"Navigation:"}),(0,zl.jsx)("span",{children:"Drag to pan \u2022 Ctrl + scroll to zoom"})]})})]})},lc=e=>{let{jobPerformers:t,onEdit:n,onDelete:r,onAdd:o}=e;return(0,zl.jsxs)("div",{className:"space-y-4",children:[(0,zl.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zl.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Job Performers"}),(0,zl.jsx)("button",{onClick:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium text-sm",children:"Add Job Performer"})]}),0===t.length?(0,zl.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,zl.jsx)("p",{children:"No job performers defined yet."}),(0,zl.jsx)("p",{className:"text-sm mt-1",children:'Click "Add Job Performer" to get started.'})]}):(0,zl.jsx)("div",{className:"grid gap-3",children:t.map(e=>{return(0,zl.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:(0,zl.jsxs)("div",{className:"flex items-start justify-between",children:[(0,zl.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,zl.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300 flex-shrink-0 mt-0.5",style:(t=e.hexColor||e.color,{backgroundColor:t})}),(0,zl.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("h4",{className:"font-medium text-gray-900 truncate",children:e.name}),e.isDefault&&(0,zl.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:"Default"})]}),e.description&&(0,zl.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.description}),e.resources&&e.resources.length>0&&(0,zl.jsxs)("div",{className:"mt-2",children:[(0,zl.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Resources:"}),(0,zl.jsx)("div",{className:"flex flex-wrap gap-1",children:e.resources.map((e,t)=>e.name&&(0,zl.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:e.url?(0,zl.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-indigo-600",onClick:e=>e.stopPropagation(),children:e.name}):e.name},t))})]})]})]}),(0,zl.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,zl.jsx)("button",{onClick:()=>n(e),className:"p-1 text-gray-400 hover:text-indigo-600 transition-colors",title:"Edit job performer",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,zl.jsx)("button",{onClick:()=>r(e),className:"p-1 transition-colors text-gray-400 hover:text-red-600",title:"Delete job performer",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id);var t})})]})},cc=e=>{let{isOpen:t,onClose:n,onSave:o,onDelete:i,editingJobPerformer:a=null}=e;const[s,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,p]=(0,r.useState)("#3B82F6"),[f,h]=(0,r.useState)([{name:"",url:""}]),[m,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(a?(l(a.name||""),u(a.description||""),p(a.hexColor||a.hex_color||a.color||"#3B82F6"),h(a.resources&&a.resources.length>0?a.resources:[{name:"",url:""}])):v())},[t,a]);const v=()=>{l(""),u(""),p("#3B82F6"),h([{name:"",url:""}]),g(!1)},b=()=>{v(),n()},y=(e,t,n)=>{const r=[...f];r[e][t]=n,h(r)};return(0,zl.jsxs)(Wl,{isOpen:t,onClose:b,title:a?"Edit Job Performer":"Add Job Performer",children:[a&&a.isDefault&&(0,zl.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,zl.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,zl.jsx)("strong",{children:"Note:"})," You're editing a default Job Performer. Saving will create a custom version that you can modify."]})}),(0,zl.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.trim()){g(!0);try{const e=f.filter(e=>e.name.trim()||e.url.trim()),t={name:s.trim(),description:c.trim(),color:d,resources:e};await o(t),b()}catch(t){throw console.error("Error saving job performer:",t),t}finally{g(!1)}}},className:"space-y-6",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Performer Name *"}),(0,zl.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"e.g., Customer Service Rep, Product Manager, End User",required:!0})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,zl.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Brief description of this job performer's role and responsibilities",rows:"3"})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),(0,zl.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zl.jsx)("input",{type:"color",value:d,onChange:e=>p(e.target.value),className:"w-16 h-10 border border-gray-300 rounded cursor-pointer"}),(0,zl.jsx)("div",{className:"w-20 h-10 rounded-md border-2 border-gray-300 flex items-center justify-center text-white text-xs font-medium",style:(x=d,{backgroundColor:x}),children:"Preview"}),(0,zl.jsx)("span",{className:"text-sm text-gray-500",children:d})]})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Resources & Links"}),(0,zl.jsx)("button",{type:"button",onClick:()=>{h([...f,{name:"",url:""}])},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ Add Resource"})]}),(0,zl.jsx)("div",{className:"space-y-3",children:f.map((e,t)=>(0,zl.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,zl.jsx)("div",{className:"flex-1",children:(0,zl.jsx)("input",{type:"text",value:e.name,onChange:e=>y(t,"name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Resource name"})}),(0,zl.jsx)("div",{className:"flex-1",children:(0,zl.jsx)("input",{type:"url",value:e.url,onChange:e=>y(t,"url",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"https://example.com"})}),f.length>1&&(0,zl.jsx)("button",{type:"button",onClick:()=>(e=>{f.length>1&&h(f.filter((t,n)=>n!==e))})(t),className:"p-2 text-red-600 hover:text-red-800",title:"Remove resource",children:(0,zl.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))})]}),(0,zl.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,zl.jsxs)("div",{children:[a&&!a.isDefault&&(0,zl.jsx)("button",{type:"button",onClick:async()=>{if(a)if(a.isDefault)alert("Default Job Performers cannot be deleted. You can edit them to create custom versions.");else if(window.confirm(`Are you sure you want to delete "${a.name}"? This action cannot be undone.`))try{await i(a.id),b()}catch(e){console.error("Error deleting job performer:",e),alert("Failed to delete job performer. Please try again.")}},className:"px-4 py-2 text-red-600 hover:text-red-800 font-medium",children:"Delete Job Performer"}),a&&a.isDefault&&(0,zl.jsx)("span",{className:"text-sm text-gray-500 italic",children:"Default Job Performers cannot be deleted"})]}),(0,zl.jsxs)("div",{className:"flex gap-3",children:[(0,zl.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",children:"Cancel"}),(0,zl.jsx)("button",{type:"submit",disabled:!s.trim()||m,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:m?"Saving...":a&&a.isDefault?"Create Custom Version":a?"Update Job Performer":"Add Job Performer"})]})]})]})]});var x},uc=e=>{let{isOpen:t,onClose:n}=e;const[o,i]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!t)return;(async()=>{try{const e=await Ml();i(e),Ul(e),s(!1)}catch(e){console.error("Error loading job performers:",e),s(!1)}})();const e=Dl(async e=>{try{const e=await Ml();i(e),Ul(e)}catch(t){console.error("Error updating job performers:",t)}});return e},[t]);return(0,zl.jsxs)(zl.Fragment,{children:[(0,zl.jsx)(Wl,{isOpen:t,onClose:n,title:"Manage Job Performers",size:"large",children:(0,zl.jsx)("div",{className:"max-h-96 overflow-y-auto",children:a?(0,zl.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,zl.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):(0,zl.jsx)(lc,{jobPerformers:o,onAdd:()=>{d(null),c(!0)},onEdit:e=>{d(e),c(!0)},onDelete:async e=>{if(e.isDefault)alert("Default Job Performers cannot be deleted. You can edit them to create custom versions.");else if(window.confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`))try{await Tl(e.id)}catch(t){console.error("Error deleting job performer:",t),alert("Failed to delete job performer. Please try again.")}}})})}),(0,zl.jsx)(cc,{isOpen:l,onClose:()=>{c(!1),d(null)},onSave:async e=>{try{if(console.log("\ud83d\ude80 handleSave called with:",e),u&&u.isDefault){console.log("Converting default job performer to custom job performer");const t={...e,replaces_default_id:u.id};await Pl(t)}else u?(console.log("Updating existing job performer:",u.id),await Il(u.id,e)):(console.log("Creating new job performer"),await Pl(e));console.log("\u2705 Job performer saved successfully!"),c(!1),d(null);const t=await Ml();console.log("\ud83d\udd04 JobPerformerManager: Refreshing with job performers:",t),i(t),Ul(t),console.log("\ud83d\udd04 JobPerformerManager: Dispatching jobPerformersUpdated event"),window.dispatchEvent(new CustomEvent("jobPerformersUpdated",{detail:t}))}catch(t){console.error("Error saving job performer:",t);const e=t.message||t.toString()||"";e.includes("relation")&&e.includes("does not exist")||e.includes("table")&&e.includes("does not exist")?(alert("\u26a0\ufe0f Database Setup Required\n\nTo save custom Job Performers, you need to create the database table first.\n\nCheck the console for setup instructions."),console.error("\n\ud83d\udd27 DATABASE SETUP REQUIRED:\n\nYour Job Performers are currently using defaults. To save custom Job Performers, \nplease run this SQL in your Supabase SQL Editor:\n\nCREATE TABLE job_performers (\n  id SERIAL PRIMARY KEY,\n  user_id TEXT NOT NULL,\n  name TEXT NOT NULL,\n  description TEXT,\n  color TEXT NOT NULL DEFAULT '#3B82F6',\n  resources JSONB DEFAULT '[]',\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE INDEX idx_job_performers_user_id ON job_performers(user_id);\n\nAfter creating the table, you can edit and save Job Performers normally.\n        ")):"PGRST301"===t.code||e.includes("PGRST301")?(alert("\u26a0\ufe0f Database Setup Required\n\nThe job_performers table doesn't exist yet. Check the console for setup instructions."),console.error('PostgreSQL table "job_performers" not found. See the database setup instructions above.')):(alert("Failed to save job performer. Please try again or check the console for details."),console.error("Full error details:",t),console.error("Error message:",e),console.error("Error code:",t.code))}},onDelete:async e=>{try{await Tl(e)}catch(t){console.error("Error deleting job performer:",t),alert("Failed to delete job performer. Please try again.")}},editingJobPerformer:u})]})},dc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const[o,i]=(0,r.useState)(e),[a,s]=(0,r.useState)({x:0,y:0}),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)({x:0,y:0}),p=(0,r.useRef)(null),f=(0,r.useCallback)(()=>{if(!p.current)return;const e=p.current,r=e.parentElement;if(!r)return;const o=e.getBoundingClientRect(),a=r.getBoundingClientRect(),l=.9*a.width/o.width,c=.9*a.height/o.height,u=Math.min(l,c,1),d=Math.min(Math.max(u,t),n),f=(a.width-o.width*d)/2,h=(a.height-o.height*d)/2;i(d),s({x:Math.max(f,0),y:Math.max(h,0)})},[t,n]),h=(0,r.useCallback)(()=>{i(e=>Math.min(1.2*e,n))},[n]),m=(0,r.useCallback)(()=>{i(e=>Math.max(e/1.2,t))},[t]),g=(0,r.useCallback)(()=>{i(e),s({x:0,y:0})},[e]),v=(0,r.useCallback)(e=>{i(Math.min(Math.max(e,t),n))},[t,n]),b=(0,r.useCallback)(e=>{const t=e.target,n=t.closest('button, input, textarea, select, a, [role="button"]'),r=t.classList.contains("cursor-pointer")||"pointer"===getComputedStyle(t).cursor,o=t.onclick||t.closest("[onclick], .cursor-pointer"),i=t.closest(".group")&&t.closest(".group").querySelector("button"),s=t.closest('.group, [role="button"], .editable'),l=t.closest("[data-rbd-drag-handle-draggable-id]")||t.closest(".cursor-grab")||t.closest(".cursor-grabbing")||"true"===t.dataset.isDragHandle;["BUTTON","INPUT","TEXTAREA","SELECT","A"].includes(t.tagName)||n||r||o||i||s||l||0===e.button&&(c(!0),d({x:e.clientX-a.x,y:e.clientY-a.y}),e.preventDefault())},[a]),y=(0,r.useCallback)(e=>{l&&s({x:e.clientX-u.x,y:e.clientY-u.y})},[l,u]),x=(0,r.useCallback)(()=>{c(!1)},[]),w=(0,r.useCallback)(e=>{if(e.ctrlKey||e.metaKey){e.preventDefault();const l=e.deltaY>0?.9:1.1,c=Math.min(Math.max(o*l,t),n);if(c!==o){var r;const t=null===(r=p.current)||void 0===r?void 0:r.getBoundingClientRect();if(t){const n=t.width/2,r=t.height/2,i=e.clientX-t.left,l=e.clientY-t.top,u=c/o,d=n-(n-a.x-i)*u-(i-n),p=r-(r-a.y-l)*u-(l-r);s({x:d,y:p})}i(c)}}},[o,a,t,n]);(0,r.useEffect)(()=>{if(!p.current)return;const e=e=>y(e),t=()=>x();return l&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[l,y,x]);const k={ref:p,onMouseDown:b,onWheel:w,style:{cursor:l?"grabbing":"grab",transform:`translate(${a.x}px, ${a.y}px) scale(${o})`,transformOrigin:"0 0",transition:l?"none":"transform 0.1s ease-out",minWidth:"100%",minHeight:"100%"}};return{zoom:o,pan:a,isDragging:l,zoomIn:h,zoomOut:m,resetZoom:g,fitToView:f,setZoomLevel:v,containerProps:k,canZoomIn:o<n,canZoomOut:o>t}},pc=e=>{let{stages:t,journeyMapName:n,journeyMapType:o,currentView:i,jobPerformers:a,onAddStage:s,onUpdateStage:l,onDeleteStage:c,onAddTask:u,onUpdateTask:d,onDeleteTask:p,onAddStep:f,onUpdateStep:h,onDeleteStep:m,onMoveStep:g,onSwitchToStepView:v,onImportData:b,onOpenStepDetail:y,onOpenEditPanel:x,onOpenAddStepPanel:w,editPanel:k,editablePainPoints:j,editableOpportunities:S,editableCurrentExperiences:N,onCloseEditPanel:C,onAddPainPoint:_,onRemovePainPoint:E,onUpdatePainPoint:P,onAddOpportunity:I,onRemoveOpportunity:T,onUpdateOpportunity:D,onAddCurrentExperience:O,onRemoveCurrentExperience:A,onUpdateCurrentExperience:L,onSaveEditChanges:R}=e;const[M,B]=(0,r.useState)(!1),[$,U]=(0,r.useState)(!1),[F,z]=(0,r.useState)(!1),{zoom:W,pan:H,isDragging:V,zoomIn:G,zoomOut:q,resetZoom:J,fitToView:K,containerProps:Q,canZoomIn:Y,canZoomOut:X}=dc(),Z=tc(o);console.log("\ud83c\udfaf Drag and Drop JourneyMap loaded - Build 60defe0");return(0,zl.jsxs)("div",{className:"bg-white rounded-lg p-2 relative",children:[(0,zl.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zl.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zl.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:Z.stages}),(0,zl.jsx)(oc,{jobPerformers:a||Bl})]}),(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:["painpoint"===i&&(0,zl.jsxs)("button",{onClick:()=>U(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded text-sm transition-colors flex items-center gap-1.5",children:[(0,zl.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Import/Export"]}),(0,zl.jsxs)("button",{onClick:()=>z(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1.5 rounded text-sm transition-colors flex items-center gap-1.5",children:[(0,zl.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Job Performers"]}),(0,zl.jsxs)("button",{onClick:()=>B(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded text-sm transition-colors flex items-center gap-1.5",children:[(0,zl.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add ",Z.stage]})]})]}),(0,zl.jsx)("div",{className:"relative bg-white rounded-lg border border-gray-200 min-h-96",style:{height:"calc(100vh - 120px)",overflow:"hidden"},children:(0,zl.jsx)("div",{...Q,className:"bg-white",style:{...Q.style,minWidth:"100vw",minHeight:"100vh"},children:"step"===i?(0,zl.jsxs)("div",{className:"flex gap-6 p-2 min-w-max bg-white min-h-full",children:[t.map(e=>(0,zl.jsx)(Yl,{stage:e,journeyMapType:o,currentView:i,onUpdateStage:l,onDeleteStage:c,onAddTask:u,onUpdateTask:d,onDeleteTask:p,onAddStep:f,onUpdateStep:h,onDeleteStep:m,onSwitchToStepView:v,onOpenStepDetail:y,onOpenAddStepPanel:w,jobPerformers:a},e.id)),0===t.length&&(0,zl.jsxs)("div",{className:"w-full text-center py-12 text-gray-500 bg-white min-h-full flex flex-col justify-center",children:[(0,zl.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,zl.jsxs)("p",{className:"text-lg font-medium",children:["No ",Z.stages.toLowerCase()," yet"]}),(0,zl.jsxs)("p",{className:"text-sm",children:["Add your first ",Z.stage.toLowerCase()," to get started"]})]})]}):(0,zl.jsx)(Wo,{onDragEnd:e=>{const{destination:t,source:n,draggableId:r}=e;if(!t)return;if(t.droppableId===n.droppableId&&t.index===n.index)return;const o=n.droppableId.split("-"),i=t.droppableId.split("-"),a=o[1],s=o[2],l=i[1],c=i[2];g&&g({stepId:r,sourceStageId:a,sourceTaskId:s,sourceIndex:n.index,destStageId:l,destTaskId:c,destIndex:t.index})},children:(0,zl.jsx)("div",{className:"p-2 bg-white w-full h-full min-h-full",children:(0,zl.jsx)(ic,{stages:t,journeyMapType:o,onSwitchToStepView:v,onOpenStepDetail:y,onUpdateStep:h,onDeleteStep:m,onMoveStep:g,onUpdateStage:l,onUpdateTask:d,onDeleteTask:p,onDeleteStage:c,onOpenEditPanel:x,editPanel:k,editablePainPoints:j,editableOpportunities:S,editableCurrentExperiences:N,onCloseEditPanel:C,onAddPainPoint:_,onRemovePainPoint:E,onUpdatePainPoint:P,onAddOpportunity:I,onRemoveOpportunity:T,onUpdateOpportunity:D,onAddCurrentExperience:O,onRemoveCurrentExperience:A,onUpdateCurrentExperience:L,onSaveEditChanges:R,jobPerformers:a})})})})}),(0,zl.jsx)(sc,{zoom:W,zoomIn:G,zoomOut:q,resetZoom:J,fitToView:K,canZoomIn:Y,canZoomOut:X,isDragging:V}),(0,zl.jsx)(rc,{isOpen:M,onClose:()=>B(!1),onAdd:s,journeyMapType:o}),(0,zl.jsx)(ac,{isOpen:$,onClose:()=>U(!1),stages:t,journeyMapName:n,journeyMapType:o,onImportData:b}),(0,zl.jsx)(uc,{isOpen:F,onClose:()=>z(!1)})]})},fc=e=>{let{isOpen:t,onClose:n,onAdd:o}=e;const[i,a]=(0,r.useState)(Xl),[s,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),d=()=>{l(""),a(Xl),u(!1)},p=()=>{d(),n()},f=()=>i===Zl?["Customer Acquisition Jobs","Product Development Jobs","Customer Retention Jobs","Support & Service Jobs","Onboarding Jobs","Decision Making Jobs","Problem Resolution Jobs","Product Discovery Jobs"]:["E-commerce Purchase Journey","SaaS Onboarding Journey","Mobile App User Journey","Customer Support Journey","Product Discovery Journey","Subscription Renewal Journey","Return & Refund Journey","B2B Sales Journey"],h=nc.find(e=>e.type===i);return(0,zl.jsx)(Wl,{isOpen:t,onClose:p,title:"Create New Map",children:(0,zl.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.trim()&&!c){u(!0);try{await o(s.trim(),i),d(),n()}catch(t){console.error("Error creating journey map:",t)}finally{u(!1)}}},className:"space-y-6",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Choose Map Type"}),(0,zl.jsx)("div",{className:"grid grid-cols-1 gap-3",children:nc.map(e=>(0,zl.jsx)("div",{onClick:()=>{return t=e.type,a(t),void l("");var t},className:"p-4 border rounded-lg cursor-pointer transition-colors "+(i===e.type?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,zl.jsxs)("div",{className:"flex items-start gap-3",children:[(0,zl.jsx)("div",{className:"text-2xl",children:e.icon}),(0,zl.jsxs)("div",{className:"flex-1",children:[(0,zl.jsx)("h3",{className:"font-medium "+(i===e.type?"text-blue-900":"text-gray-900"),children:e.title}),(0,zl.jsx)("p",{className:"text-sm mt-1 "+(i===e.type?"text-blue-700":"text-gray-600"),children:e.description})]}),(0,zl.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center "+(i===e.type?"border-blue-500 bg-blue-500":"border-gray-300"),children:i===e.type&&(0,zl.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]})},e.type))})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsxs)("label",{htmlFor:"journeyName",className:"block text-sm font-medium text-gray-700 mb-2",children:[null===h||void 0===h?void 0:h.title," Name"]}),(0,zl.jsx)("input",{type:"text",id:"journeyName",value:s,onChange:e=>l(e.target.value),placeholder:`e.g., ${f()[0]}`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0,maxLength:100,required:!0}),(0,zl.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Give your ",null===h||void 0===h?void 0:h.title.toLowerCase()," a descriptive name."]})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quick Suggestions"}),(0,zl.jsx)("div",{className:"grid grid-cols-2 gap-2",children:f().map(e=>(0,zl.jsx)("button",{type:"button",onClick:()=>(e=>{l(e)})(e),className:"text-left px-3 py-2 text-sm bg-gray-50 hover:bg-blue-50 hover:text-blue-700 border border-gray-200 rounded-lg transition-colors",children:e},e))})]}),(0,zl.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,zl.jsx)("button",{type:"button",onClick:p,className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors",disabled:c,children:"Cancel"}),(0,zl.jsx)("button",{type:"submit",disabled:!s.trim()||c,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2",children:c?(0,zl.jsxs)(zl.Fragment,{children:[(0,zl.jsx)("div",{className:"w-4 h-4 animate-spin border-2 border-white border-t-transparent rounded-full"}),"Creating..."]}):(0,zl.jsxs)(zl.Fragment,{children:[(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create ",null===h||void 0===h?void 0:h.title]})})]})]})})},hc=()=>(0,zl.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,zl.jsxs)("div",{className:"text-center",children:[(0,zl.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,zl.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading journey map..."})]})}),mc=e=>{let{onSelectJourneyMap:t,onBack:n,user:o}=e;const[i,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!1),[d,p]=(0,r.useState)(null);(0,r.useEffect)(()=>kl(e=>{a(e),l(!1)}),[]);const f=async(e,t)=>{if(window.confirm(`Are you sure you want to delete "${t}"? This action cannot be undone.`)){p(e);try{await(async e=>{try{const t=await Sl(e);await wl(e,"map_deleted",`Journey map "${null===t||void 0===t?void 0:t.name}" deleted`,t);const{error:n}=await ml.from(bl).delete().eq("id",e);if(n)throw n}catch(t){throw console.error("Error deleting journey map:",t),t}})(e)}catch(n){console.error("Failed to delete journey map:",n),alert("Failed to delete journey map. Please try again.")}finally{p(null)}}},h=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=e=>e?e.reduce((e,t)=>e+(t.tasks?t.tasks.length:0),0):0,g=e=>e?e.reduce((e,t)=>t.tasks?e+t.tasks.reduce((e,t)=>e+(t.steps?t.steps.length:0),0):e,0):0;return s?(0,zl.jsx)(hc,{}):(0,zl.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,zl.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,zl.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,zl.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zl.jsx)("div",{className:"flex items-center gap-4",children:(0,zl.jsxs)("div",{children:[(0,zl.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"All Maps"}),(0,zl.jsx)("p",{className:"text-gray-600 mt-2",children:"Create and manage different types of mapping for your projects"}),o&&(0,zl.jsxs)("div",{className:"flex items-center mt-3 text-sm text-green-600",children:[(0,zl.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),(0,zl.jsx)("span",{children:"Connected \u2022 Real-time collaboration enabled"})]})]})}),(0,zl.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zl.jsxs)("a",{href:"https://cool-pasca-9f2869.netlify.app/",target:"_blank",rel:"noopener noreferrer",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2.5 rounded-lg transition-colors flex items-center gap-2 text-sm",title:"View Enhanced Writer Workflow Demo",children:[(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"\u270d\ufe0f Writer Workflow Demo"]}),(0,zl.jsxs)("button",{onClick:()=>u(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Map"]})]})]})})}),(0,zl.jsx)("main",{className:"max-w-7xl mx-auto px-4 pt-8 pb-12",children:0===i.length?(0,zl.jsx)("div",{className:"text-center py-12",children:(0,zl.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,zl.jsx)("svg",{className:"w-24 h-24 mx-auto mb-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})}),(0,zl.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Maps Yet"}),(0,zl.jsx)("p",{className:"text-gray-600 mb-6",children:"Create your first map to start visualizing user journeys or jobs to be done."}),(0,zl.jsxs)("button",{onClick:()=>u(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[(0,zl.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create First Map"]})]})}):(0,zl.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>{const n=tc(Xl);return(0,zl.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow overflow-hidden",children:(0,zl.jsxs)("div",{className:"p-6",children:[(0,zl.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,zl.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,zl.jsx)("span",{className:"text-2xl flex-shrink-0",children:n.icon}),(0,zl.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),(0,zl.jsx)("p",{className:"text-sm text-gray-500",children:n.name})]})]}),(0,zl.jsx)("button",{onClick:()=>f(e.id,e.name),disabled:d===e.id,className:"text-gray-400 hover:text-red-600 transition-colors disabled:opacity-50 flex-shrink-0",title:"Delete map",children:d===e.id?(0,zl.jsx)("div",{className:"w-5 h-5 animate-spin border-2 border-red-600 border-t-transparent rounded-full"}):(0,zl.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,zl.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,zl.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,zl.jsxs)("span",{className:"text-gray-600",children:[n.stages,":"]}),(0,zl.jsx)("span",{className:"font-medium text-blue-600",children:(r=e.stages,r?r.length:0)})]}),(0,zl.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,zl.jsxs)("span",{className:"text-gray-600",children:[n.tasks,":"]}),(0,zl.jsx)("span",{className:"font-medium text-green-600",children:m(e.stages)})]}),(0,zl.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,zl.jsxs)("span",{className:"text-gray-600",children:[n.steps,":"]}),(0,zl.jsx)("span",{className:"font-medium text-purple-600",children:g(e.stages)})]})]}),(0,zl.jsxs)("div",{className:"text-xs text-gray-500 mb-4",children:["Created: ",h(e.created),e.last_modified&&(0,zl.jsxs)("div",{children:["Modified: ",h(e.last_modified)]})]}),(0,zl.jsx)("button",{onClick:()=>t(e.id,e.name,Xl),className:"w-full bg-gray-100 hover:bg-blue-600 hover:text-white text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors",children:"Open Map"})]})},e.id);var r})})}),(0,zl.jsx)(fc,{isOpen:c,onClose:()=>u(!1),onAdd:async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xl;try{const r=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"My Journey Map",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user_journey";try{const{data:n,error:r}=await ml.from(bl).insert([{name:e,stages:[],last_modified:(new Date).toISOString(),created:(new Date).toISOString()}]).select();if(r)throw r;const o=n[0].id;return await wl(o,"map_created",`Journey map "${e}" of type "${t}" created`),o}catch(n){console.error("Error creating journey map:",n),console.error("Error details:",JSON.stringify(n,null,2));const e=new Error(n.message||n.error_description||`Database error while creating journey map: ${JSON.stringify(n)}`);throw e.originalError=n,e}}(e,n);t(r,e,n)}catch(r){console.error("Failed to create journey map:",r),alert(`Failed to create journey map: ${r.message}`)}}})]})},gc=e=>{let{currentView:t,onViewChange:n}=e;return(0,zl.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,zl.jsx)("button",{onClick:()=>n("painpoint"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("painpoint"===t?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Painpoint View"]})}),(0,zl.jsx)("button",{onClick:()=>n("step"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("step"===t?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Step View"]})})]})},vc=e=>{let{isOpen:t,onClose:n,step:o,onSave:i,stageId:a,taskId:s,stageName:l,taskName:c,jobPerformers:u,onDeleteStep:d,onDeleteTask:p,onDeleteStage:f,defaultTab:h="details"}=e;const[m,g]=(0,r.useState)(""),[v,b]=(0,r.useState)(""),[y,x]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),[j,S]=(0,r.useState)([]),[N,C]=(0,r.useState)([]),[_,E]=(0,r.useState)(""),[P,I]=(0,r.useState)(!1),[T,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(o&&t){g(o.description||"");const e=u||Bl||[];if(o.jobPerformerIds&&Array.isArray(o.jobPerformerIds))x(o.jobPerformerIds),b(o.jobPerformerIds[0]||(e.length>0?e[0].id:"customer"));else if(o.personaId)x([o.personaId]),b(o.personaId);else{const t=e.length>0?e[0].id:"customer";x([t]),b(t)}k(o.painPoints||[]),S(o.opportunities||[]),C(o.currentExperiences||[]),E(o.insights||""),I(!1)}},[o,t,u,h]),(0,r.useEffect)(()=>{if(o){const e=u||Bl||[];let t=[];t=o.jobPerformerIds&&Array.isArray(o.jobPerformerIds)?o.jobPerformerIds:o.personaId?[o.personaId]:e.length>0?[e[0].id]:["customer"];const n=m!==(o.description||"")||JSON.stringify(y.sort())!==JSON.stringify(t.sort())||JSON.stringify(w)!==JSON.stringify(o.painPoints||[])||JSON.stringify(j)!==JSON.stringify(o.opportunities||[])||JSON.stringify(N)!==JSON.stringify(o.currentExperiences||[])||_!==(o.insights||"");I(n)}},[m,y,w,j,N,_,o,u]);const O=()=>{P&&!window.confirm("You have unsaved changes. Are you sure you want to cancel?")||n()};$l(v)||$l("customer");return t&&o?(0,zl.jsxs)("div",{className:"fixed inset-0 z-[9999] flex",children:[(0,zl.jsx)("div",{className:"flex-1 bg-black bg-opacity-50",onClick:O}),(0,zl.jsxs)("div",{className:"w-1/2 max-w-2xl bg-white shadow-2xl h-full overflow-hidden flex flex-col relative z-[9999]",children:[(0,zl.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:(0,zl.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("h2",{className:"text-2xl font-bold",children:"Step Details"}),(0,zl.jsxs)("p",{className:"text-blue-100 mt-1",children:["string"===typeof l?l:(null===l||void 0===l?void 0:l.name)||"Unnamed Stage"," \u2192 ","string"===typeof c?c:(null===c||void 0===c?void 0:c.name)||"Unnamed Task"]})]}),(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsxs)("div",{className:"relative",children:[(0,zl.jsx)("button",{onClick:()=>D(!T),className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",title:"More options",children:(0,zl.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),T&&(0,zl.jsxs)(zl.Fragment,{children:[(0,zl.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>D(!1)}),(0,zl.jsx)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-20",children:(0,zl.jsx)("div",{className:"py-1",children:d&&(0,zl.jsxs)("button",{onClick:()=>{D(!1),window.confirm(`Are you sure you want to delete this step: "${o.description}"?`)&&(d&&d(a,s,o.id),n())},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 transition-colors flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Step"]})})})]})]}),(0,zl.jsx)("button",{onClick:O,className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",children:(0,zl.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),(0,zl.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:(0,zl.jsxs)(zl.Fragment,{children:[(0,zl.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4",children:[(0,zl.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Step Details"]}),(0,zl.jsxs)("div",{className:"space-y-4",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,zl.jsx)("textarea",{value:m,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Step description",rows:"3"})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Performers"}),(0,zl.jsxs)("div",{className:"space-y-2",children:[y.map((e,t)=>(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("select",{value:e,onChange:e=>{const n=[...y];n[t]=e.target.value,x(n),b(n[0]||"")},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:(u||Bl||[]).map(e=>(0,zl.jsx)("option",{value:e.id,children:e.name},e.id))}),y.length>1&&(0,zl.jsx)("button",{type:"button",onClick:()=>{const e=y.filter((e,n)=>n!==t);x(e),b(e[0]||"")},className:"px-2 py-2 text-red-600 hover:bg-red-100 rounded-md transition-colors",title:"Remove job performer",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)),(0,zl.jsx)("button",{type:"button",onClick:()=>{const e=(u||Bl||[]).filter(e=>!y.includes(e.id));if(e.length>0){const t=[...y,e[0].id];x(t),b(t[0]||"")}},className:"w-full py-2 px-4 border-2 border-dashed border-indigo-300 text-indigo-600 rounded-md hover:bg-indigo-50 transition-colors",disabled:y.length>=(u||Bl||[]).length,children:"+ Add Job Performer"})]}),y.length>0&&(0,zl.jsx)("div",{className:"flex items-center gap-2 mt-3 flex-wrap",children:y.map(e=>{const t=$l(e);return t?(0,zl.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zl.jsx)("div",{className:`w-3 h-3 rounded-full ${Fl(t).backgroundColor?"":t.color}`,style:Fl(t).backgroundColor?{backgroundColor:Fl(t).backgroundColor}:{}}),(0,zl.jsx)("span",{className:"text-sm text-gray-600",children:t.name})]},e):null})})]})]})]}),(0,zl.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Current Experiences (",N.length,")"]})}),(0,zl.jsxs)("div",{className:"space-y-2",children:[N.length>0?N.map((e,t)=>(0,zl.jsxs)("div",{className:"flex gap-2",children:[(0,zl.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...N];n[e]=t,C(n)})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:`Current experience ${t+1}`}),(0,zl.jsx)("button",{onClick:()=>(e=>{C(N.filter((t,n)=>n!==e))})(t),className:"px-3 py-2 text-orange-600 hover:bg-orange-100 rounded-md transition-colors",title:"Remove current experience",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):(0,zl.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No current experiences yet. Click the button below to add the first one."}),(0,zl.jsx)("button",{onClick:()=>{C([...N,""])},className:"w-full py-2 px-4 border-2 border-dashed border-orange-300 text-orange-600 rounded-md hover:bg-orange-50 transition-colors",children:"+ Add Current Experience"})]})]}),(0,zl.jsxs)("div",{className:"bg-red-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Pain Points (",w.length,")"]})}),(0,zl.jsxs)("div",{className:"space-y-2",children:[w.length>0?w.map((e,t)=>(0,zl.jsxs)("div",{className:"flex gap-2",children:[(0,zl.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...w];n[e]=t,k(n)})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:`Pain point ${t+1}`}),(0,zl.jsx)("button",{onClick:()=>(e=>{k(w.filter((t,n)=>n!==e))})(t),className:"px-3 py-2 text-red-600 hover:bg-red-100 rounded-md transition-colors",title:"Remove pain point",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):(0,zl.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No pain points yet. Click the button below to add the first one."}),(0,zl.jsx)("button",{onClick:()=>{k([...w,""])},className:"w-full py-2 px-4 border-2 border-dashed border-red-300 text-red-600 rounded-md hover:bg-red-50 transition-colors",children:"+ Add Pain Point"})]})]}),(0,zl.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v18m9-9H3"})}),"Highlights (",j.length,")"]})}),(0,zl.jsxs)("div",{className:"space-y-2",children:[j.length>0?j.map((e,t)=>(0,zl.jsxs)("div",{className:"flex gap-2",children:[(0,zl.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...j];n[e]=t,S(n)})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:`Highlight ${t+1}`}),(0,zl.jsx)("button",{onClick:()=>(e=>{S(j.filter((t,n)=>n!==e))})(t),className:"px-3 py-2 text-green-600 hover:bg-green-100 rounded-md transition-colors",title:"Remove highlight",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):(0,zl.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No highlights yet. Click the button below to add the first one."}),(0,zl.jsx)("button",{onClick:()=>{S([...j,""])},className:"w-full py-2 px-4 border-2 border-dashed border-green-300 text-green-600 rounded-md hover:bg-green-50 transition-colors",children:"+ Add Highlight"})]})]}),(0,zl.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Lessons Learned (",_?1:0,")"]})}),(0,zl.jsx)("div",{className:"space-y-2",children:(0,zl.jsx)("textarea",{value:_,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none",placeholder:"Enter lessons learned, key takeaways, or additional context...",rows:"4"})})]})]})}),(0,zl.jsx)("div",{className:"border-t bg-gray-50 p-6",children:(0,zl.jsxs)("div",{className:"flex justify-between items-center",children:[(0,zl.jsx)("button",{onClick:O,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,zl.jsx)("button",{onClick:()=>{if(o)try{const e={description:m.trim(),personaId:y.length>0?y[0]:null,jobPerformerIds:y,painPoints:w.filter(e=>e&&e.trim&&e.trim()),opportunities:j.filter(e=>e&&e.trim&&e.trim()),currentExperiences:N.filter(e=>e&&e.trim&&e.trim()),insights:_.trim()};console.log("\ud83d\udd27 StepDetailPanel: Saving step data:",e),i(a,s,o.id,e),I(!1),n()}catch(e){console.error("Error saving step data:",e),alert("Failed to save step data. Please check the console for details.")}},disabled:!m.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Save Changes"})]})})]})]}):null},bc=e=>{var t,n,o,i,a,s,l,c,u,d,p;let{editPanel:f,editablePainPoints:h,editableOpportunities:m,editableCurrentExperiences:g,editableInsights:v,jobPerformers:b,onCloseEditPanel:y,onAddPainPoint:x,onRemovePainPoint:w,onUpdatePainPoint:k,onAddOpportunity:j,onRemoveOpportunity:S,onUpdateOpportunity:N,onAddCurrentExperience:C,onRemoveCurrentExperience:_,onUpdateCurrentExperience:E,onAddInsight:P,onRemoveInsight:I,onUpdateInsight:T,onSaveEditChanges:D,onDeleteStep:O}=e;const[A,L]=(0,r.useState)(!1),[R,M]=(0,r.useState)(""),[B,$]=(0,r.useState)([]);if(r.useEffect(()=>{var e;const t=b||Bl||[];f.isOpen&&null!==(e=f.editData)&&void 0!==e&&e.step?(M(f.editData.step.description||""),f.editData.step.jobPerformerIds&&Array.isArray(f.editData.step.jobPerformerIds)?$(f.editData.step.jobPerformerIds):f.editData.step.personaId?$([f.editData.step.personaId]):$(t.length>0?[t[0].id]:["customer"])):f.isOpen&&(M(""),$(t.length>0?[t[0].id]:["customer"]))},[f.isOpen,null===(t=f.editData)||void 0===t?void 0:t.step,b]),!f.isOpen)return null;const U=(e,t)=>{const{destination:n,source:r,draggableId:o}=e;if(n&&(n.droppableId!==r.droppableId||n.index!==r.index))if("currentExperiences"===t){const e=[...g],[t]=e.splice(r.index,1);e.splice(n.index,0,t),e.forEach((e,t)=>{E(t,e)})}else if("painPoints"===t){const e=[...h],[t]=e.splice(r.index,1);e.splice(n.index,0,t),e.forEach((e,t)=>{k(t,e)})}else if("opportunities"===t){const e=[...m],[t]=e.splice(r.index,1);e.splice(n.index,0,t),e.forEach((e,t)=>{N(t,e)})}};return(0,zl.jsxs)("div",{className:"fixed inset-0 z-[9999] flex",children:[(0,zl.jsx)("div",{className:"flex-1 bg-black bg-opacity-50",onClick:y}),(0,zl.jsxs)("div",{className:"w-1/2 max-w-2xl bg-white shadow-2xl h-full overflow-hidden flex flex-col relative z-[9999]",children:[(0,zl.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:(0,zl.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("h2",{className:"text-2xl font-bold",children:"Edit Step"}),(0,zl.jsxs)("p",{className:"text-blue-100 mt-1",children:["string"===typeof(null===(n=f.editData)||void 0===n||null===(o=n.stage)||void 0===o?void 0:o.name)?f.editData.stage.name:(null===(i=f.editData)||void 0===i||null===(a=i.stage)||void 0===a||null===(s=a.name)||void 0===s?void 0:s.name)||"Unnamed Stage"," \u2192 ","string"===typeof(null===(l=f.editData)||void 0===l||null===(c=l.task)||void 0===c?void 0:c.name)?f.editData.task.name:(null===(u=f.editData)||void 0===u||null===(d=u.task)||void 0===d||null===(p=d.name)||void 0===p?void 0:p.name)||"Unnamed Task"]})]}),(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsxs)("div",{className:"relative",children:[(0,zl.jsx)("button",{onClick:()=>L(!A),className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",title:"More options",children:(0,zl.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),A&&(0,zl.jsxs)(zl.Fragment,{children:[(0,zl.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>L(!1)}),(0,zl.jsx)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-20",children:(0,zl.jsx)("div",{className:"py-1",children:O&&(0,zl.jsxs)("button",{onClick:()=>{L(!1),(()=>{var e,t;const n=(null===(e=f.editData)||void 0===e||null===(t=e.step)||void 0===t?void 0:t.description)||"this step";window.confirm(`Are you sure you want to delete "${n}"?`)&&(O(f.stageId,f.taskId,f.stepId),y())})()},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 transition-colors flex items-center gap-2",children:[(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Step"]})})})]})]}),(0,zl.jsx)("button",{onClick:y,className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",children:(0,zl.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),(0,zl.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:f.editData&&(0,zl.jsxs)(zl.Fragment,{children:[(0,zl.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4",children:[(0,zl.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Step Details"]}),(0,zl.jsxs)("div",{className:"space-y-4",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,zl.jsx)("textarea",{value:R,onChange:e=>M(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Step description",rows:"3"})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Performers"}),(0,zl.jsxs)("div",{className:"space-y-2",children:[B.map((e,t)=>(0,zl.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zl.jsx)("select",{value:e,onChange:e=>{const n=[...B];n[t]=e.target.value,$(n)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:(b||Bl||[]).map(e=>(0,zl.jsx)("option",{value:e.id,children:e.name},e.id))}),B.length>1&&(0,zl.jsx)("button",{onClick:()=>{$(B.filter((e,n)=>n!==t))},className:"px-2 py-2 text-red-600 hover:bg-red-100 rounded-md transition-colors",title:"Remove job performer",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)),(0,zl.jsx)("button",{onClick:()=>{const e=(b||Bl||[]).filter(e=>!B.includes(e.id));e.length>0&&$([...B,e[0].id])},className:"w-full py-2 px-4 border-2 border-dashed border-indigo-300 text-indigo-600 rounded-md hover:bg-indigo-50 transition-colors",disabled:B.length>=(b||Bl||[]).length,children:"+ Add Job Performer"})]}),B.length>0&&(0,zl.jsx)("div",{className:"flex items-center gap-2 mt-3 flex-wrap",children:Ll(B).map(e=>(0,zl.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zl.jsx)("div",{className:`w-3 h-3 rounded-full ${Fl(e).backgroundColor?"":e.color}`,style:Fl(e).backgroundColor?{backgroundColor:Fl(e).backgroundColor}:{}}),(0,zl.jsx)("span",{className:"text-sm text-gray-600",children:e.name})]},e.id))})]})]})]}),(0,zl.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Current Experiences (",(null===g||void 0===g?void 0:g.length)||0,")"]})}),(0,zl.jsx)(Wo,{onDragEnd:e=>U(e,"currentExperiences"),children:(0,zl.jsx)(Ei,{droppableId:"currentExperiences",children:(e,t)=>(0,zl.jsxs)("div",{ref:e.innerRef,...e.droppableProps,className:"space-y-2 "+(t.isDraggingOver?"bg-orange-100 rounded-md p-2":""),children:[g&&g.length>0?g.map((e,t)=>(0,zl.jsx)(Si,{draggableId:`current-${t}`,index:t,children:(n,r)=>(0,zl.jsxs)("div",{ref:n.innerRef,...n.draggableProps,className:"flex gap-2 "+(r.isDragging?"shadow-lg":""),children:[(0,zl.jsx)("div",{...n.dragHandleProps,className:"flex items-center px-2 py-2 text-orange-600 hover:text-orange-800 cursor-grab",title:"Drag to reorder",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})}),(0,zl.jsx)("input",{type:"text",value:e,onChange:e=>E(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:`Current experience ${t+1}`}),(0,zl.jsx)("button",{onClick:()=>_(t),className:"px-3 py-2 text-orange-600 hover:bg-orange-100 rounded-md transition-colors",title:"Remove current experience",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},`current-${t}`)):(0,zl.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No current experiences yet. Click the button below to add the first one."}),e.placeholder]})})}),(0,zl.jsx)("button",{onClick:C,className:"w-full py-2 px-4 border-2 border-dashed border-orange-300 text-orange-600 rounded-md hover:bg-orange-50 transition-colors mt-2",children:"+ Add Current Experience"})]}),(0,zl.jsxs)("div",{className:"bg-red-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Pain Points (",h.length,")"]})}),(0,zl.jsx)(Wo,{onDragEnd:e=>U(e,"painPoints"),children:(0,zl.jsx)(Ei,{droppableId:"painPoints",children:(e,t)=>(0,zl.jsxs)("div",{ref:e.innerRef,...e.droppableProps,className:"space-y-2 "+(t.isDraggingOver?"bg-red-100 rounded-md p-2":""),children:[h.length>0?h.map((e,t)=>(0,zl.jsx)(Si,{draggableId:`pain-${t}`,index:t,children:(n,r)=>(0,zl.jsxs)("div",{ref:n.innerRef,...n.draggableProps,className:"flex gap-2 "+(r.isDragging?"shadow-lg":""),children:[(0,zl.jsx)("div",{...n.dragHandleProps,className:"flex items-center px-2 py-2 text-red-600 hover:text-red-800 cursor-grab",title:"Drag to reorder",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})}),(0,zl.jsx)("input",{type:"text",value:e,onChange:e=>k(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:`Pain point ${t+1}`}),(0,zl.jsx)("button",{onClick:()=>w(t),className:"px-3 py-2 text-red-600 hover:bg-red-100 rounded-md transition-colors",title:"Remove pain point",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},`pain-${t}`)):(0,zl.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No pain points yet. Click the button below to add the first one."}),e.placeholder]})})}),(0,zl.jsx)("button",{onClick:x,className:"w-full py-2 px-4 border-2 border-dashed border-red-300 text-red-600 rounded-md hover:bg-red-50 transition-colors mt-2",children:"+ Add Pain Point"})]}),(0,zl.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v18m9-9H3"})}),"Highlights (",m.length,")"]})}),(0,zl.jsx)(Wo,{onDragEnd:e=>U(e,"opportunities"),children:(0,zl.jsx)(Ei,{droppableId:"opportunities",children:(e,t)=>(0,zl.jsxs)("div",{ref:e.innerRef,...e.droppableProps,className:"space-y-2 "+(t.isDraggingOver?"bg-green-100 rounded-md p-2":""),children:[m.length>0?m.map((e,t)=>(0,zl.jsx)(Si,{draggableId:`opp-${t}`,index:t,children:(n,r)=>(0,zl.jsxs)("div",{ref:n.innerRef,...n.draggableProps,className:"flex gap-2 "+(r.isDragging?"shadow-lg":""),children:[(0,zl.jsx)("div",{...n.dragHandleProps,className:"flex items-center px-2 py-2 text-green-600 hover:text-green-800 cursor-grab",title:"Drag to reorder",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})}),(0,zl.jsx)("input",{type:"text",value:e,onChange:e=>N(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:`Highlight ${t+1}`}),(0,zl.jsx)("button",{onClick:()=>S(t),className:"px-3 py-2 text-green-600 hover:bg-green-100 rounded-md transition-colors",title:"Remove highlight",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},`opp-${t}`)):(0,zl.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No highlights yet. Click the button below to add the first one."}),e.placeholder]})})}),(0,zl.jsx)("button",{onClick:j,className:"w-full py-2 px-4 border-2 border-dashed border-green-300 text-green-600 rounded-md hover:bg-green-50 transition-colors mt-2",children:"+ Add Highlight"})]}),(0,zl.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Lessons Learned (",(null===v||void 0===v?void 0:v.length)||0,")"]})}),(0,zl.jsxs)("div",{className:"space-y-2",children:[v&&v.length>0?v.map((e,t)=>(0,zl.jsxs)("div",{className:"flex gap-2",children:[(0,zl.jsx)("textarea",{value:e,onChange:e=>T(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 resize-none",placeholder:`Customer insight ${t+1}`,rows:"2"}),(0,zl.jsx)("button",{onClick:()=>I(t),className:"px-3 py-2 text-yellow-600 hover:bg-yellow-100 rounded-md transition-colors self-start",title:"Remove insight",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):(0,zl.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No lessons learned yet. Click the button below to add the first one."}),(0,zl.jsx)("button",{onClick:P,className:"w-full py-2 px-4 border-2 border-dashed border-yellow-300 text-yellow-600 rounded-md hover:bg-yellow-50 transition-colors",children:"+ Add Customer Insight"})]})]})]})}),(0,zl.jsx)("div",{className:"border-t bg-gray-50 p-6",children:(0,zl.jsxs)("div",{className:"flex justify-between items-center",children:[(0,zl.jsx)("button",{onClick:y,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,zl.jsx)("button",{onClick:()=>D(R,B),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})})]})]})},yc=e=>{let{isOpen:t,onClose:n,onAdd:o,stageId:i,taskId:a,stageName:s,taskName:l,jobPerformers:c}=e;const[u,d]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[h,m]=(0,r.useState)([]),[g,v]=(0,r.useState)([]),[b,y]=(0,r.useState)([]),[x,w]=(0,r.useState)([]);if((0,r.useEffect)(()=>{if(t){const e=c||Bl||[];d(""),f(e.length>0?e[0].id:""),m([]),v([]),y([]),w([])}},[t,c]),!t)return null;const k=()=>{d(""),f(""),m([]),v([]),y([]),w([]),n()};return(0,zl.jsxs)("div",{className:"fixed inset-0 z-[9999] flex",children:[(0,zl.jsx)("div",{className:"flex-1 bg-black bg-opacity-50",onClick:k}),(0,zl.jsxs)("div",{className:"w-1/2 max-w-2xl bg-white shadow-2xl h-full overflow-hidden flex flex-col relative z-[9999]",children:[(0,zl.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:(0,zl.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("h2",{className:"text-2xl font-bold",children:"Add New Step"}),(0,zl.jsxs)("p",{className:"text-blue-100 mt-1",children:[s," \u2192 ",l]})]}),(0,zl.jsx)("div",{className:"flex items-center gap-2",children:(0,zl.jsx)("button",{onClick:k,className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",children:(0,zl.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})}),(0,zl.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:(0,zl.jsxs)(zl.Fragment,{children:[(0,zl.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4",children:[(0,zl.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Step Details"]}),(0,zl.jsxs)("div",{className:"space-y-4",children:[(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,zl.jsx)("textarea",{value:u,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Describe what happens in this step...",rows:"3",autoFocus:!0})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Performer"}),(0,zl.jsx)("select",{value:p,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:(c||Bl||[]).map(e=>(0,zl.jsx)("option",{value:e.id,children:e.name},e.id))}),p&&$l(p)&&(0,zl.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,zl.jsx)("div",{className:`w-3 h-3 rounded-full ${Fl($l(p)).backgroundColor?"":$l(p).color}`,style:Fl($l(p)).backgroundColor?{backgroundColor:Fl($l(p)).backgroundColor}:{}}),(0,zl.jsx)("span",{className:"text-sm text-gray-600",children:$l(p).name})]})]})]})]}),(0,zl.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Current Experiences (",b.length,")"]})}),(0,zl.jsxs)("div",{className:"space-y-2",children:[b.length>0?b.map((e,t)=>(0,zl.jsxs)("div",{className:"flex gap-2",children:[(0,zl.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...b];n[e]=t,y(n)})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:`Current experience ${t+1}`}),(0,zl.jsx)("button",{onClick:()=>(e=>{y(b.filter((t,n)=>n!==e))})(t),className:"px-3 py-2 text-orange-600 hover:bg-orange-100 rounded-md transition-colors",title:"Remove current experience",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):(0,zl.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No current experiences yet. Click the button below to add the first one."}),(0,zl.jsx)("button",{onClick:()=>{y([...b,""])},className:"w-full py-2 px-4 border-2 border-dashed border-orange-300 text-orange-600 rounded-md hover:bg-orange-50 transition-colors",children:"+ Add Current Experience"})]})]}),(0,zl.jsxs)("div",{className:"bg-red-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Pain Points (",h.length,")"]})}),(0,zl.jsxs)("div",{className:"space-y-2",children:[h.length>0?h.map((e,t)=>(0,zl.jsxs)("div",{className:"flex gap-2",children:[(0,zl.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...h];n[e]=t,m(n)})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:`Pain point ${t+1}`}),(0,zl.jsx)("button",{onClick:()=>(e=>{m(h.filter((t,n)=>n!==e))})(t),className:"px-3 py-2 text-red-600 hover:bg-red-100 rounded-md transition-colors",title:"Remove pain point",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):(0,zl.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No pain points yet. Click the button below to add the first one."}),(0,zl.jsx)("button",{onClick:()=>{m([...h,""])},className:"w-full py-2 px-4 border-2 border-dashed border-red-300 text-red-600 rounded-md hover:bg-red-50 transition-colors",children:"+ Add Pain Point"})]})]}),(0,zl.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v18m9-9H3"})}),"Highlights (",g.length,")"]})}),(0,zl.jsxs)("div",{className:"space-y-2",children:[g.length>0?g.map((e,t)=>(0,zl.jsxs)("div",{className:"flex gap-2",children:[(0,zl.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...g];n[e]=t,v(n)})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:`Highlight ${t+1}`}),(0,zl.jsx)("button",{onClick:()=>(e=>{v(g.filter((t,n)=>n!==e))})(t),className:"px-3 py-2 text-green-600 hover:bg-green-100 rounded-md transition-colors",title:"Remove highlight",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):(0,zl.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No highlights yet. Click the button below to add the first one."}),(0,zl.jsx)("button",{onClick:()=>{v([...g,""])},className:"w-full py-2 px-4 border-2 border-dashed border-green-300 text-green-600 rounded-md hover:bg-green-50 transition-colors",children:"+ Add Highlight"})]})]}),(0,zl.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,zl.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,zl.jsxs)("div",{className:"flex items-center",children:[(0,zl.jsx)("svg",{className:"w-5 h-5 mr-2 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Lessons Learned (",x.length,")"]})}),(0,zl.jsxs)("div",{className:"space-y-2",children:[x.length>0?x.map((e,t)=>(0,zl.jsxs)("div",{className:"flex gap-2",children:[(0,zl.jsx)("textarea",{value:e,onChange:e=>((e,t)=>{const n=[...x];n[e]=t,w(n)})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none",placeholder:`Customer insight ${t+1}`,rows:"2"}),(0,zl.jsx)("button",{onClick:()=>(e=>{w(x.filter((t,n)=>n!==e))})(t),className:"px-3 py-2 text-purple-600 hover:bg-purple-100 rounded-md transition-colors self-start",title:"Remove insight",children:(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):(0,zl.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No lessons learned yet. Click the button below to add the first one."}),(0,zl.jsx)("button",{onClick:()=>{w([...x,""])},className:"w-full py-2 px-4 border-2 border-dashed border-purple-300 text-purple-600 rounded-md hover:bg-purple-50 transition-colors",children:"+ Add Customer Insight"})]})]})]})}),(0,zl.jsx)("div",{className:"border-t bg-gray-50 p-6",children:(0,zl.jsxs)("div",{className:"flex justify-between items-center",children:[(0,zl.jsx)("button",{onClick:k,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,zl.jsx)("button",{onClick:()=>{if(u.trim())try{const e={description:u.trim(),personaId:p||null,painPoints:h.filter(e=>e&&e.trim()),opportunities:g.filter(e=>e&&e.trim()),currentExperiences:b.filter(e=>e&&e.trim()),insights:x.filter(e=>e&&e.trim()).join(" ")};console.log("\ud83d\udd27 AddStepPanel: Creating step with data:",e),o(e),k()}catch(e){console.error("Error creating step:",e),alert("Failed to create step. Please check the console for details.")}else alert("Please enter a step description")},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Add Step"})]})})]})]})};const xc=function(){const[e,t]=(0,r.useState)(null),[n,o]=(0,r.useState)(null),[i,a]=(0,r.useState)(""),[s,l]=(0,r.useState)(Xl),[c,u]=(0,r.useState)([]),[p,f]=(0,r.useState)(!0),[h,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)([]),[b,y]=(0,r.useState)(()=>{try{return localStorage.getItem("journeyMapView")||"painpoint"}catch(e){return"painpoint"}}),[x,w]=(0,r.useState)(!1),[k,j]=(0,r.useState)({isOpen:!1,step:null,stageId:null,taskId:null,stageName:"",taskName:""}),[S,N]=(0,r.useState)({isOpen:!1,stageId:null,taskId:null,stageName:"",taskName:""}),[C,_]=(0,r.useState)({isOpen:!1,editData:null,stageId:null,stageName:"",taskId:null,taskName:"",stepId:null}),[E,P]=(0,r.useState)([]),[I,T]=(0,r.useState)([]),[D,O]=(0,r.useState)([]),[A,L]=(0,r.useState)([]),R=()=>{_({isOpen:!1,editData:null,stageId:null,stageName:"",taskId:null,taskName:"",stepId:null}),P([]),T([]),O([])},M=()=>{P([...E,""])},B=e=>{P(E.filter((t,n)=>n!==e))},$=(e,t)=>{const n=[...E];n[e]=t,P(n)},U=()=>{T([...I,""])},F=e=>{T(I.filter((t,n)=>n!==e))},z=(e,t)=>{const n=[...I];n[e]=t,T(n)},W=()=>{O([...D,""])},H=e=>{O(D.filter((t,n)=>n!==e))},V=(e,t)=>{const n=[...D];n[e]=t,O(n)},G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!C.editData)return;const n=E.filter(e=>""!==e.trim()),r=I.filter(e=>""!==e.trim()),o=D.filter(e=>""!==e.trim()),i=A.filter(e=>""!==e.trim()),a={...C.editData.step,description:e,jobPerformerIds:t,painPoints:n,opportunities:r,currentExperiences:o,insights:i.length>0?i.join("\n\n"):""};t.length>0?a.personaId=t[0]:a.personaId=null,ee(C.stageId,C.taskId,C.stepId,a),R()};(0,r.useEffect)(()=>{const e=(n=async e=>{if(e){if(t(e),!localStorage.getItem("hasResetData"))try{await(async()=>{try{const{error:e}=await ml.from(yl).delete().neq("id",0);e&&console.error("Error clearing version history:",e);const{error:t}=await ml.from(bl).delete().neq("id",0);return t&&console.error("Error clearing journey maps:",t),console.log("All data cleared successfully"),!0}catch(e){throw console.error("Error resetting data:",e),e}})(),localStorage.setItem("hasResetData","true"),m(!0)}catch(n){console.error("Failed to reset data:",n)}try{await(async()=>{try{return console.log("\ud83d\udd04 initializeJobPerformers: Starting initialization..."),Bl=await Ml(),console.log("\ud83d\udd04 initializeJobPerformers: PERSONAS initialized:",Bl),Bl}catch(n){return console.error("Error initializing job performers:",n),Bl=Ol.map(Al),console.log("\ud83d\udd04 initializeJobPerformers: Using defaults:",Bl),Bl}})()}catch(n){console.error("Failed to initialize job performers:",n)}await q()}else try{await(async()=>{try{return gl()}catch(n){throw console.error("Error getting anonymous user:",n),n}})()}catch(n){console.error("Failed to sign in:",n),f(!1)}},n(gl()),()=>{});var n;return e},[]),(0,r.useEffect)(()=>{if(!e)return;return Dl(async e=>{const t=await Ml();v(t),Ul(t),u(e=>[...e])})},[e]);const q=async()=>{try{let e=localStorage.getItem("currentJourneyMapId"),t=localStorage.getItem("currentJourneyMapName"),n=localStorage.getItem("currentJourneyMapType")||Xl;if(e&&(e.includes("-")||e.length>10)&&(console.log("\ud83d\udd04 App: Clearing UUID-based localStorage, migrating to integer IDs"),localStorage.removeItem("currentJourneyMapId"),localStorage.removeItem("currentJourneyMapName"),localStorage.removeItem("currentJourneyMapType"),e=null),e){const r=parseInt(e,10);if(!isNaN(r))return o(r),a(t||"My Journey Map"),l(n),void f(!1)}const r=kl(e=>{if(r(),e.length>0){const t=e[0];o(t.id),a(t.name),l(Xl),localStorage.setItem("currentJourneyMapId",t.id),localStorage.setItem("currentJourneyMapName",t.name),localStorage.setItem("currentJourneyMapType",Xl)}else console.log("\ud83d\udd04 App: No journey maps found, showing selector"),w(!0);f(!1)})}catch(e){console.error("Failed to initialize journey map:",e),f(!1)}};(0,r.useEffect)(()=>{if(!n)return;const e=((e,t)=>{const n=async()=>{try{const n=await Sl(e);t(n)}catch(n){console.error("Error in subscribeToJourneyMap:",n)}};n();const r=ml.channel(`journey_map_${e}`).on("postgres_changes",{event:"*",schema:"public",table:bl,filter:`id=eq.${e}`},()=>{n()}).subscribe();return()=>{r.unsubscribe()}})(n,e=>{if(e&&e.stages)u(e.stages),l(Xl);else{const e=tc(s),t=[{id:d(),name:`${e.stage} 1`,tasks:[]},{id:d(),name:`${e.stage} 2`,tasks:[]}];u(t),jl(n,t,"Created default stages")}});return e},[n,s]),(0,r.useEffect)(()=>{try{localStorage.setItem("journeyMapView",b)}catch(e){console.error("Error saving view to localStorage:",e)}},[b]);const J=(e,t,n)=>{o(e),a(t),l(n||Xl),w(!1),localStorage.setItem("currentJourneyMapId",e),localStorage.setItem("currentJourneyMapName",t),localStorage.setItem("currentJourneyMapType",n||Xl)},K=()=>{w(!1)},Q=async(e,t)=>{if(!n)return console.error("No journey map ID available for saving!"),void alert("\u26a0\ufe0f Cannot save: No journey map selected");try{console.log("\ud83d\udd04 App: Saving stages to journey map:",n),console.log("\ud83d\udd04 App: Change details:",t),console.log("\ud83d\udd04 App: Stages data being saved:",JSON.stringify(e,null,2)),await jl(n,e,t),console.log("\u2705 App: Stages saved successfully!")}catch(r){console.error("\u274c App: Failed to update stages:",r),console.error("\u274c App: Error details:",JSON.stringify(r,null,2));let e="Unknown error occurred";throw r&&"object"===typeof r?e=r.message?r.message:r.error_description?r.error_description:r.details?r.details:r.hint?r.hint:JSON.stringify(r,null,2):"string"===typeof r&&(e=r),e.includes("invalid input syntax for type integer")&&(e="Data type validation error: One of the fields contains invalid data format. Please check your input values."),alert(`Failed to save changes: ${e}\n\nCheck the console for full details.`),r}},Y=async e=>{const t=tc(s),r=c.find(t=>t.id===e),o=c.filter(t=>t.id!==e);u(o),await Nl(n,"deleted",r,`Deleted ${t.stage.toLowerCase()}: "${null===r||void 0===r?void 0:r.name}"`),await Q(o,`Deleted ${t.stage.toLowerCase()}: "${null===r||void 0===r?void 0:r.name}"`)},X=async(e,t)=>{const r=tc(s),o=c.find(t=>t.id===e),i=null===o||void 0===o?void 0:o.tasks.find(e=>e.id===t),a=c.map(n=>n.id===e?{...n,tasks:n.tasks.filter(e=>e.id!==t)}:n);u(a),await Cl(n,"deleted",i,`Deleted ${r.task.toLowerCase()}: "${null===i||void 0===i?void 0:i.name}"`),await Q(a,`Deleted ${r.task.toLowerCase()}: "${null===i||void 0===i?void 0:i.name}"`)},Z=async(e,t,r)=>{try{console.log("\ud83d\udd27 App: Adding step with data:",r),console.log("\ud83d\udd27 App: Stage ID:",e,"Task ID:",t);const o=tc(s),i={id:d(),description:r.description||"",personaId:r.personaId||null,painPoints:Array.isArray(r.painPoints)?r.painPoints:[],opportunities:Array.isArray(r.opportunities)?r.opportunities:[],currentExperiences:Array.isArray(r.currentExperiences)?r.currentExperiences:[],insights:r.insights||""};console.log("\ud83d\udd27 App: Created new step:",i);const a=c.map(n=>n.id===e?{...n,tasks:n.tasks.map(e=>e.id===t?{...e,steps:[...e.steps,i]}:e)}:n);console.log("\ud83d\udd27 App: New stages structure:",a),u(a),await _l(n,"added",i,`Added ${o.step.toLowerCase()}: "${r.description||"New step"}"`),await Q(a,`Added ${o.step.toLowerCase()}: "${r.description||"New step"}"`),console.log("\u2705 App: Step added successfully")}catch(o){throw console.error("\u274c App: Error adding step:",o),alert("Failed to add step. Please check the console for details."),o}},ee=async(e,t,r,o)=>{const i=tc(s),a=c.map(n=>n.id===e?{...n,tasks:n.tasks.map(e=>e.id===t?{...e,steps:e.steps.map(e=>e.id===r?{...o,id:r}:e)}:e)}:n);u(a),await _l(n,"updated",{...o,id:r},`Updated ${i.step.toLowerCase()}: "${o.description||"Step"}"`),await Q(a,`Updated ${i.step.toLowerCase()}: "${o.description||"Step"}"`)},te=async(e,t,r)=>{const o=tc(s),i=c.find(t=>t.id===e),a=null===i||void 0===i?void 0:i.tasks.find(e=>e.id===t),l=null===a||void 0===a?void 0:a.steps.find(e=>e.id===r),d=c.map(n=>n.id===e?{...n,tasks:n.tasks.map(e=>e.id===t?{...e,steps:e.steps.filter(e=>e.id!==r)}:e)}:n);u(d),await _l(n,"deleted",l,`Deleted ${o.step.toLowerCase()}: "${(null===l||void 0===l?void 0:l.description)||"Step"}"`),await Q(d,`Deleted ${o.step.toLowerCase()}: "${(null===l||void 0===l?void 0:l.description)||"Step"}"`)};return p?(0,zl.jsx)(hc,{}):x?(0,zl.jsx)(mc,{onSelectJourneyMap:J,onBack:K,user:e}):(tc(s),(0,zl.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,zl.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,zl.jsx)("div",{className:"max-w-full mx-auto px-4 py-2",children:(0,zl.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zl.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zl.jsxs)("button",{onClick:()=>{w(!0)},className:"text-gray-600 hover:text-gray-900 transition-colors flex items-center gap-1",title:"Back to all journey maps",children:[(0,zl.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,zl.jsx)("span",{className:"text-sm",children:"Back"})]}),(0,zl.jsxs)("div",{children:[(0,zl.jsx)("div",{className:"flex items-center gap-2",children:(0,zl.jsx)(ql,{title:i,onSave:async e=>{try{await(async(e,t)=>{try{const n=await Sl(e),r=null===n||void 0===n?void 0:n.name,{error:o}=await ml.from(bl).update({name:t,last_modified:(new Date).toISOString()}).eq("id",e);if(o)throw o;await wl(e,"name_updated",`Journey map name changed from "${r}" to "${t}"`,r,t)}catch(n){throw console.error("Error updating journey map name:",n),n}})(n,e),a(e),localStorage.setItem("currentJourneyMapName",e)}catch(t){throw console.error("Failed to update journey map name:",t),t}},className:"text-xl font-bold text-gray-900"})}),e&&(0,zl.jsxs)("div",{className:"flex items-center mt-1 text-xs text-green-600",children:[(0,zl.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),(0,zl.jsxs)("span",{children:["Connected as ",vl(e)," \u2022 Real-time collaboration enabled"]})]})]})]}),(0,zl.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zl.jsxs)("a",{href:"https://cool-pasca-9f2869.netlify.app/",target:"_blank",rel:"noopener noreferrer",className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1.5 rounded-lg transition-colors flex items-center gap-2 text-sm",title:"View Enhanced Writer Workflow Demo",children:[(0,zl.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zl.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"\u270d\ufe0f Writer Workflow"]}),(0,zl.jsx)(gc,{currentView:b,onViewChange:y})]})]})})}),(0,zl.jsx)("main",{className:"max-w-full mx-auto px-4 pt-2 pb-4",children:(0,zl.jsx)(pc,{stages:c,journeyMapName:i,journeyMapType:s,currentView:b,jobPerformers:g,onAddStage:async e=>{const t=tc(s),r={id:d(),name:e,tasks:[]},o=[...c,r];u(o),await Nl(n,"added",r,`Added ${t.stage.toLowerCase()}: "${e}"`),await Q(o,`Added ${t.stage.toLowerCase()}: "${e}"`)},onUpdateStage:async(e,t)=>{const r=tc(s),o=c.find(t=>t.id===e),i=c.map(n=>n.id===e?{...n,name:t}:n);u(i),await Nl(n,"updated",{id:e,name:t},`Updated ${r.stage.toLowerCase()}: "${null===o||void 0===o?void 0:o.name}" \u2192 "${t}"`),await Q(i,`Updated ${r.stage.toLowerCase()}: "${null===o||void 0===o?void 0:o.name}" \u2192 "${t}"`)},onDeleteStage:Y,onAddTask:async(e,t)=>{const r=tc(s),o={...t,id:d(),steps:[]},i=c.map(t=>t.id===e?{...t,tasks:[...t.tasks,o]}:t);u(i),await Cl(n,"added",o,`Added ${r.task.toLowerCase()}: "${t.name}"`),await Q(i,`Added ${r.task.toLowerCase()}: "${t.name}"`)},onUpdateTask:async(e,t,r)=>{const o=tc(s),i=c.map(n=>n.id===e?{...n,tasks:n.tasks.map(e=>e.id===t?{...r,id:t,steps:e.steps}:e)}:n);u(i),await Cl(n,"updated",{...r,id:t},`Updated ${o.task.toLowerCase()}: "${r.name}"`),await Q(i,`Updated ${o.task.toLowerCase()}: "${r.name}"`)},onDeleteTask:X,onAddStep:Z,onUpdateStep:ee,onDeleteStep:te,onMoveStep:async e=>{let{stepId:t,sourceStageId:r,sourceTaskId:o,sourceIndex:i,destStageId:a,destTaskId:l,destIndex:d}=e;const p=tc(s),f=c.find(e=>e.id===r),h=null===f||void 0===f?void 0:f.tasks.find(e=>e.id===o),m=null===h||void 0===h?void 0:h.steps.find(e=>e.id===t);if(!m)return;const g=c.map(e=>e.id===r?{...e,tasks:e.tasks.map(e=>e.id===o?{...e,steps:e.steps.filter(e=>e.id!==t)}:e)}:e).map(e=>e.id===a?{...e,tasks:e.tasks.map(e=>{if(e.id===l){const t=[...e.steps];return t.splice(d,0,m),{...e,steps:t}}return e})}:e);u(g);const v=(null===h||void 0===h?void 0:h.name)||"Unknown Task",b=c.find(e=>e.id===a),y=null===b||void 0===b?void 0:b.tasks.find(e=>e.id===l),x=(null===y||void 0===y?void 0:y.name)||"Unknown Task",w=r===a&&o===l?`Reordered ${p.step.toLowerCase()}: "${m.description||"Step"}" within ${v}`:`Moved ${p.step.toLowerCase()}: "${m.description||"Step"}" from ${v} to ${x}`;await _l(n,"moved",m,w),await Q(g,w)},onSwitchToStepView:()=>{y("step")},onImportData:async e=>{window.confirm("This will replace all current data. Are you sure you want to continue?")&&(u(e),await Q(e,"Data imported from file"))},onOpenStepDetail:function(e,t,n,r,o){j({isOpen:!0,step:e,stageId:t,taskId:n,stageName:r,taskName:o,defaultTab:arguments.length>5&&void 0!==arguments[5]?arguments[5]:"details"})},onOpenEditPanel:(e,t,n,r,o,i)=>{const a=c.find(e=>e.id===n),s=null===a||void 0===a?void 0:a.tasks.find(e=>e.id===o),l=e.stepId||e.id,u=null===s||void 0===s?void 0:s.steps.find(e=>e.id===l);u&&s&&a&&(P(u.painPoints||[]),T(u.opportunities||[]),O(u.currentExperiences||[]),L(u.insights?[u.insights]:[]),_({isOpen:!0,editData:{stage:a,task:s,step:u,allPainPoints:u.painPoints||[],allOpportunities:u.opportunities||[]},stageId:n,stageName:r,taskId:o,taskName:i,stepId:u.id}))},onOpenAddStepPanel:(e,t,n,r)=>{N({isOpen:!0,stageId:e,taskId:t,stageName:n,taskName:r})},editPanel:C,editablePainPoints:E,editableOpportunities:I,editableCurrentExperiences:D,onCloseEditPanel:R,onAddPainPoint:M,onRemovePainPoint:B,onUpdatePainPoint:$,onAddOpportunity:U,onRemoveOpportunity:F,onUpdateOpportunity:z,onAddCurrentExperience:W,onRemoveCurrentExperience:H,onUpdateCurrentExperience:V,onSaveEditChanges:G})}),(0,zl.jsx)(vc,{isOpen:k.isOpen,onClose:()=>{j({isOpen:!1,step:null,stageId:null,taskId:null,stageName:"",taskName:""})},step:k.step,onSave:ee,stageId:k.stageId,taskId:k.taskId,stageName:k.stageName,taskName:k.taskName,journeyMapType:s,jobPerformers:g,onDeleteStep:te,onDeleteTask:X,onDeleteStage:Y,defaultTab:k.defaultTab}),(0,zl.jsx)(bc,{editPanel:C,editablePainPoints:E,editableOpportunities:I,editableCurrentExperiences:D,editableInsights:A,jobPerformers:g,onCloseEditPanel:R,onAddPainPoint:M,onRemovePainPoint:B,onUpdatePainPoint:$,onAddOpportunity:U,onRemoveOpportunity:F,onUpdateOpportunity:z,onAddCurrentExperience:W,onRemoveCurrentExperience:H,onUpdateCurrentExperience:V,onAddInsight:()=>{L([...A,""])},onRemoveInsight:e=>{L(A.filter((t,n)=>n!==e))},onUpdateInsight:(e,t)=>{const n=[...A];n[e]=t,L(n)},onSaveEditChanges:G,onDeleteStep:te,onDeleteTask:X,onDeleteStage:Y}),(0,zl.jsx)(yc,{isOpen:S.isOpen,onClose:()=>{N({isOpen:!1,stageId:null,taskId:null,stageName:"",taskName:""})},onAdd:e=>Z(S.stageId,S.taskId,e),stageId:S.stageId,taskId:S.taskId,stageName:S.stageName,taskName:S.taskName,jobPerformers:g})]}))};o.createRoot(document.getElementById("root")).render((0,zl.jsx)(r.StrictMode,{children:(0,zl.jsx)(xc,{})}))})();
//# sourceMappingURL=main.8fdbb4ff.js.map