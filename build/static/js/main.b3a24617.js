/*! For license information please see main.b3a24617.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},82:(e,t)=>{var n=60103,r=60106,i=60107,a=60108,o=60114,s=60109,l=60110,u=60112,c=60113,d=60120,p=60115,f=60116,h=60121,g=60122,m=60117,v=60129,b=60131;if("function"===typeof Symbol&&Symbol.for){var y=Symbol.for;n=y("react.element"),r=y("react.portal"),i=y("react.fragment"),a=y("react.strict_mode"),o=y("react.profiler"),s=y("react.provider"),l=y("react.context"),u=y("react.forward_ref"),c=y("react.suspense"),d=y("react.suspense_list"),p=y("react.memo"),f=y("react.lazy"),h=y("react.block"),g=y("react.server.block"),m=y("react.fundamental"),v=y("react.debug_trace_mode"),b=y("react.legacy_hidden")}function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case c:case d:return e;default:switch(e=e&&e.$$typeof){case l:case u:case f:case p:case s:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return w(e)===l}},86:(e,t,n)=>{e.exports=n(82)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var w=y.prototype=new b;w.constructor=y,g(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,i)&&!_.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:S.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+E(l,0):a,x(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),I(o,t,i,"",function(e){return e})):null!=o&&(N(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",x(e))for(var u=0;u<e.length;u++){var c=a+E(s=e[u],u);l+=I(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,c=a+E(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},D={transition:null},A={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=y,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!_.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(829)),a=r(n(736)),o=n(745);class s{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},o.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new i.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:i=!1,count:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=new URL(`${this.url}/rpc/${e}`);let l;r||i?(t=r?"HEAD":"GET",Object.entries(n).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?`{${n.join(",")}}`:`${n}`]}).forEach(e=>{let[t,n]=e;s.searchParams.append(t,n)})):(t="POST",l=n);const u=Object.assign({},this.headers);return o&&(u.Prefer=`count=${o}`),new a.default({method:t,url:s,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=s},219:(e,t,n)=>{var r=n(763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var i=f(n);i&&i!==h&&e(t,i,r)}var o=c(n);d&&(o=o.concat(d(n)));for(var s=l(t),g=l(n),m=0;m<o.length;++m){var v=o[m];if(!a[v]&&(!r||!r[v])&&(!g||!g[v])&&(!s||!s[v])){var b=p(n,v);try{u(t,v,b)}catch(y){}}}}return t}},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,p=null,f=3,h=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(m=!1,w(e),!g)if(null!==r(u))g=!0,D(k);else{var t=r(c);null!==t&&A(x,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,b(N),N=-1),h=!0;var a=f;try{for(w(n),p=r(u);null!==p&&(!(p.expirationTime>n)||e&&!I());){var o=p.callback;if("function"===typeof o){p.callback=null,f=p.priorityLevel;var s=o(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?p.callback=s:p===r(u)&&i(u),w(n)}else i(u);p=r(u)}if(null!==p)var l=!0;else{var d=r(c);null!==d&&A(x,d.startTime-n),l=!1}return l}finally{p=null,f=a,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,j=null,N=-1,C=5,E=-1;function I(){return!(t.unstable_now()-E<C)}function P(){if(null!==j){var e=t.unstable_now();E=e;var n=!0;try{n=j(!0,e)}finally{n?S():(_=!1,j=null)}}else _=!1}if("function"===typeof y)S=function(){y(P)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,O=T.port2;T.port1.onmessage=P,S=function(){O.postMessage(null)}}else S=function(){v(P,0)};function D(e){j=e,_||(_=!0,S())}function A(e,n){N=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,D(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(m?(b(N),N=-1):m=!0,A(x,a-o))):(e.sortIndex=s,n(u,e),g||h||(g=!0,D(k))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},286:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(630)),a=r(n(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r;let i=null,o=null,s=null,l=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(o="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),a=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&a&&a.length>1&&(s=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,s=null,l=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,l=200,u="OK")}catch(c){404===e.status&&""===t?(l=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(r=null===i||void 0===i?void 0:i.details)||void 0===r?void 0:r.includes("0 rows"))&&(i=null,l=200,u="OK"),i&&this.shouldThrowOnError)throw new a.default(i)}return{error:i,data:o,count:s,status:l,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(286));class a extends i.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i="undefined"===typeof r?"offset":`${r}.offset`,a="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.Accept)&&void 0!==o?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${l}"; options=${s};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=a},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},400:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},579:(e,t,n)=>{e.exports=n(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>o,Request:()=>s,Response:()=>l,default:()=>a,fetch:()=>i});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const i=r.fetch,a=r.fetch.bind(r),o=r.Headers,s=r.Request,l=r.Response},730:(e,t,n)=>{var r=n(43),i=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function g(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(h,e)||!d.call(f,e)&&(p.test(e)?h[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,b);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var R,M=Object.assign;function B(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var $=!1;function U(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function F(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case j:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){he.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,_e=null;function je(e){if(e=yi(e)){if("function"!==typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=xi(t),ke(e.stateNode,e.type,t))}}function Ne(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Ce(){if(Se){var e=Se,t=_e;if(_e=Se=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Ee(e,t){return e(t)}function Ie(){}var Pe=!1;function Te(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ee(e,t,n)}finally{Pe=!1,(null!==Se||null!==_e)&&(Ie(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(c)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ce){De=!1}function Le(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Re=!1,Me=null,Be=!1,$e=null,Ue={onError:function(e){Re=!0,Me=e}};function Fe(e,t,n,r,i,a,o,s,l){Re=!1,Me=null,Le.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(a(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Je=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=dt(s):0!==(a&=o)&&(r=dt(a))}else 0!==(o=n&~i)?r=dt(o):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,St,_t,jt,Nt=!1,Ct=[],Et=null,It=null,Pt=null,Tt=new Map,Ot=new Map,Dt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Rt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=bi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void jt(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function $t(e,t,n){Bt(e)&&n.delete(t)}function Ut(){Nt=!1,null!==Et&&Bt(Et)&&(Et=null),null!==It&&Bt(It)&&(It=null),null!==Pt&&Bt(Pt)&&(Pt=null),Tt.forEach($t),Ot.forEach($t)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Ft(t,e)}if(0<Ct.length){Ft(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Ft(Et,e),null!==It&&Ft(It,e),null!==Pt&&Ft(Pt,e),Tt.forEach(t),Ot.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var Wt=w.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,r){var i=yt,a=Wt.transition;Wt.transition=null;try{yt=1,qt(e,t,n,r)}finally{yt=i,Wt.transition=a}}function Gt(e,t,n,r){var i=yt,a=Wt.transition;Wt.transition=null;try{yt=4,qt(e,t,n,r)}finally{yt=i,Wt.transition=a}}function qt(e,t,n,r){if(Ht){var i=Kt(e,t,n,r);if(null===i)Hr(e,t,r,Jt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Et=Rt(Et,e,t,n,r,i),!0;case"dragenter":return It=Rt(It,e,t,n,r,i),!0;case"mouseover":return Pt=Rt(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Tt.set(a,Rt(Tt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Rt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<At.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&xt(a),null===(a=Kt(e,t,n,r))&&Hr(e,t,r,Jt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Jt=null;function Kt(e,t,n,r){if(Jt=null,null!==(e=bi(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),dn=M({},un,{view:0,detail:0}),pn=an(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=an(fn),gn=an(M({},fn,{dataTransfer:0})),mn=an(M({},dn,{relatedTarget:0})),vn=an(M({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=M({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(bn),wn=an(M({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function jn(){return _n}var Nn=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Nn),En=an(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn})),Pn=an(M({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Tn),Dn=[9,13,27,32],An=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Rn=c&&"TextEvent"in window&&!Ln,Mn=c&&(!An||Ln&&8<Ln&&11>=Ln),Bn=String.fromCharCode(32),$n=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Vn(e,t,n,r){Ne(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,qn=null;function Jn(e){Br(e,0)}function Kn(e){if(q(wi(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),qn=Gn=null)}function nr(e){if("value"===e.propertyName&&Kn(qn)){var t=[];Vn(t,qn,e,xe(e)),Te(Jn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(qn)}function ar(e,t){if("click"===e)return Kn(t)}function or(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,br=null,yr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==mr||mr!==J(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Gr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},_r={};function jr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Nr=jr("animationend"),Cr=jr("animationiteration"),Er=jr("animationstart"),Ir=jr("transitionend"),Pr=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Pr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Tr.length;Dr++){var Ar=Tr[Dr];Or(Ar.toLowerCase(),"on"+(Ar[0].toUpperCase()+Ar.slice(1)))}Or(Nr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(Er,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ir,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(Fe.apply(this,arguments),Re){if(!Re)throw Error(a(198));var c=Me;Re=!1,Me=null,Be||(Be=!0,$e=c)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,s,u),a=l}}}if(Be)throw e=$e,Be=!1,$e=null,e}function $r(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Fr]){e[Fr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Rr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Qt(t)){case 1:var i=Vt;break;case 4:i=Gt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=bi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Te(function(){var r=a,i=xe(n),o=[];e:{var s=Pr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Nr:case Cr:case Er:l=vn;break;case Ir:l=Pn;break;case"scroll":l=pn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var c=0!==(4&t),d=!c&&"scroll"===e,p=c?null!==s?s+"Capture":null:s;c=[];for(var f,h=r;null!==h;){var g=(f=h).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==p&&(null!=(g=Oe(h,p))&&c.push(Vr(h,g,f)))),d)break;h=h.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(u=n.relatedTarget||n.fromElement)||!bi(u)&&!u[hi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?bi(u):null)&&(u!==(d=ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=hn,g="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=En,g="onPointerLeave",p="onPointerEnter",h="pointer"),d=null==l?s:wi(l),f=null==u?s:wi(u),(s=new c(g,h+"leave",l,n,i)).target=d,s.relatedTarget=f,g=null,bi(i)===r&&((c=new c(p,h+"enter",u,n,i)).target=f,c.relatedTarget=d,g=c),d=g,l&&u)e:{for(p=u,h=0,f=c=l;f;f=qr(f))h++;for(f=0,g=p;g;g=qr(g))f++;for(;0<h-f;)c=qr(c),h--;for(;0<f-h;)p=qr(p),f--;for(;h--;){if(c===p||null!==p&&c===p.alternate)break e;c=qr(c),p=qr(p)}c=null}else c=null;null!==l&&Jr(o,s,l,c,!1),null!==u&&null!==d&&Jr(o,d,u,c,!0)}if("select"===(l=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Qn;else if(Hn(s))if(Yn)m=or;else{m=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Vn(o,m,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,br=null);break;case"focusout":br=vr=mr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,wr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(o,n,i)}var b;if(An)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zn?Un(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&zn&&(b=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(v=Gr(r,y)).length&&(y=new wn(y,e,null,n,i),o.push({event:y,listeners:v}),b?y.data=b:null!==(b=Fn(n))&&(y.data=b))),(b=Rn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:($n=!0,Bn);case"textInput":return(e=t.data)===Bn&&$n?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!An&&Un(e,t)?(e=en(),Zt=Xt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=b))}Br(o,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Vr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Vr(e,a,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Oe(n,a))&&o.unshift(Vr(n,l,s)):i||null!=(l=Oe(n,a))&&o.push(Vr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Kr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),pi="__reactFiber$"+di,fi="__reactProps$"+di,hi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,vi="__reactHandles$"+di;function bi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[pi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[pi]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xi(e){return e[fi]||null}var ki=[],Si=-1;function _i(e){return{current:e}}function ji(e){0>Si||(e.current=ki[Si],ki[Si]=null,Si--)}function Ni(e,t){Si++,ki[Si]=e.current,e.current=t}var Ci={},Ei=_i(Ci),Ii=_i(!1),Pi=Ci;function Ti(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){ji(Ii),ji(Ei)}function Ai(e,t,n){if(Ei.current!==Ci)throw Error(a(168));Ni(Ei,t),Ni(Ii,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,W(e)||"Unknown",i));return M({},n,r)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Pi=Ei.current,Ni(Ei,e),Ni(Ii,Ii.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,ji(Ii),ji(Ei),Ni(Ei,e)):ji(Ii),Ni(Ii,n)}var Bi=null,$i=!1,Ui=!1;function Fi(e){null===Bi?Bi=[e]:Bi.push(e)}function zi(){if(!Ui&&null!==Bi){Ui=!0;var e=0,t=yt;try{var n=Bi;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,$i=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),qe(Ze,zi),i}finally{yt=t,Ui=!1}}return null}var Wi=[],Hi=0,Vi=null,Gi=0,qi=[],Ji=0,Ki=null,Qi=1,Yi="";function Xi(e,t){Wi[Hi++]=Gi,Wi[Hi++]=Vi,Vi=e,Gi=t}function Zi(e,t,n){qi[Ji++]=Qi,qi[Ji++]=Yi,qi[Ji++]=Ki,Ki=e;var r=Qi;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qi=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else Qi=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Vi;)Vi=Wi[--Hi],Wi[Hi]=null,Gi=Wi[--Hi],Wi[Hi]=null;for(;e===Ki;)Ki=qi[--Ji],qi[Ji]=null,Yi=qi[--Ji],qi[Ji]=null,Qi=qi[--Ji],qi[Ji]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Tu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ki?{id:Qi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw pa(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=ra;e;)e=ui(e.nextSibling)}function fa(){ra=na=null,ia=!1}function ha(e){null===aa?aa=[e]:aa.push(e)}var ga=w.ReactCurrentBatchConfig;function ma(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Du(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&ba(a)===t.type)?((r=i(t,n.props)).ref=ma(e,t,n),r.return=e,r):((r=Au(n.type,n.key,n.props,null,e.mode,r)).ref=ma(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Au(t.type,t.key,t.props,null,e.mode,n)).ref=ma(e,null,t),n.return=e,n;case k:return(t=Bu(t,e.mode,n)).return=e,t;case O:return p(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lu(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);va(e,n)}return null}function h(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return h(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);va(t,r)}return null}function g(i,a,s,l){for(var u=null,c=null,d=a,g=a=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(i,d,s[g],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(i,d),a=o(v,a,g),null===c?u=v:c.sibling=v,c=v,d=m}if(g===s.length)return n(i,d),ia&&Xi(i,g),u;if(null===d){for(;g<s.length;g++)null!==(d=p(i,s[g],l))&&(a=o(d,a,g),null===c?u=d:c.sibling=d,c=d);return ia&&Xi(i,g),u}for(d=r(i,d);g<s.length;g++)null!==(m=h(d,i,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),a=o(m,a,g),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach(function(e){return t(i,e)}),ia&&Xi(i,g),u}function m(i,s,l,u){var c=L(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,g=s,m=s=0,v=null,b=l.next();null!==g&&!b.done;m++,b=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var y=f(i,g,b.value,u);if(null===y){null===g&&(g=v);break}e&&g&&null===y.alternate&&t(i,g),s=o(y,s,m),null===d?c=y:d.sibling=y,d=y,g=v}if(b.done)return n(i,g),ia&&Xi(i,m),c;if(null===g){for(;!b.done;m++,b=l.next())null!==(b=p(i,b.value,u))&&(s=o(b,s,m),null===d?c=b:d.sibling=b,d=b);return ia&&Xi(i,m),c}for(g=r(i,g);!b.done;m++,b=l.next())null!==(b=h(g,i,m,b.value,u))&&(e&&null!==b.alternate&&g.delete(null===b.key?m:b.key),s=o(b,s,m),null===d?c=b:d.sibling=b,d=b);return e&&g.forEach(function(e){return t(i,e)}),ia&&Xi(i,m),c}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===S){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===O&&ba(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=ma(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((a=Lu(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Au(o.type,o.key,o.props,null,r.mode,l)).ref=ma(r,a,o),l.return=r,r=l)}return s(r);case k:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Bu(o,r.mode,l)).return=r,r=a}return s(r);case O:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return g(r,a,o,l);if(L(o))return m(r,a,o,l);va(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mu(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var wa=ya(!0),xa=ya(!1),ka=_i(null),Sa=null,_a=null,ja=null;function Na(){ja=_a=Sa=null}function Ca(e){var t=ka.current;ji(ka),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){Sa=e,ja=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ys=!0),e.firstContext=null)}function Pa(e){var t=e._currentValue;if(ja!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===Sa)throw Error(a(308));_a=e,Sa.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Ta=null;function Oa(e){null===Ta?Ta=[e]:Ta.push(e)}function Da(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Oa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var La=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ba(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $a(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Oa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function za(e,t,n,r){var i=e.updateQueue;La=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(o=0,c=u=l=null,s=a;;){var p=s.lane,f=s.eventTime;if((r&p)===p){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,g=s;switch(p=t,f=n,g.tag){case 1:if("function"===typeof(h=g.payload)){d=h.call(f,d,p);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(p="function"===typeof(h=g.payload)?h.call(f,d,p):h)||void 0===p)break e;d=M({},d,p);break e;case 2:La=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,o|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Rl|=o,e.lanes=o,e.memoizedState=d}}function Wa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ha={},Va=_i(Ha),Ga=_i(Ha),qa=_i(Ha);function Ja(e){if(e===Ha)throw Error(a(174));return e}function Ka(e,t){switch(Ni(qa,t),Ni(Ga,e),Ni(Va,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ji(Va),Ni(Va,t)}function Qa(){ji(Va),ji(Ga),ji(qa)}function Ya(e){Ja(qa.current);var t=Ja(Va.current),n=le(t,e.type);t!==n&&(Ni(Ga,e),Ni(Va,n))}function Xa(e){Ga.current===e&&(ji(Va),ji(Ga))}var Za=_i(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,io=w.ReactCurrentBatchConfig,ao=0,oo=null,so=null,lo=null,uo=!1,co=!1,po=0,fo=0;function ho(){throw Error(a(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(ao=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:es,e=n(r,i),co){o=0;do{if(co=!1,po=0,25<=o)throw Error(a(301));o+=1,lo=so=null,t.updateQueue=null,ro.current=ts,e=n(r,i)}while(co)}if(ro.current=Xo,t=null!==so&&null!==so.next,ao=0,lo=so=oo=null,uo=!1,t)throw Error(a(300));return e}function vo(){var e=0!==po;return po=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function yo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=yo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var d=c.lane;if((ao&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=p,s=r):u=u.next=p,oo.lanes|=d,Rl|=d}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(ys=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Rl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ko(e){var t=yo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(ys=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function _o(e,t){var n=oo,r=yo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,ys=!0),r=r.queue,Ro(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,To(9,No.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(a(349));0!==(30&ao)||jo(n,t,i)}return i}function jo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function No(e,t,n,r){t.value=n,t.getSnapshot=r,Eo(t)&&Io(e)}function Co(e,t,n){return n(function(){Eo(t)&&Io(e)})}function Eo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Io(e){var t=Aa(e,1);null!==t&&nu(t,e,1,-1)}function Po(e){var t=bo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Jo.bind(null,oo,e),[t.memoizedState,e]}function To(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return yo().memoizedState}function Do(e,t,n,r){var i=bo();oo.flags|=e,i.memoizedState=To(1|t,n,void 0,void 0===r?null:r)}function Ao(e,t,n,r){var i=yo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&go(r,o.deps))return void(i.memoizedState=To(t,n,a,r))}oo.flags|=e,i.memoizedState=To(1|t,n,a,r)}function Lo(e,t){return Do(8390656,8,e,t)}function Ro(e,t){return Ao(2048,8,e,t)}function Mo(e,t){return Ao(4,2,e,t)}function Bo(e,t){return Ao(4,4,e,t)}function $o(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ao(4,4,$o.bind(null,t,e),n)}function Fo(){}function zo(e,t){var n=yo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=yo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&ao)?(e.baseState&&(e.baseState=!1,ys=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),oo.lanes|=n,Rl|=n,e.baseState=!0),t)}function Vo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{yt=n,io.transition=r}}function Go(){return yo().memoizedState}function qo(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ko(e))Qo(t,n);else if(null!==(n=Da(e,t,n,r))){nu(n,e,r,eu()),Yo(n,t,r)}}function Jo(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ko(e))Qo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Oa(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Da(e,t,i,r))&&(nu(n,e,r,i=eu()),Yo(n,t,r))}}function Ko(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Qo(e,t){co=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Xo={readContext:Pa,useCallback:ho,useContext:ho,useEffect:ho,useImperativeHandle:ho,useInsertionEffect:ho,useLayoutEffect:ho,useMemo:ho,useReducer:ho,useRef:ho,useState:ho,useDebugValue:ho,useDeferredValue:ho,useTransition:ho,useMutableSource:ho,useSyncExternalStore:ho,useId:ho,unstable_isNewReconciler:!1},Zo={readContext:Pa,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:Pa,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,$o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:Po,useDebugValue:Fo,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Vo.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=bo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Il)throw Error(a(349));0!==(30&ao)||jo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,To(9,No.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=bo(),t=Il.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=(Qi&~(1<<32-ot(Qi)-1)).toString(32)+n),0<(n=po++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Pa,useCallback:zo,useContext:Pa,useEffect:Ro,useImperativeHandle:Uo,useInsertionEffect:Mo,useLayoutEffect:Bo,useMemo:Wo,useReducer:xo,useRef:Oo,useState:function(){return xo(wo)},useDebugValue:Fo,useDeferredValue:function(e){return Ho(yo(),so.memoizedState,e)},useTransition:function(){return[xo(wo)[0],yo().memoizedState]},useMutableSource:So,useSyncExternalStore:_o,useId:Go,unstable_isNewReconciler:!1},ts={readContext:Pa,useCallback:zo,useContext:Pa,useEffect:Ro,useImperativeHandle:Uo,useInsertionEffect:Mo,useLayoutEffect:Bo,useMemo:Wo,useReducer:ko,useRef:Oo,useState:function(){return ko(wo)},useDebugValue:Fo,useDeferredValue:function(e){var t=yo();return null===so?t.memoizedState=e:Ho(t,so.memoizedState,e)},useTransition:function(){return[ko(wo)[0],yo().memoizedState]},useMutableSource:So,useSyncExternalStore:_o,useId:Go,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Ba(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=$a(e,a,i))&&(nu(t,e,i,r),Ua(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Ba(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=$a(e,a,i))&&(nu(t,e,i,r),Ua(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Ba(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=$a(e,i,r))&&(nu(t,e,r,n),Ua(t,e,r))}};function as(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function os(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Pa(a):(i=Oi(t)?Pi:Ei.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ti(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Pa(a):(a=Oi(t)?Pi:Ei.current,i.context=Ti(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),za(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do{n+=F(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Ba(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=r),ds(0,t)},n}function hs(e,t,n){(n=Ba(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ju.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ba(-1,1)).tag=2,$a(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=w.ReactCurrentOwner,ys=!1;function ws(e,t,n,r){t.child=null===e?xa(t,null,n,r):wa(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=mo(e,t,n,r,a,i),n=vo(),null===e||ys?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function ks(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ou(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Au(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Du(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(ys=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(ys=!0)}}return Ns(e,t,n,r,i)}function _s(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ni(Dl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ni(Dl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ni(Dl,Ol),Ol|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ni(Dl,Ol),Ol|=r;return ws(e,t,i,n),t.child}function js(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,r,i){var a=Oi(n)?Pi:Ei.current;return a=Ti(t,a),Ia(t,i),n=mo(e,t,n,r,a,i),r=vo(),null===e||ys?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Cs(e,t,n,r,i){if(Oi(n)){var a=!0;Ri(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Ws(e,t),os(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Pa(u):u=Ti(t,u=Oi(n)?Pi:Ei.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&ss(t,o,r,u),La=!1;var p=t.memoizedState;o.state=p,za(t,r,o,i),l=t.memoizedState,s!==r||p!==l||Ii.current||La?("function"===typeof c&&(rs(t,n,c,r),l=t.memoizedState),(s=La||as(t,n,s,r,p,l,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ma(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ns(t.type,s),o.props=u,d=t.pendingProps,p=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Pa(l):l=Ti(t,l=Oi(n)?Pi:Ei.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||p!==l)&&ss(t,o,r,l),La=!1,p=t.memoizedState,o.state=p,za(t,r,o,i);var h=t.memoizedState;s!==d||p!==h||Ii.current||La?("function"===typeof f&&(rs(t,n,f,r),h=t.memoizedState),(u=La||as(t,n,u,r,p,h,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Es(e,t,n,r,a,i)}function Es(e,t,n,r,i,a){js(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Hs(e,t,a);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=wa(t,e.child,null,a),t.child=wa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Ai(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ai(0,t.context,!1),Ka(e,t.containerInfo)}function Ps(e,t,n,r,i){return fa(),ha(i),t.flags|=256,ws(e,t,n,r),t.child}var Ts,Os,Ds,As,Ls={dehydrated:null,treeContext:null,retryLane:0};function Rs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,n){var r,i=t.pendingProps,o=Za.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ni(Za,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Ru(l,i,0,null),e=Lu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Rs(n),t.memoizedState=Ls,e):Bs(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,$s(e,t,s,r=cs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ru({mode:"visible",children:r.children},i,0,null),(o=Lu(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&wa(t,e.child,null,s),t.child.memoizedState=Rs(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return $s(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,$s(e,t,s,r=cs(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),ys||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),nu(r,e,i,-1))}return gu(),$s(e,t,s,r=cs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(qi[Ji++]=Qi,qi[Ji++]=Yi,qi[Ji++]=Ki,Qi=e.id,Yi=e.overflow,Ki=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Du(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Du(r,s):(s=Lu(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Rs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Du(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bs(e,t){return(t=Ru({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $s(e,t,n,r){return null!==r&&ha(r),wa(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function Fs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=Za.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ni(Za,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fs(t,!0,n,null,a);break;case"together":Fs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Du(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Oi(t.type)&&Di(),Gs(t),null;case 3:return r=t.stateNode,Qa(),ji(Ii),ji(Ei),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ou(aa),aa=null))),Os(e,t),Gs(t),null;case 5:Xa(t);var i=Ja(qa.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=Ja(Va.current),da(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[pi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":$r("cancel",r),$r("close",r);break;case"iframe":case"object":case"embed":$r("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)$r(Lr[i],r);break;case"source":$r("error",r);break;case"img":case"image":case"link":$r("error",r),$r("load",r);break;case"details":$r("toggle",r);break;case"input":Q(r,o),$r("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},$r("invalid",r);break;case"textarea":ie(r,o),$r("invalid",r)}for(var l in be(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&$r("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pi]=t,e[fi]=r,Ts(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":$r("cancel",e),$r("close",e),i=r;break;case"iframe":case"object":case"embed":$r("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)$r(Lr[i],e);i=r;break;case"source":$r("error",e),i=r;break;case"img":case"image":case"link":$r("error",e),$r("load",e),i=r;break;case"details":$r("toggle",e),i=r;break;case"input":Q(e,r),i=K(e,r),$r("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),$r("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),$r("invalid",e)}for(o in be(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&pe(e,c):"number"===typeof c&&pe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&$r("scroll",e):null!=c&&y(e,o,c,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)As(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ja(qa.current),Ja(Va.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Gs(t),null;case 13:if(ji(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))pa(),fa(),t.flags|=98560,o=!1;else if(o=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[pi]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(ou(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===Al&&(Al=3):gu())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Qa(),Os(e,t),null===e&&zr(t.stateNode.containerInfo),Gs(t),null;case 10:return Ca(t.type._context),Gs(t),null;case 19:if(ji(Za),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Vs(o,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Vs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ni(Za,1&Za.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>zl&&(t.flags|=128,r=!0,Vs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Gs(t),null}else 2*Ye()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Vs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=Za.current,Ni(Za,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Js(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qa(),ji(Ii),ji(Ei),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xa(t),null;case 13:if(ji(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ji(Za),null;case 4:return Qa(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Ts=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ja(Va.current);var a,o=null;switch(n){case"input":i=K(e,i),r=K(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in be(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&$r("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},As=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Qs=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Xs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_u(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){_u(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,dl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Qs||Zs(n,t);case 6:var r=cl,i=dl;cl=null,pl(e,t,n),dl=i,null!==(cl=r)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=dl,cl=n.stateNode.containerInfo,dl=!0,pl(e,t,n),cl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&el(n,t,o),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Qs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){_u(n,t,s)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,pl(e,t,n),Qs=r):pl(e,t,n);break;default:pl(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach(function(t){var r=Eu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));fl(o,s,i),cl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){_u(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){_u(e,e.return,m)}try{nl(5,e,e.return)}catch(m){_u(e,e.return,m)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{pe(i,"")}catch(m){_u(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),ye(l,s);var c=ye(l,o);for(s=0;s<u.length;s+=2){var d=u[s],p=u[s+1];"style"===d?me(i,p):"dangerouslySetInnerHTML"===d?de(i,p):"children"===d?pe(i,p):y(i,d,p,c)}switch(l){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;null!=h?ne(i,!!o.multiple,h,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){_u(e,e.return,m)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){_u(e,e.return,m)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){_u(e,e.return,m)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Fl=Ye())),4&r&&hl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(c=Qs)||d,gl(t,e),Qs=c):gl(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Xs=e,d=e.child;null!==d;){for(p=Xs=d;null!==Xs;){switch(h=(f=Xs).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zs(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){_u(r,n,m)}}break;case 5:Zs(f,f.return);break;case 22:if(null!==f.memoizedState){xl(p);continue}}null!==h?(h.return=f,Xs=h):xl(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{i=p.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=p.stateNode,s=void 0!==(u=p.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ge("display",s))}catch(m){_u(e,e.return,m)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(m){_u(e,e.return,m)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gl(t,e),vl(e),4&r&&hl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pe(i,""),r.flags&=-33),ul(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(s){_u(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Xs=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var i=Xs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ks;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Ks;var u=Qs;if(Ks=o,(Qs=l)&&!u)for(Xs=i;null!==Xs;)l=(o=Xs).child,22===o.tag&&null!==o.memoizedState?kl(i):null!==l?(l.return=o,Xs=l):kl(i);for(;null!==a;)Xs=a,yl(a,t,n),a=a.sibling;Xs=i,Ks=s,Qs=u}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xs=a):wl(e)}}function wl(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Wa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wa(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&zt(p)}}}break;default:throw Error(a(163))}Qs||512&t.flags&&il(t)}catch(f){_u(t,t.return,f)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function xl(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function kl(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_u(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){_u(t,i,l)}}var a=t.return;try{il(t)}catch(l){_u(t,a,l)}break;case 5:var o=t.return;try{il(t)}catch(l){_u(t,o,l)}}}catch(l){_u(t,t.return,l)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var Sl,_l=Math.ceil,jl=w.ReactCurrentDispatcher,Nl=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,El=0,Il=null,Pl=null,Tl=0,Ol=0,Dl=_i(0),Al=0,Ll=null,Rl=0,Ml=0,Bl=0,$l=null,Ul=null,Fl=0,zl=1/0,Wl=null,Hl=!1,Vl=null,Gl=null,ql=!1,Jl=null,Kl=0,Ql=0,Yl=null,Xl=-1,Zl=0;function eu(){return 0!==(6&El)?Ye():-1!==Xl?Xl:Xl=Ye()}function tu(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Tl?Tl&-Tl:null!==ga.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nu(e,t,n,r){if(50<Ql)throw Ql=0,Yl=null,Error(a(185));vt(e,n,r),0!==(2&El)&&e===Il||(e===Il&&(0===(2&El)&&(Ml|=n),4===Al&&su(e,Tl)),ru(e,r),1===n&&0===El&&0===(1&t.mode)&&(zl=Ye()+500,$i&&zi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=pt(e,e===Il?Tl:0);if(0===r)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){$i=!0,Fi(e)}(lu.bind(null,e)):Fi(lu.bind(null,e)),oi(function(){0===(6&El)&&zi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Iu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(a(327));var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var r=pt(e,e===Il?Tl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mu(e,r);else{t=r;var i=El;El|=2;var o=hu();for(Il===e&&Tl===t||(Wl=null,zl=Ye()+500,pu(e,t));;)try{bu();break}catch(l){fu(e,l)}Na(),jl.current=o,El=i,null!==Pl?t=0:(Il=null,Tl=0,t=Al)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(r=i,t=au(e,i))),1===t)throw n=Ll,pu(e,0),su(e,r),ru(e,Ye()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mu(e,r))&&(0!==(o=ht(e))&&(r=o,t=au(e,o))),1===t))throw n=Ll,pu(e,0),su(e,r),ru(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xu(e,Ul,Wl);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Fl+500-Ye())){if(0!==pt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xu.bind(null,e,Ul,Wl),t);break}xu(e,Ul,Wl);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ri(xu.bind(null,e,Ul,Wl),r);break}xu(e,Ul,Wl);break;default:throw Error(a(329))}}}return ru(e,Ye()),e.callbackNode===n?iu.bind(null,e):null}function au(e,t){var n=$l;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=mu(e,t))&&(t=Ul,Ul=n,null!==t&&ou(t)),e}function ou(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function su(e,t){for(t&=~Bl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&El))throw Error(a(327));ku();var t=pt(e,0);if(0===(1&t))return ru(e,Ye()),null;var n=mu(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Ll,pu(e,0),su(e,t),ru(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e,Ul,Wl),ru(e,Ye()),null}function uu(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(zl=Ye()+500,$i&&zi())}}function cu(e){null!==Jl&&0===Jl.tag&&0===(6&El)&&ku();var t=El;El|=1;var n=Cl.transition,r=yt;try{if(Cl.transition=null,yt=1,e)return e()}finally{yt=r,Cl.transition=n,0===(6&(El=t))&&zi()}}function du(){Ol=Dl.current,ji(Dl)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Qa(),ji(Ii),ji(Ei),no();break;case 5:Xa(r);break;case 4:Qa();break;case 13:case 19:ji(Za);break;case 10:Ca(r.type._context);break;case 22:case 23:du()}n=n.return}if(Il=e,Pl=e=Du(e.current,null),Tl=Ol=t,Al=0,Ll=null,Bl=Ml=Rl=0,Ul=$l=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function fu(e,t){for(;;){var n=Pl;try{if(Na(),ro.current=Xo,uo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(ao=0,lo=so=oo=null,co=!1,po=0,Nl.current=null,null===n||null===n.return){Al=1,Ll=t,Pl=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Tl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=ms(s);if(null!==h){h.flags&=-257,vs(h,s,l,0,t),1&h.mode&&gs(o,c,t),u=c;var g=(t=h).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){gs(o,c,t),gu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var v=ms(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),ha(us(u,l));break e}}o=u=us(u,l),4!==Al&&(Al=2),null===$l?$l=[o]:$l.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,fs(0,u,t));break e;case 1:l=u;var b=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gl||!Gl.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,hs(o,l,t));break e}}o=o.return}while(null!==o)}wu(n)}catch(w){t=w,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function hu(){var e=jl.current;return jl.current=Xo,null===e?Xo:e}function gu(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===Il||0===(268435455&Rl)&&0===(268435455&Ml)||su(Il,Tl)}function mu(e,t){var n=El;El|=2;var r=hu();for(Il===e&&Tl===t||(Wl=null,pu(e,t));;)try{vu();break}catch(i){fu(e,i)}if(Na(),El=n,jl.current=r,null!==Pl)throw Error(a(261));return Il=null,Tl=0,Al}function vu(){for(;null!==Pl;)yu(Pl)}function bu(){for(;null!==Pl&&!Ke();)yu(Pl)}function yu(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wu(e):Pl=t,Nl.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=Js(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Al=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Al&&(Al=5)}function xu(e,t,n){var r=yt,i=Cl.transition;try{Cl.transition=null,yt=1,function(e,t,n,r){do{ku()}while(null!==Jl);if(0!==(6&El))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Il&&(Pl=Il=null,Tl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Iu(tt,function(){return ku(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var s=yt;yt=1;var l=El;El|=4,Nl.current=null,function(e,t){if(ei=Ht,fr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,p=e,f=null;t:for(;;){for(var h;p!==n||0!==i&&3!==p.nodeType||(l=s+i),p!==o||0!==r&&3!==p.nodeType||(u=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(h=p.firstChild);)f=p,p=h;for(;;){if(p===e)break t;if(f===n&&++c===i&&(l=s),f===o&&++d===r&&(u=s),null!==(h=p.nextSibling))break;f=(p=f).parentNode}p=h}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(x){_u(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}g=tl,tl=!1}(e,n),ml(n,e),hr(ti),Ht=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Qe(),El=l,yt=s,Cl.transition=o}else e.current=n;if(ql&&(ql=!1,Jl=e,Kl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Kl)&&0!==e.tag&&ku(),o=e.pendingLanes,0!==(1&o)?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,zi()}(e,t,n,r)}finally{Cl.transition=i,yt=r}return null}function ku(){if(null!==Jl){var e=wt(Kl),t=Cl.transition,n=yt;try{if(Cl.transition=null,yt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,Kl=0,0!==(6&El))throw Error(a(331));var i=El;for(El|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(0!==(16&Xs.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Xs=c;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var p=d.child;if(null!==p)p.return=d,Xs=p;else for(;null!==Xs;){var f=(d=Xs).sibling,h=d.return;if(al(d),d===c){Xs=null;break}if(null!==f){f.return=h,Xs=f;break}Xs=h}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Xs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(o=Xs).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Xs=b;break e}Xs=o.return}}var y=e.current;for(Xs=y;null!==Xs;){var w=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Xs=w;else e:for(s=y;null!==Xs;){if(0!==(2048&(l=Xs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){_u(l,l.return,k)}if(l===s){Xs=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xs=x;break e}Xs=l.return}}if(El=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{yt=n,Cl.transition=t}}return!1}function Su(e,t,n){e=$a(e,t=fs(0,t=us(n,t),1),1),t=eu(),null!==e&&(vt(e,1,t),ru(e,t))}function _u(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=$a(t,e=hs(t,e=us(n,e),1),1),e=eu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function ju(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Tl&n)===n&&(4===Al||3===Al&&(130023424&Tl)===Tl&&500>Ye()-Fl?pu(e,0):Bl|=n),ru(e,t)}function Nu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Aa(e,t))&&(vt(e,t,n),ru(e,n))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nu(e,n)}function Eu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Nu(e,n)}function Iu(e,t){return qe(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tu(e,t,n,r){return new Pu(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Du(e,t){var n=e.alternate;return null===n?((n=Tu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Au(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ou(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Lu(n.children,i,o,t);case _:s=8,i|=8;break;case j:return(e=Tu(12,n,t,2|i)).elementType=j,e.lanes=o,e;case I:return(e=Tu(13,n,t,i)).elementType=I,e.lanes=o,e;case P:return(e=Tu(19,n,t,i)).elementType=P,e.lanes=o,e;case D:return Ru(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:s=10;break e;case C:s=9;break e;case E:s=11;break e;case T:s=14;break e;case O:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Tu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lu(e,t,n,r){return(e=Tu(7,e,r,t)).lanes=n,e}function Ru(e,t,n,r){return(e=Tu(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Mu(e,t,n){return(e=Tu(6,e,null,t)).lanes=n,e}function Bu(e,t,n){return(t=Tu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $u(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(e,t,n,r,i,a,o,s,l){return e=new $u(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Fu(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function zu(e,t,n,r,i,a,o,s,l){return(e=Uu(n,r,!0,e,0,a,0,s,l)).context=Fu(null),n=e.current,(a=Ba(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,$a(n,a,i),e.current.lanes=i,vt(e,i,r),ru(e,r),e}function Wu(e,t,n,r){var i=t.current,a=eu(),o=tu(i);return n=Fu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ba(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=$a(i,t,o))&&(nu(e,i,o,a),Ua(e,i,o)),o}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gu(e,t){Vu(e,t),(e=e.alternate)&&Vu(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)ys=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ys=!1,function(e,t,n){switch(t.tag){case 3:Is(t),fa();break;case 5:Ya(t);break;case 1:Oi(t.type)&&Ri(t);break;case 4:Ka(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ni(ka,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ni(Za,1&Za.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(Ni(Za,1&Za.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ni(Za,1&Za.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ni(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,_s(e,t,n)}return Hs(e,t,n)}(e,t,n);ys=0!==(131072&e.flags)}else ys=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Ti(t,Ei.current);Ia(t,n),i=mo(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Ri(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=Es(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===T)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Ns(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ns(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Is(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ma(e,t),za(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=us(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=us(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Ya(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),js(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Ms(e,t,n);case 4:return Ka(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ni(ka,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ii.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Ba(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ea(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ea(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Pa(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),ks(e,t,r,i=ns(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Ws(e,t),t.tag=1,Oi(r)?(e=!0,Ri(t)):e=!1,Ia(t,n),os(t,r,i),ls(t,r,i,n),Es(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return _s(e,t,n)}throw Error(a(156,t.tag))};var qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Ju(e){this._internalRoot=e}function Ku(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xu(){}function Zu(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hu(o);s.call(e)}}Wu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hu(o);a.call(e)}}var o=zu(t,r,e,0,null,!1,0,"",Xu);return e._reactRootContainer=o,e[hi]=o.current,zr(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hu(l);s.call(e)}}var l=Uu(e,0,!1,null,0,!1,0,"",Xu);return e._reactRootContainer=l,e[hi]=l.current,zr(8===e.nodeType?e.parentNode:e),cu(function(){Wu(t,l,n,r)}),l}(n,t,e,i,r);return Hu(o)}Ku.prototype.render=Ju.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wu(e,t,null,null)},Ku.prototype.unmount=Ju.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu(function(){Wu(null,e,null,null)}),t[hi]=null}},Ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),ru(t,Ye()),0===(6&El)&&(zl=Ye()+500,zi()))}break;case 13:cu(function(){var t=Aa(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}}),Gu(e,1)}},kt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)nu(t,e,134217728,eu());Gu(e,134217728)}},St=function(e){if(13===e.tag){var t=tu(e),n=Aa(e,t);if(null!==n)nu(n,e,t,eu());Gu(e,t)}},_t=function(){return yt},jt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},ke=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(a(90));q(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=uu,Ie=cu;var ec={usingClientEntryPoint:!1,Events:[yi,wi,xi,Ne,Ce,uu]},tc={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qu(e))throw Error(a(299));var n=!1,r="",i=qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uu(e,1,!1,null,0,n,0,r,i),e[hi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Ju(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Yu(t))throw Error(a(200));return Zu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zu(t,null,e,1,null!=n?n:null,i,0,o,s),e[hi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ku(t)},t.render=function(e,t,n){if(!Yu(t))throw Error(a(200));return Zu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yu(e))throw Error(a(40));return!!e._reactRootContainer&&(cu(function(){Zu(null,null,e,!1,function(){e._reactRootContainer=null,e[hi]=null})}),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(374));class a extends i.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const a=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}t.default=a},745:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const r=n(400);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`}},763:(e,t,n)=>{e.exports=n(983)},829:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:i}=t;this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let a=!1;const o=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new i.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),a||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=r(n(210));t.PostgrestClient=i.default;const a=r(n(829));t.PostgrestQueryBuilder=a.default;const o=r(n(736));t.PostgrestFilterBuilder=o.default;const s=r(n(374));t.PostgrestTransformBuilder=s.default;const l=r(n(286));t.PostgrestBuilder=l.default;const u=r(n(611));t.PostgrestError=u.default,t.default={PostgrestClient:i.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:l.default,PostgrestError:u.default}},983:(e,t)=>{var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case a:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case u:case p:case m:case g:case l:return e;default:return t}}case i:return t}}}function k(e){return x(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=p,t.Fragment=a,t.Lazy=m,t.Memo=g,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return k(e)||x(e)===c},t.isConcurrentMode=k,t.isContextConsumer=function(e){return x(e)===u},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===p},t.isFragment=function(e){return x(e)===a},t.isLazy=function(e){return x(e)===m},t.isMemo=function(e){return x(e)===g},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===d||e===s||e===o||e===f||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===u||e.$$typeof===p||e.$$typeof===b||e.$$typeof===y||e.$$typeof===w||e.$$typeof===v)},t.typeOf=x}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(43),i=n(391);const a={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const s=new Uint8Array(16);function l(){if(!o&&(o="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(s)}const u=[];for(let ou=0;ou<256;++ou)u.push((ou+256).toString(16).slice(1));function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]}const d=function(e,t,n){if(a.randomUUID&&!t&&!e)return a.randomUUID();const r=(e=e||{}).random||(e.rng||l)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return c(r)};function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,p(e,t)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(null,arguments)}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function v(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var x="function"===typeof Symbol&&Symbol.observable||"@@observable",k=function(){return Math.random().toString(36).substring(7).split("").join(".")},S={INIT:"@@redux/INIT"+k(),REPLACE:"@@redux/REPLACE"+k(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+k()}};function _(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function j(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(w(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(w(1));return n(j)(e,t)}if("function"!==typeof e)throw new Error(w(2));var i=e,a=t,o=[],s=o,l=!1;function u(){s===o&&(s=o.slice())}function c(){if(l)throw new Error(w(3));return a}function d(e){if("function"!==typeof e)throw new Error(w(4));if(l)throw new Error(w(5));var t=!0;return u(),s.push(e),function(){if(t){if(l)throw new Error(w(6));t=!1,u();var n=s.indexOf(e);s.splice(n,1),o=null}}}function p(e){if(!_(e))throw new Error(w(7));if("undefined"===typeof e.type)throw new Error(w(8));if(l)throw new Error(w(9));try{l=!0,a=i(a,e)}finally{l=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}return p({type:S.INIT}),(r={dispatch:p,subscribe:d,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(w(10));i=e,p({type:S.REPLACE})}})[x]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(w(11));function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[x]=function(){return this},e},r}function N(e,t){return function(){return t(e.apply(this,arguments))}}function C(e,t){if("function"===typeof e)return N(e,t);if("object"!==typeof e||null===e)throw new Error(w(16));var n={};for(var r in e){var i=e[r];"function"===typeof i&&(n[r]=N(i,t))}return n}function E(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var I=r.createContext(null);var P=function(e){e()},T=function(){return P};var O={notify:function(){},get:function(){return[]}};function D(e,t){var n,r=O;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=T(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=O)},getListeners:function(){return r}};return o}var A="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;const L=function(e){var t=e.store,n=e.context,i=e.children,a=(0,r.useMemo)(function(){var e=D(t);return{store:t,subscription:e}},[t]),o=(0,r.useMemo)(function(){return t.getState()},[t]);A(function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[a,o]);var s=n||I;return r.createElement(s.Provider,{value:a},i)};function R(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}var M=n(219),B=n.n(M),$=n(86),U=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],F=["reactReduxForwardedRef"],z=[],W=[null,null];function H(e,t){var n=e[1];return[t.payload,n+1]}function V(e,t,n){A(function(){return e.apply(void 0,t)},n)}function G(e,t,n,r,i,a,o){e.current=r,t.current=i,n.current=!1,a.current&&(a.current=null,o())}function q(e,t,n,r,i,a,o,s,l,u){if(e){var c=!1,d=null,p=function(){if(!c){var e,n,p=t.getState();try{e=r(p,i.current)}catch(f){n=f,d=f}n||(d=null),e===a.current?o.current||l():(a.current=e,s.current=e,o.current=!0,u({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=p,n.trySubscribe(),p();return function(){if(c=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var J=function(){return[null,0]};function K(e,t){void 0===t&&(t={});var n=t,i=n.getDisplayName,a=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,o=n.methodName,s=void 0===o?"connectAdvanced":o,l=n.renderCountProp,u=void 0===l?void 0:l,c=n.shouldHandleStateChanges,d=void 0===c||c,p=n.storeKey,f=void 0===p?"store":p,g=(n.withRef,n.forwardRef),m=void 0!==g&&g,v=n.context,b=void 0===v?I:v,y=R(n,U),w=b;return function(t){var n=t.displayName||t.name||"Component",i=a(n),o=h({},y,{getDisplayName:a,methodName:s,renderCountProp:u,shouldHandleStateChanges:d,storeKey:f,displayName:i,wrappedComponentName:n,WrappedComponent:t}),l=y.pure;var c=l?r.useMemo:function(e){return e()};function p(n){var i=(0,r.useMemo)(function(){var e=n.reactReduxForwardedRef,t=R(n,F);return[n.context,e,t]},[n]),a=i[0],s=i[1],l=i[2],u=(0,r.useMemo)(function(){return a&&a.Consumer&&(0,$.isContextConsumer)(r.createElement(a.Consumer,null))?a:w},[a,w]),p=(0,r.useContext)(u),f=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(p)&&Boolean(p.store);var g=f?n.store:p.store,m=(0,r.useMemo)(function(){return function(t){return e(t.dispatch,o)}(g)},[g]),v=(0,r.useMemo)(function(){if(!d)return W;var e=D(g,f?null:p.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[g,f,p]),b=v[0],y=v[1],x=(0,r.useMemo)(function(){return f?p:h({},p,{subscription:b})},[f,p,b]),k=(0,r.useReducer)(H,z,J),S=k[0][0],_=k[1];if(S&&S.error)throw S.error;var j=(0,r.useRef)(),N=(0,r.useRef)(l),C=(0,r.useRef)(),E=(0,r.useRef)(!1),I=c(function(){return C.current&&l===N.current?C.current:m(g.getState(),l)},[g,S,l]);V(G,[N,j,E,l,I,C,y]),V(q,[d,g,b,m,N,j,E,C,y,_],[g,b,m]);var P=(0,r.useMemo)(function(){return r.createElement(t,h({},I,{ref:s}))},[s,t,I]);return(0,r.useMemo)(function(){return d?r.createElement(u.Provider,{value:x},P):P},[u,P,x])}var g=l?r.memo(p):p;if(g.WrappedComponent=t,g.displayName=p.displayName=i,m){var v=r.forwardRef(function(e,t){return r.createElement(g,h({},e,{reactReduxForwardedRef:t}))});return v.displayName=i,v.WrappedComponent=t,B()(v,t)}return B()(g,t)}}function Q(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function Y(e,t){if(Q(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Q(e[n[i]],t[n[i]]))return!1;return!0}function X(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Z(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function ee(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Z(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=Z(i),i=r(t,n)),i},r}}const te=[function(e){return"function"===typeof e?ee(e):void 0},function(e){return e?void 0:X(function(e){return{dispatch:e}})},function(e){return e&&"object"===typeof e?X(function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)}):void 0}];const ne=[function(e){return"function"===typeof e?ee(e):void 0},function(e){return e?void 0:X(function(){return{}})}];function re(e,t,n){return h({},n,e,t)}const ie=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,s){var l=e(t,n,s);return o?i&&a(l,r)||(r=l):(o=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return re}}];var ae=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function oe(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function se(e,t,n,r,i){var a,o,s,l,u,c=i.areStatesEqual,d=i.areOwnPropsEqual,p=i.areStatePropsEqual,f=!1;function h(i,f){var h=!d(f,o),g=!c(i,a,f,o);return a=i,o=f,h&&g?(s=e(a,o),t.dependsOnOwnProps&&(l=t(r,o)),u=n(s,l,o)):h?(e.dependsOnOwnProps&&(s=e(a,o)),t.dependsOnOwnProps&&(l=t(r,o)),u=n(s,l,o)):g?function(){var t=e(a,o),r=!p(t,s);return s=t,r&&(u=n(s,l,o)),u}():u}return function(i,c){return f?h(i,c):(s=e(a=i,o=c),l=t(r,o),u=n(s,l,o),f=!0,u)}}function le(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=R(t,ae),o=n(e,a),s=r(e,a),l=i(e,a);return(a.pure?se:oe)(o,s,l,e,a)}var ue=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function ce(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function de(e,t){return e===t}function pe(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?K:n,i=t.mapStateToPropsFactories,a=void 0===i?ne:i,o=t.mapDispatchToPropsFactories,s=void 0===o?te:o,l=t.mergePropsFactories,u=void 0===l?ie:l,c=t.selectorFactory,d=void 0===c?le:c;return function(e,t,n,i){void 0===i&&(i={});var o=i,l=o.pure,c=void 0===l||l,p=o.areStatesEqual,f=void 0===p?de:p,g=o.areOwnPropsEqual,m=void 0===g?Y:g,v=o.areStatePropsEqual,b=void 0===v?Y:v,y=o.areMergedPropsEqual,w=void 0===y?Y:y,x=R(o,ue),k=ce(e,a,"mapStateToProps"),S=ce(t,s,"mapDispatchToProps"),_=ce(n,u,"mergeProps");return r(d,h({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:k,initMapDispatchToProps:S,initMergeProps:_,pure:c,areStatesEqual:f,areOwnPropsEqual:m,areStatePropsEqual:b,areMergedPropsEqual:w},x))}}const fe=pe();var he,ge=n(950);function me(e,t){var n=(0,r.useState)(function(){return{inputs:t,result:e()}})[0],i=(0,r.useRef)(!0),a=(0,r.useRef)(n),o=i.current||Boolean(t&&a.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,a.current.inputs))?a.current:{inputs:t,result:e()};return(0,r.useEffect)(function(){i.current=!1,a.current=o},[o]),o.result}he=ge.unstable_batchedUpdates,P=he;var ve=me,be=function(e,t){return me(function(){return e},t)},ye="Invariant failed";var we=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return{top:t,right:n,bottom:r,left:i,width:n-i,height:r-t,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}}},xe=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},ke=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},Se={top:0,right:0,bottom:0,left:0},_e=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?Se:n,i=e.border,a=void 0===i?Se:i,o=e.padding,s=void 0===o?Se:o,l=we(xe(t,r)),u=we(ke(t,a)),c=we(ke(u,s));return{marginBox:l,borderBox:we(t),paddingBox:u,contentBox:c,margin:r,border:a,padding:s}},je=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e){if(!e)throw new Error(ye)}(!1),n},Ne=function(e,t){var n,r,i=e.borderBox,a=e.border,o=e.margin,s=e.padding,l=(r=t,{top:(n=i).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return _e({borderBox:l,border:a,margin:o,padding:s})},Ce=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),Ne(e,t)},Ee=function(e,t){var n={top:je(t.marginTop),right:je(t.marginRight),bottom:je(t.marginBottom),left:je(t.marginLeft)},r={top:je(t.paddingTop),right:je(t.paddingRight),bottom:je(t.paddingBottom),left:je(t.paddingLeft)},i={top:je(t.borderTopWidth),right:je(t.borderRightWidth),bottom:je(t.borderBottomWidth),left:je(t.borderLeftWidth)};return _e({borderBox:e,margin:n,padding:r,border:i})},Ie=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return Ee(t,n)},Pe=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function Te(e,t){return e===t||!(!Pe(e)||!Pe(t))}function Oe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Te(e[n],t[n]))return!1;return!0}const De=function(e,t){var n;void 0===t&&(t=Oe);var r,i=[],a=!1;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a&&n===this&&t(o,i)||(r=e.apply(this,o),a=!0,n=this,i=o),r}};const Ae=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];t=i,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function Le(e,t){}Le.bind(null,"warn"),Le.bind(null,"error");function Re(){}function Me(e,t,n){var r=t.map(function(t){var r=function(e,t){return h({},e,{},t)}(n,t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}});return function(){r.forEach(function(e){e()})}}var Be="Invariant failed";function $e(e){this.message=e}function Ue(e,t){if(!e)throw new $e(Be)}$e.prototype.toString=function(){return this.message};var Fe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=Re,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof $e&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}f(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=Me(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof $e))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(r.Component),ze=function(e){return e+1},We=function(e,t){var n=e.droppableId===t.droppableId,r=ze(e.index),i=ze(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+i+"\n  "},He=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},Ve=function(e){return"\n  The item has returned to its starting position\n  of "+ze(e.index)+"\n"},Ge="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",qe=function(e){return"\n  You have lifted an item in position "+ze(e.source.index)+"\n"},Je=function(e){var t=e.destination;if(t)return We(e.source,t);var n=e.combine;return n?He(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Ke=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Ve(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+We(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+He(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Ve(e.source)+"\n  "},Qe={x:0,y:0},Ye=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Xe=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Ze=function(e,t){return e.x===t.x&&e.y===t.y},et=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},tt=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},nt=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},rt=function(e,t){return Math.min.apply(Math,t.map(function(t){return nt(e,t)}))},it=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},at=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},ot=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},st=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=we({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):we(e)},lt=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,a=function(e,t){return t?at(e,t.scroll.diff.displacement):e}(t.marginBox,i),o=function(e,t,n){var r;return n&&n.increasedBy?h({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(a,r,n);return{page:t,withPlaceholder:n,active:st(o,i)}},ut=function(e,t){e.frame||Ue(!1);var n=e.frame,r=Xe(t,n.scroll.initial),i=et(r),a=h({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}});return h({},e,{frame:a,subject:lt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a})})};function ct(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function dt(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function pt(e,t){if(e.find)return e.find(t);var n=dt(e,t);return-1!==n?e[n]:void 0}function ft(e){return Array.prototype.slice.call(e)}var ht=De(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),gt=De(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),mt=De(function(e){return ct(e)}),vt=De(function(e){return ct(e)}),bt=De(function(e,t){var n=vt(t).filter(function(t){return e===t.descriptor.droppableId}).sort(function(e,t){return e.descriptor.index-t.descriptor.index});return n});function yt(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function wt(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var xt=De(function(e,t){return t.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),kt=function(e,t){return e.descriptor.droppableId===t.descriptor.id},St={point:Qe,value:0},_t={invisible:{},visible:{},all:[]},jt={displaced:_t,displacedBy:St,at:null},Nt=function(e,t){return function(n){return e<=n&&n<=t}},Ct=function(e){var t=Nt(e.top,e.bottom),n=Nt(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var i=t(r.top)||t(r.bottom),a=n(r.left)||n(r.right);if(i&&a)return!0;var o=r.top<e.top&&r.bottom>e.bottom,s=r.left<e.left&&r.right>e.right;return!(!o||!s)||(o&&a||s&&i)}},Et=function(e){var t=Nt(e.top,e.bottom),n=Nt(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},It={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Pt={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Tt=function(e){var t=e.target,n=e.destination,r=e.viewport,i=e.withDroppableDisplacement,a=e.isVisibleThroughFrameFn,o=i?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:Qe;return at(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(o,n,a)&&function(e,t,n){return n(t)(e)}(o,r,a)},Ot=function(e){return Tt(h({},e,{isVisibleThroughFrameFn:Ct}))},Dt=function(e){return Tt(h({},e,{isVisibleThroughFrameFn:Et}))};function At(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,a=e.forceShouldAnimate,o=e.last;return t.reduce(function(e,t){var s=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return we(xe(n,r))}(t,r),l=t.descriptor.id;if(e.all.push(l),!Ot({target:s,destination:n,viewport:i,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var u=function(e,t,n){if("boolean"===typeof n)return n;if(!t)return!0;var r=t.invisible,i=t.visible;if(r[e])return!1;var a=i[e];return!a||a.shouldAnimate}(l,o,a),c={draggableId:l,shouldAnimate:u};return e.visible[l]=c,e},{all:[],visible:{},invisible:{}})}function Lt(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,a=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:_t,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:a}}}}function Rt(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,a=e.displacedBy,o=e.last,s=e.index,l=e.forceShouldAnimate,u=kt(t,r);if(null==s)return Lt({insideDestination:n,inHomeList:u,displacedBy:a,destination:r});var c=pt(n,function(e){return e.descriptor.index===s});if(!c)return Lt({insideDestination:n,inHomeList:u,displacedBy:a,destination:r});var d=xt(t,n),p=n.indexOf(c);return{displaced:At({afterDragging:d.slice(p),destination:r,displacedBy:a,last:o,viewport:i.frame,forceShouldAnimate:l}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Mt(e,t){return Boolean(t.effected[e])}var Bt=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,a=e.destination,o=e.insideDestination,s=e.previousImpact,l=e.viewport,u=e.afterCritical,c=s.at;if(c||Ue(!1),"REORDER"===c.type){var d=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var a=i.index,o=t?a+1:a-1,s=r[0].descriptor.index,l=r[r.length-1].descriptor.index;return o<s||o>(n?l:l+1)?null:o}({isMovingForward:t,isInHomeList:n,location:c.destination,insideDestination:o});return null==d?null:Rt({draggable:r,insideDestination:o,destination:a,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:d})}var p=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,a=e.afterCritical;if(!n.isCombineEnabled)return null;var o=i.draggableId,s=r[o].descriptor.index;return Mt(o,a)?t?s:s-1:t?s+1:s}({isMovingForward:t,destination:a,displaced:s.displaced,draggables:i,combine:c.combine,afterCritical:u});return null==p?null:Rt({draggable:r,insideDestination:o,destination:a,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:p})},$t=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=wt(n);i||Ue(!1);var a=i.draggableId,o=r[a].page.borderBox.center,s=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,a=Boolean(t.visible[r]||t.invisible[r]);return Mt(r,n)?a?Qe:et(i.point):a?i.point:Qe}({displaced:n.displaced,afterCritical:t,combineWith:a,displacedBy:n.displacedBy});return Ye(o,s)},Ut=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},Ft=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},zt=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return tt(t.line,n.marginBox[t.end]+Ut(t,r),Ft(t,n.marginBox,r))},Wt=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return tt(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),Ft(t,n.marginBox,r))},Ht=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,a=e.afterCritical,o=bt(i.descriptor.id,r),s=n.page,l=i.axis;if(!o.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return tt(t.line,n.contentBox[t.start]+Ut(t,r),Ft(t,n.contentBox,r))}({axis:l,moveInto:i.page,isMoving:s});var u=t.displaced,c=t.displacedBy,d=u.all[0];if(d){var p=r[d];if(Mt(d,a))return Wt({axis:l,moveRelativeTo:p.page,isMoving:s});var f=Ne(p.page,c.point);return Wt({axis:l,moveRelativeTo:f,isMoving:s})}var h=o[o.length-1];if(h.descriptor.id===n.descriptor.id)return s.borderBox.center;if(Mt(h.descriptor.id,a)){var g=Ne(h.page,et(a.displacedBy.point));return zt({axis:l,moveRelativeTo:g,isMoving:s})}return zt({axis:l,moveRelativeTo:h.page,isMoving:s})},Vt=function(e,t){var n=e.frame;return n?Ye(t,n.scroll.diff.displacement):t},Gt=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,a=e.afterCritical,o=n.page.borderBox.center,s=t.at;return r&&s?"REORDER"===s.type?Ht({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:a}):$t({impact:t,draggables:i,afterCritical:a}):o}(e),n=e.droppable;return n?Vt(n,t):t},qt=function(e,t){var n=Xe(t,e.scroll.initial),r=et(n);return{frame:we({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Jt(e,t){return e.map(function(e){return t[e]})}var Kt=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=function(e,t){return Ye(e.scroll.diff.displacement,t)}(e.viewport,t),i=Xe(r,n.page.borderBox.center);return Ye(n.client.borderBox.center,i)},Qt=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,a=e.withDroppableDisplacement,o=e.onlyOnMainAxis,s=void 0!==o&&o,l=Xe(r,t.page.borderBox.center),u={target:at(t.page.borderBox,l),destination:n,withDroppableDisplacement:a,viewport:i};return s?function(e){return Tt(h({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=Nt(e.top,e.bottom),r=Nt(e.left,e.right);return function(e){return t===It?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(u):Dt(u)},Yt=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,a=e.previousImpact,o=e.viewport,s=e.previousPageBorderBoxCenter,l=e.previousClientSelection,u=e.afterCritical;if(!r.isEnabled)return null;var c=bt(r.descriptor.id,i),d=kt(n,r),p=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,a=e.previousImpact;if(!r.isCombineEnabled)return null;if(!yt(a))return null;function o(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return h({},a,{at:t})}var s=a.displaced.all,l=s.length?s[0]:null;if(t)return l?o(l):null;var u=xt(n,i);if(!l)return u.length?o(u[u.length-1].descriptor.id):null;var c=dt(u,function(e){return e.descriptor.id===l});-1===c&&Ue(!1);var d=c-1;return d<0?null:o(u[d].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:c,previousImpact:a})||Bt({isMovingForward:t,isInHomeList:d,draggable:n,draggables:i,destination:r,insideDestination:c,previousImpact:a,viewport:o,afterCritical:u});if(!p)return null;var f=Gt({impact:p,draggable:n,droppable:r,draggables:i,afterCritical:u});if(Qt({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Kt({pageBorderBoxCenter:f,draggable:n,viewport:o}),impact:p,scrollJumpRequest:null};var g=Xe(f,s),m=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,a=e.maxScrollChange,o=qt(n,Ye(n.scroll.current,a)),s=r.frame?ut(r,Ye(r.frame.scroll.current,a)):r,l=t.displaced,u=At({afterDragging:Jt(l.all,i),destination:r,displacedBy:t.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),c=At({afterDragging:Jt(l.all,i),destination:s,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),d={},p={},f=[l,u,c];return l.all.forEach(function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,f);t?p[e]=t:d[e]=!0}),h({},t,{displaced:{all:l.all,invisible:d,visible:p}})}({impact:p,viewport:o,destination:r,draggables:i,maxScrollChange:g});return{clientSelection:l,impact:m,scrollJumpRequest:g}},Xt=function(e){var t=e.subject.active;return t||Ue(!1),t},Zt=function(e,t){var n=e.page.borderBox.center;return Mt(e.descriptor.id,t)?Xe(n,t.displacedBy.point):n},en=function(e,t){var n=e.page.borderBox;return Mt(e.descriptor.id,t)?at(n,et(t.displacedBy.point)):n},tn=De(function(e,t){var n=t[e.line];return{value:n,point:tt(e.line,n)}}),nn=function(e,t){return h({},e,{scroll:h({},e.scroll,{max:t})})},rn=function(e,t,n){var r=e.frame;kt(t,e)&&Ue(!1),e.subject.withPlaceholder&&Ue(!1);var i=tn(e.axis,t.displaceBy).point,a=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return tt(r.line,t[r.line]);var i=e.subject.page.contentBox[r.size],a=bt(e.descriptor.id,n).reduce(function(e,t){return e+t.client.marginBox[r.size]},0)+t[r.line]-i;return a<=0?null:tt(r.line,a)}(e,i,n),o={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return h({},e,{subject:lt({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame})});var s=a?Ye(r.scroll.max,a):r.scroll.max,l=nn(r,s);return h({},e,{subject:lt({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:l}),frame:l})},an=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,a=e.draggables,o=e.droppables,s=e.viewport,l=e.afterCritical,u=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,a=e.viewport,o=r.subject.active;if(!o)return null;var s=r.axis,l=Nt(o[s.start],o[s.end]),u=mt(i).filter(function(e){return e!==r}).filter(function(e){return e.isEnabled}).filter(function(e){return Boolean(e.subject.active)}).filter(function(e){return Ct(a.frame)(Xt(e))}).filter(function(e){var n=Xt(e);return t?o[s.crossAxisEnd]<n[s.crossAxisEnd]:n[s.crossAxisStart]<o[s.crossAxisStart]}).filter(function(e){var t=Xt(e),n=Nt(t[s.start],t[s.end]);return l(t[s.start])||l(t[s.end])||n(o[s.start])||n(o[s.end])}).sort(function(e,n){var r=Xt(e)[s.crossAxisStart],i=Xt(n)[s.crossAxisStart];return t?r-i:i-r}).filter(function(e,t,n){return Xt(e)[s.crossAxisStart]===Xt(n[0])[s.crossAxisStart]});if(!u.length)return null;if(1===u.length)return u[0];var c=u.filter(function(e){return Nt(Xt(e)[s.start],Xt(e)[s.end])(n[s.line])});return 1===c.length?c[0]:c.length>1?c.sort(function(e,t){return Xt(e)[s.start]-Xt(t)[s.start]})[0]:u.sort(function(e,t){var r=rt(n,ot(Xt(e))),i=rt(n,ot(Xt(t)));return r!==i?r-i:Xt(e)[s.start]-Xt(t)[s.start]})[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:o,viewport:s});if(!u)return null;var c=bt(u.descriptor.id,a),d=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,a=e.afterCritical,o=i.filter(function(e){return Dt({target:en(e,a),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(e,n){var i=nt(t,Vt(r,Zt(e,a))),o=nt(t,Vt(r,Zt(n,a)));return i<o?-1:o<i?1:e.descriptor.index-n.descriptor.index});return o[0]||null}({pageBorderBoxCenter:n,viewport:s,destination:u,insideDestination:c,afterCritical:l}),p=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,a=e.draggables,o=e.destination,s=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var u={displaced:_t,displacedBy:St,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},c=Gt({impact:u,draggable:i,droppable:o,draggables:a,afterCritical:l}),d=kt(i,o)?o:rn(o,i,a);return Qt({draggable:i,destination:d,newPageBorderBoxCenter:c,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?u:null}var p=Boolean(t[o.axis.line]<=n.page.borderBox.center[o.axis.line]),f=function(){var e=n.descriptor.index;return n.descriptor.id===i.descriptor.id||p?e:e+1}(),h=tn(o.axis,i.displaceBy);return Rt({draggable:i,insideDestination:r,destination:o,viewport:s,displacedBy:h,last:_t,index:f})}({previousPageBorderBoxCenter:n,destination:u,draggable:r,draggables:a,moveRelativeTo:d,insideDestination:c,viewport:s,afterCritical:l});if(!p)return null;var f=Gt({impact:p,draggable:r,droppable:u,draggables:a,afterCritical:l});return{clientSelection:Kt({pageBorderBoxCenter:f,draggable:r,viewport:s}),impact:p,scrollJumpRequest:null}},on=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},sn=function(e){var t=e.state,n=e.type,r=function(e,t){var n=on(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),i=Boolean(r),a=t.dimensions.droppables[t.critical.droppable.id],o=r||a,s=o.axis.direction,l="vertical"===s&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===s&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(l&&!i)return null;var u="MOVE_DOWN"===n||"MOVE_RIGHT"===n,c=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,p=t.dimensions,f=p.draggables,h=p.droppables;return l?Yt({isMovingForward:u,previousPageBorderBoxCenter:d,draggable:c,destination:o,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):an({isMovingForward:u,previousPageBorderBoxCenter:d,draggable:c,isOver:o,draggables:f,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function ln(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function un(e){var t=Nt(e.top,e.bottom),n=Nt(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function cn(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=mt(r).filter(function(e){if(!e.isEnabled)return!1;var n,r,i=e.subject.active;if(!i)return!1;if(r=i,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(un(i)(t.center))return!0;var a=e.axis,o=i.center[a.crossAxisLine],s=t[a.crossAxisStart],l=t[a.crossAxisEnd],u=Nt(i[a.crossAxisStart],i[a.crossAxisEnd]),c=u(s),d=u(l);return!c&&!d||(c?s<o:l>o)});return i.length?1===i.length?i[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,a=r.map(function(e){var n=e.axis,r=tt(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:nt(i,r)}}).sort(function(e,t){return t.distance-e.distance});return a[0]?a[0].id:null}({pageBorderBox:t,draggable:n,candidates:i}):null}var dn=function(e,t){return we(at(e,t))};function pn(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var fn=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,a=e.previousImpact,o=e.viewport,s=e.afterCritical,l=dn(n.page.borderBox,t),u=cn({pageBorderBox:l,draggable:n,droppables:i});if(!u)return jt;var c=i[u],d=bt(c.descriptor.id,r),p=function(e,t){var n=e.frame;return n?dn(t,n.scroll.diff.value):t}(c,l);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,a=e.insideDestination,o=e.afterCritical;if(!i.isCombineEnabled)return null;var s=i.axis,l=tn(i.axis,t.displaceBy),u=l.value,c=n[s.start],d=n[s.end],p=pt(xt(t,a),function(e){var t=e.descriptor.id,n=e.page.borderBox,i=n[s.size]/4,a=Mt(t,o),l=pn({displaced:r.displaced,id:t});return a?l?d>n[s.start]+i&&d<n[s.end]-i:c>n[s.start]-u+i&&c<n[s.end]-u-i:l?d>n[s.start]+u+i&&d<n[s.end]+u-i:c>n[s.start]+i&&c<n[s.end]-i});return p?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:i.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:p,draggable:n,previousImpact:a,destination:c,insideDestination:d,afterCritical:s})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,a=e.last,o=e.viewport,s=e.afterCritical,l=r.axis,u=tn(r.axis,n.displaceBy),c=u.value,d=t[l.start],p=t[l.end],f=function(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:pt(xt(n,i),function(e){var t=e.descriptor.id,n=e.page.borderBox.center[l.line],r=Mt(t,s),i=pn({displaced:a,id:t});return r?i?p<=n:d<n-c:i?p<=n+c:d<n}),inHomeList:kt(n,r)});return Rt({draggable:n,insideDestination:i,destination:r,viewport:o,last:a,displacedBy:u,index:f})}({pageBorderBoxWithDroppableScroll:p,draggable:n,destination:c,insideDestination:d,last:a.displaced,viewport:o,afterCritical:s})},hn=function(e,t){var n;return h({},e,((n={})[t.descriptor.id]=t,n))},gn=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,i=on(t),a=on(n);if(!i)return r;if(i===a)return r;var o=r[i];if(!o.subject.withPlaceholder)return r;var s=function(e){var t=e.subject.withPlaceholder;t||Ue(!1);var n=e.frame;if(!n)return h({},e,{subject:lt({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||Ue(!1);var i=nn(n,r);return h({},e,{subject:lt({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null}),frame:i})}(o);return hn(r,s)},mn=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,a=e.impact,o=e.scrollJumpRequest,s=i||t.viewport,l=r||t.dimensions,u=n||t.current.client.selection,c=Xe(u,t.initial.client.selection),d={offset:c,selection:u,borderBoxCenter:Ye(t.initial.client.borderBoxCenter,c)},p={selection:Ye(d.selection,s.scroll.current),borderBoxCenter:Ye(d.borderBoxCenter,s.scroll.current),offset:Ye(d.offset,s.scroll.diff.value)},f={client:d,page:p};if("COLLECTING"===t.phase)return h({phase:"COLLECTING"},t,{dimensions:l,viewport:s,current:f});var g=l.draggables[t.critical.draggable.id],m=a||fn({pageOffset:p.offset,draggable:g,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),v=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,a=e.impact,o=gn({previousImpact:i,impact:a,droppables:r}),s=on(a);if(!s)return o;var l=r[s];if(kt(t,l))return o;if(l.subject.withPlaceholder)return o;var u=rn(l,t,n);return hn(o,u)}({draggable:g,impact:m,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return h({},t,{current:f,dimensions:{draggables:l.draggables,droppables:v},impact:m,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:!o&&null})};var vn=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,a=e.forceShouldAnimate,o=t.displaced,s=function(e,t){return e.map(function(e){return t[e]})}(o.all,r);return h({},t,{displaced:At({afterDragging:s,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:a,last:o})})},bn=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,a=e.viewport,o=e.afterCritical,s=Gt({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:o});return Kt({pageBorderBoxCenter:s,draggable:n,viewport:a})},yn=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&Ue(!1);var i=t.impact,a=r||t.viewport,o=n||t.dimensions,s=o.draggables,l=o.droppables,u=s[t.critical.draggable.id],c=on(i);c||Ue(!1);var d=l[c],p=vn({impact:i,viewport:a,destination:d,draggables:s}),f=bn({impact:p,draggable:u,droppable:d,draggables:s,viewport:a,afterCritical:t.afterCritical});return mn({impact:p,clientSelection:f,state:t,dimensions:o,viewport:a})},wn=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,a=tn(n.axis,t.displaceBy),o=bt(n.descriptor.id,r),s=o.indexOf(t);-1===s&&Ue(!1);var l,u=o.slice(s+1),c=u.reduce(function(e,t){return e[t.descriptor.id]=!0,e},{}),d={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:a,effected:c};return{impact:{displaced:At({afterDragging:u,destination:n,displacedBy:a,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:d}},xn=function(e){0},kn=function(e){0},Sn=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map(function(e){var t=e.descriptor.droppableId,a=function(e){var t=e.frame;return t||Ue(!1),t}(n[t]),o=a.scroll.diff.value,s=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=Ne(t.client,n),a=Ce(i,r);return h({},t,{placeholder:h({},t.placeholder,{client:i}),client:i,page:a})}({draggable:e,offset:Ye(i,o),initialWindowScroll:r.scroll.initial});return s})},_n=function(e){return"SNAP"===e.movementMode},jn=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:hn(e.droppables,t)}}(e.dimensions,t);return!_n(e)||n?mn({state:e,dimensions:r}):yn({state:e,dimensions:r})};function Nn(e){return e.isDragging&&"SNAP"===e.movementMode?h({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Cn={phase:"IDLE",completed:null,shouldFlush:!1},En=function(e,t){if(void 0===e&&(e=Cn),"FLUSH"===t.type)return h({},Cn,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&Ue(!1);var n=t.payload,r=n.critical,i=n.clientSelection,a=n.viewport,o=n.dimensions,s=n.movementMode,l=o.draggables[r.draggable.id],u=o.droppables[r.droppable.id],c={selection:i,borderBoxCenter:l.client.borderBox.center,offset:Qe},d={client:c,page:{selection:Ye(c.selection,a.scroll.initial),borderBoxCenter:Ye(c.selection,a.scroll.initial),offset:Ye(c.selection,a.scroll.diff.value)}},p=mt(o.droppables).every(function(e){return!e.isFixedOnPage}),f=wn({draggable:l,home:u,draggables:o.draggables,viewport:a}),g=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:o,initial:d,current:d,isWindowScrollAllowed:p,impact:g,afterCritical:f.afterCritical,onLiftImpact:g,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&Ue(!1),h({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&Ue(!1),function(e){var t=e.state,n=e.published;xn();var r=n.modified.map(function(e){var n=t.dimensions.droppables[e.droppableId];return ut(n,e.scroll)}),i=h({},t.dimensions.droppables,{},ht(r)),a=gt(Sn({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),o=h({},t.dimensions.draggables,{},a);n.removals.forEach(function(e){delete o[e]});var s={droppables:i,draggables:o},l=on(t.impact),u=l?s.droppables[l]:null,c=s.draggables[t.critical.draggable.id],d=s.droppables[t.critical.droppable.id],p=wn({draggable:c,home:d,draggables:o,viewport:t.viewport}),f=p.impact,g=p.afterCritical,m=u&&u.isCombineEnabled?t.impact:f,v=fn({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:m,viewport:t.viewport,afterCritical:g});kn();var b=h({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:f,dimensions:s,afterCritical:g,forceShouldAnimate:!1});return"COLLECTING"===t.phase?b:h({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;ln(e)||Ue(!1);var m=t.payload.client;return Ze(m,e.current.client.selection)?e:mn({state:e,clientSelection:m,impact:_n(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return Nn(e);if("COLLECTING"===e.phase)return Nn(e);ln(e)||Ue(!1);var v=t.payload,b=v.id,y=v.newScroll,w=e.dimensions.droppables[b];if(!w)return e;var x=ut(w,y);return jn(e,x,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;ln(e)||Ue(!1);var k=t.payload,S=k.id,_=k.isEnabled,j=e.dimensions.droppables[S];j||Ue(!1),j.isEnabled===_&&Ue(!1);var N=h({},j,{isEnabled:_});return jn(e,N,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;ln(e)||Ue(!1);var C=t.payload,E=C.id,I=C.isCombineEnabled,P=e.dimensions.droppables[E];P||Ue(!1),P.isCombineEnabled===I&&Ue(!1);var T=h({},P,{isCombineEnabled:I});return jn(e,T,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;ln(e)||Ue(!1),e.isWindowScrollAllowed||Ue(!1);var O=t.payload.newScroll;if(Ze(e.viewport.scroll.current,O))return Nn(e);var D=qt(e.viewport,O);return _n(e)?yn({state:e,viewport:D}):mn({state:e,viewport:D})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!ln(e))return e;var A=t.payload.maxScroll;if(Ze(A,e.viewport.scroll.max))return e;var L=h({},e.viewport,{scroll:h({},e.viewport.scroll,{max:A})});return h({phase:"DRAGGING"},e,{viewport:L})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&Ue(!1);var R=sn({state:e,type:t.type});return R?mn({state:e,impact:R.impact,clientSelection:R.clientSelection,scrollJumpRequest:R.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var M=t.payload.reason;return"COLLECTING"!==e.phase&&Ue(!1),h({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:M})}if("DROP_ANIMATE"===t.type){var B=t.payload,$=B.completed,U=B.dropDuration,F=B.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&Ue(!1),{phase:"DROP_ANIMATING",completed:$,dropDuration:U,newHomeClientOffset:F,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},In=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},Pn=function(){return{type:"COLLECTION_STARTING",payload:null}},Tn=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},On=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},Dn=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},An=function(e){return{type:"MOVE",payload:e}},Ln=function(){return{type:"MOVE_UP",payload:null}},Rn=function(){return{type:"MOVE_DOWN",payload:null}},Mn=function(){return{type:"MOVE_RIGHT",payload:null}},Bn=function(){return{type:"MOVE_LEFT",payload:null}},$n=function(e){return{type:"DROP_COMPLETE",payload:e}},Un=function(e){return{type:"DROP",payload:e}},Fn=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var zn="cubic-bezier(.2,1,.1,1)",Wn={drop:0,combining:.7},Hn={drop:.75},Vn=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",Gn={fluid:"opacity "+Vn,snap:"transform "+Vn+", opacity "+Vn,drop:function(e){var t=e+"s "+zn;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Vn,placeholder:"height "+Vn+", width "+Vn+", margin "+Vn},qn=function(e){return Ze(e,Qe)?null:"translate("+e.x+"px, "+e.y+"px)"},Jn=qn,Kn=function(e,t){var n=qn(e);return n?t?n+" scale("+Hn.drop+")":n:null},Qn=.33,Yn=.55,Xn=Yn-Qn,Zn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var i=t(),a=r.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&Ue(!1),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&Ue(!1);var o=i.critical,s=i.dimensions,l=s.draggables[i.critical.draggable.id],u=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,a=e.viewport,o=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:h({},r,{displaced:_t}),didDropInsideDroppable:!0}:{impact:vn({draggables:t,impact:o,destination:i,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),c=u.impact,d=u.didDropInsideDroppable,p=d?yt(c):null,f=d?wt(c):null,g={index:o.draggable.index,droppableId:o.droppable.id},m={draggableId:l.descriptor.id,type:l.descriptor.type,source:g,reason:a,mode:i.movementMode,destination:p,combine:f},v=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,a=e.afterCritical,o=r.draggables,s=r.droppables,l=on(t),u=l?s[l]:null,c=s[n.descriptor.droppableId],d=bn({impact:t,draggable:n,draggables:o,afterCritical:a,droppable:u||c,viewport:i});return Xe(d,n.client.borderBox.center)}({impact:c,draggable:l,dimensions:s,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:c};if(!Ze(i.current.client.offset,v)||Boolean(m.combine)){var y=function(e){var t=e.current,n=e.destination,r=e.reason,i=nt(t,n);if(i<=0)return Qn;if(i>=1500)return Yn;var a=Qn+Xn*(i/1500);return Number(("CANCEL"===r?.6*a:a).toFixed(2))}({current:i.current.client.offset,destination:v,reason:a});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:v,dropDuration:y,completed:b}))}else n($n({completed:b}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:a}))}else e(r)}}},er=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function tr(e){var t=e.onWindowScroll;var n=Ae(function(){t(er())}),r=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(n),i=Re;function a(){return i!==Re}return{start:function(){a()&&Ue(!1),i=Me(window,[r])},stop:function(){a()||Ue(!1),n.cancel(),i(),i=Re},isActive:a}}var nr=function(e){var t=tr({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},rr=function(){var e=[];return{add:function(t){var n=setTimeout(function(){return function(t){var n=dt(e,function(e){return e.timerId===t});-1===n&&Ue(!1),e.splice(n,1)[0].callback()}(n)}),r={timerId:n,callback:t};e.push(r)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach(function(e){clearTimeout(e.timerId),e.callback()})}}}},ir=function(e,t){xn(),t(),kn()},ar=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},or=function(e,t,n,r){if(e){var i=function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),i=function(i){t||n||(t=!0,e(i),clearTimeout(r))};return i.wasCalled=function(){return t},i}(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}else n(r(t))},sr=function(e,t){var n=function(e,t){var n=rr(),r=null,i=function(n){r||Ue(!1),r=null,ir(0,function(){return or(e().onDragEnd,n,t,Ke)})};return{beforeCapture:function(t,n){r&&Ue(!1),ir(0,function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})})},beforeStart:function(t,n){r&&Ue(!1),ir(0,function(){var r=e().onBeforeDragStart;r&&r(ar(t,n))})},start:function(i,a){r&&Ue(!1);var o=ar(i,a);r={mode:a,lastCritical:i,lastLocation:o.source,lastCombine:null},n.add(function(){ir(0,function(){return or(e().onDragStart,o,t,qe)})})},update:function(i,a){var o=yt(a),s=wt(a);r||Ue(!1);var l=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(i,r.lastCritical);l&&(r.lastCritical=i);var u,c,d=(c=o,!(null==(u=r.lastLocation)&&null==c||null!=u&&null!=c&&u.droppableId===c.droppableId&&u.index===c.index));d&&(r.lastLocation=o);var p=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(r.lastCombine,s);if(p&&(r.lastCombine=s),l||d||p){var f=h({},ar(i,r.mode),{combine:s,destination:o});n.add(function(){ir(0,function(){return or(e().onDragUpdate,f,t,Je)})})}},flush:function(){r||Ue(!1),n.flush()},drop:i,abort:function(){if(r){var e=h({},ar(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var i=r.payload.critical;return n.beforeStart(i,r.payload.movementMode),t(r),void n.start(i,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var a=r.payload.completed.result;return n.flush(),t(r),void n.drop(a)}if(t(r),"FLUSH"!==r.type){var o=e.getState();"DRAGGING"===o.phase&&n.update(o.critical,o.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},lr=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&Ue(!1),e.dispatch($n({completed:r.completed}))}else t(n)}}},ur=function(e){var t=null,n=null;return function(r){return function(i){if("FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type&&"DROP_ANIMATION_FINISHED"!==i.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(i),"DROP_ANIMATE"===i.type){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame(function(){n=null,t=Me(window,[a])})}}}},cr=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(Un({reason:r.reason})))}}}},dr=E,pr=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,i=e.styleMarshal,a=e.getResponders,o=e.announce,s=e.autoScroller;return j(En,dr(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(w(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map(function(e){return e(i)});return r=E.apply(void 0,a)(n.dispatch),y(y({},n),{},{dispatch:r})}}}((t=i,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(i){if("LIFT"===i.type){var a=i.payload,o=a.id,s=a.clientSelection,l=a.movementMode,u=n();"DROP_ANIMATING"===u.phase&&r($n({completed:u.completed})),"IDLE"!==n().phase&&Ue(!1),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:o,movementMode:l}});var c={draggableId:o,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},d=e.startPublishing(c),p=d.critical,f=d.dimensions,h=d.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:p,dimensions:f,clientSelection:s,movementMode:l,viewport:h}})}else t(i)}}}}(n),Zn,lr,ur,cr,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var i=t.getState();return"DRAGGING"!==i.phase&&Ue(!1),void e.start(i)}n(r),e.scroll(t.getState())}}}}(s),nr,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),sr(a,o))))};var fr=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,a=Xe({x:n,y:t},{x:i,y:r});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},hr=function(){var e=document.documentElement;return e||Ue(!1),e},gr=function(){var e=hr();return fr({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},mr=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry;xn();var i=function(){var e=er(),t=gr(),n=e.y,r=e.x,i=hr(),a=i.clientWidth,o=i.clientHeight;return{frame:we({top:n,left:r,right:r+a,bottom:n+o}),scroll:{initial:e,current:e,max:t,diff:{value:Qe,displacement:Qe}}}}(),a=i.scroll.current,o=t.droppable,s=r.droppable.getAllByType(o.type).map(function(e){return e.callbacks.getDimensionAndWatchScroll(a,n)}),l=r.draggable.getAllByType(t.draggable.type).map(function(e){return e.getDimension(a)}),u={draggables:gt(l),droppables:ht(s)};return kn(),{dimensions:u,critical:t,viewport:i}};function vr(e,t,n){return n.descriptor.id!==t.id&&(n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var br=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},i=null,a=function(){i||(n.collectionStarting(),i=requestAnimationFrame(function(){i=null,xn();var e=r,a=e.additions,o=e.removals,s=e.modified,l=Object.keys(a).map(function(e){return t.draggable.getById(e).getDimension(Qe)}).sort(function(e,t){return e.descriptor.index-t.descriptor.index}),u=Object.keys(s).map(function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}}),c={additions:l,removals:Object.keys(o),modified:u};r={additions:{},removals:{},modified:{}},kn(),n.publish(c)}))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],a()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],a()},stop:function(){i&&(cancelAnimationFrame(i),i=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(t){n||Ue(!1);var i=n.critical.draggable;"ADDITION"===t.type&&vr(e,i,t.value)&&r.add(t.value),"REMOVAL"===t.type&&vr(e,i,t.value)&&r.remove(t.value)},a={updateDroppableIsEnabled:function(r,i){e.droppable.exists(r)||Ue(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:i})},updateDroppableIsCombineEnabled:function(r,i){n&&(e.droppable.exists(r)||Ue(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:i}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,i){n&&(e.droppable.exists(r)||Ue(!1),t.updateDroppableScroll({id:r,newScroll:i}))},startPublishing:function(t){n&&Ue(!1);var r=e.draggable.getById(t.draggableId),a=e.droppable.getById(r.descriptor.droppableId),o={draggable:r.descriptor,droppable:a.descriptor},s=e.subscribe(i);return n={critical:o,unsubscribe:s},mr({critical:o,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach(function(e){return e.callbacks.dragStopped()}),n.unsubscribe(),n=null}}};return a},yr=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},wr=function(e){window.scrollBy(e.x,e.y)},xr=De(function(e){return mt(e).filter(function(e){return!!e.isEnabled&&!!e.frame})}),kr=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var a=function(e,t){var n=pt(xr(t),function(t){return t.frame||Ue(!1),un(t.frame.pageMarginBox)(e)});return n}(t,r);return a},Sr=.25,_r=.05,jr=28,Nr=function(e){return Math.pow(e,2)},Cr={stopDampeningAt:1200,accelerateAt:360},Er=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;return 0===i?0:(r-t)/i},Ir=Cr.accelerateAt,Pr=Cr.stopDampeningAt,Tr=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,a=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return jr;if(e===t.startScrollingFrom)return 1;var n=Er({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=jr*Nr(1-n);return Math.ceil(r)}(t,n);return 0===a?0:i?Math.max(function(e,t){var n=t,r=Pr,i=Date.now()-n;if(i>=Pr)return e;if(i<Ir)return 1;var a=Er({startOfRange:Ir,endOfRange:r,current:i}),o=e*Nr(a);return Math.ceil(o)}(a,r),1):a},Or=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,a=e.shouldUseTimeDampening,o=function(e,t){return{startScrollingFrom:e[t.size]*Sr,maxScrollValueAt:e[t.size]*_r}}(t,i);return n[i.end]<n[i.start]?Tr({distanceToEdge:n[i.end],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a}):-1*Tr({distanceToEdge:n[i.start],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a})},Dr=it(function(e){return 0===e?0:e}),Ar=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,a=e.shouldUseTimeDampening,o={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},s=Or({container:n,distanceToEdges:o,dragStartTime:t,axis:It,shouldUseTimeDampening:a}),l=Or({container:n,distanceToEdges:o,dragStartTime:t,axis:Pt,shouldUseTimeDampening:a}),u=Dr({x:l,y:s});if(Ze(u,Qe))return null;var c=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,a=n.width>t.width;return a||i?a&&i?null:{x:a?0:r.x,y:i?0:r.y}:r}({container:n,subject:r,proposedScroll:u});return c?Ze(c,Qe)?null:c:null},Lr=it(function(e){return 0===e?0:e>0?1:-1}),Rr=function(){var e=function(e,t){return e<0?e:e>t?e-t:0};return function(t){var n=t.current,r=t.max,i=t.change,a=Ye(n,i),o={x:e(a.x,r.x),y:e(a.y,r.y)};return Ze(o,Qe)?null:o}}(),Mr=function(e){var t=e.max,n=e.current,r=e.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},a=Lr(r),o=Rr({max:i,current:n,change:a});return!o||(0!==a.x&&0===o.x||0!==a.y&&0===o.y)},Br=function(e,t){return Mr({current:e.scroll.current,max:e.scroll.max,change:t})},$r=function(e,t){var n=e.frame;return!!n&&Mr({current:n.scroll.current,max:n.scroll.max,change:t})},Ur=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,a=e.scrollDroppable,o=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,o=Ar({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:a});return o&&Br(t,o)?o:null}({dragStartTime:n,viewport:t.viewport,subject:s,center:o,shouldUseTimeDampening:r});if(l)return void i(l)}var u=kr({center:o,destination:on(t.impact),droppables:t.dimensions.droppables});if(u){var c=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var s=Ar({dragStartTime:i,container:o.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:a});return s&&$r(t,s)?s:null}({dragStartTime:n,droppable:u,subject:s,center:o,shouldUseTimeDampening:r});c&&a(u.descriptor.id,c)}},Fr=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(e,t){if(!$r(e,t))return t;var r=function(e,t){var n=e.frame;return n&&$r(e,t)?Rr({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var i=Xe(t,r);return n(e.descriptor.id,i),Xe(t,i)},a=function(e,t,n){if(!e)return n;if(!Br(t,n))return n;var i=function(e,t){if(!Br(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return Rr({current:r,max:n,change:t})}(t,n);if(!i)return r(n),null;var a=Xe(n,i);return r(a),Xe(n,a)};return function(e){var n=e.scrollJumpRequest;if(n){var r=on(e.impact);r||Ue(!1);var o=i(e.dimensions.droppables[r],n);if(o){var s=e.viewport,l=a(e.isWindowScrollAllowed,s,o);l&&function(e,n){var r=Ye(e.current.client.selection,n);t({client:r})}(e,l)}}}},zr=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=Ae(t),i=Ae(n),a=null,o=function(e){a||Ue(!1);var t=a,n=t.shouldUseTimeDampening,o=t.dragStartTime;Ur({state:e,scrollWindow:r,scrollDroppable:i,dragStartTime:o,shouldUseTimeDampening:n})};return{start:function(e){xn(),a&&Ue(!1);var t=Date.now(),n=!1,r=function(){n=!0};Ur({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),a={dragStartTime:t,shouldUseTimeDampening:n},kn(),n&&o(e)},stop:function(){a&&(r.cancel(),i.cancel(),a=null)},scroll:o}}({scrollWindow:n,scrollDroppable:t}),a=Fr({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&a(e):i.scroll(e))},start:i.start,stop:i.stop}},Wr="data-rbd",Hr=function(){var e=Wr+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Vr=function(){var e=Wr+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Gr=function(){var e=Wr+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),qr={contextId:Wr+"-scroll-container-context-id"},Jr=function(e,t){return e.map(function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""}).join(" ")},Kr="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect,Qr=function(){var e=document.querySelector("head");return e||Ue(!1),e},Yr=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Xr(e,t){var n=ve(function(){return function(e){var t,n=(t=e,function(e){return"["+e+'="'+t+'"]'}),r=function(){var e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:n(Hr.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}}(),i=[function(){var e="\n      transition: "+Gn.outOfTheWay+";\n    ";return{selector:n(Vr.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}}(),r,{selector:n(Gr.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Jr(i,"always"),resting:Jr(i,"resting"),dragging:Jr(i,"dragging"),dropAnimating:Jr(i,"dropAnimating"),userCancel:Jr(i,"userCancel")}}(e)},[e]),i=(0,r.useRef)(null),a=(0,r.useRef)(null),o=be(De(function(e){var t=a.current;t||Ue(!1),t.textContent=e}),[]),s=be(function(e){var t=i.current;t||Ue(!1),t.textContent=e},[]);Kr(function(){(i.current||a.current)&&Ue(!1);var r=Yr(t),l=Yr(t);return i.current=r,a.current=l,r.setAttribute(Wr+"-always",e),l.setAttribute(Wr+"-dynamic",e),Qr().appendChild(r),Qr().appendChild(l),s(n.always),o(n.resting),function(){var e=function(e){var t=e.current;t||Ue(!1),Qr().removeChild(t),e.current=null};e(i),e(a)}},[t,s,o,n.always,n.resting,e]);var l=be(function(){return o(n.dragging)},[o,n.dragging]),u=be(function(e){o("DROP"!==e?n.userCancel:n.dropAnimating)},[o,n.dropAnimating,n.userCancel]),c=be(function(){a.current&&o(n.resting)},[o,n.resting]);return ve(function(){return{dragging:l,dropping:u,resting:c}},[l,u,c])}var Zr=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function ei(e){return e instanceof Zr(e).HTMLElement}function ti(e,t){var n="["+Hr.contextId+'="'+e+'"]',r=ft(document.querySelectorAll(n));if(!r.length)return null;var i=pt(r,function(e){return e.getAttribute(Hr.draggableId)===t});return i&&ei(i)?i:null}function ni(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach(function(t){return t(e)})}function r(t){return e.draggables[t]||null}function i(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var i=t.descriptor.id,a=r(i);a&&t.uniqueId===a.uniqueId&&(delete e.draggables[i],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||Ue(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return ct(e.draggables).filter(function(e){return e.descriptor.type===t})}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=i(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=i(e);return t||Ue(!1),t},findById:i,exists:function(e){return Boolean(i(e))},getAllByType:function(t){return ct(e.droppables).filter(function(e){return e.descriptor.type===t})}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var ri=r.createContext(null),ii=function(){var e=document.body;return e||Ue(!1),e},ai={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var oi=0,si={separator:"::"};function li(e,t){return void 0===t&&(t=si),ve(function(){return""+e+t.separator+oi++},[t.separator,e])}var ui=r.createContext(null);function ci(e){0}function di(e,t){ci()}function pi(){di()}function fi(e){var t=(0,r.useRef)(e);return(0,r.useEffect)(function(){t.current=e}),t}var hi,gi=((hi={})[13]=!0,hi[9]=!0,hi),mi=function(e){gi[e.keyCode]&&e.preventDefault()},vi=function(){var e="visibilitychange";return"undefined"===typeof document?e:pt([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],function(e){return"on"+e in document})||e}();var bi,yi={type:"IDLE"};function wi(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,a=e.clientY;if(0===t){var o={x:n,y:a},s=r();if("DRAGGING"===s.type)return e.preventDefault(),void s.actions.move(o);"PENDING"!==s.type&&Ue(!1);var l=s.point;if(u=l,c=o,Math.abs(c.x-u.x)>=5||Math.abs(c.y-u.y)>=5){var u,c;e.preventDefault();var d=s.actions.fluidLift(o);i({type:"DRAGGING",actions:d})}}}},{eventName:"mouseup",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void mi(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&Ue(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:vi,fn:t}]}function xi(){}var ki=((bi={})[34]=!0,bi[33]=!0,bi[36]=!0,bi[35]=!0,bi);function Si(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(ki[r.keyCode]?r.preventDefault():mi(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:vi,fn:n}]}var _i={type:"IDLE"};var ji={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Ni(e,t){if(null==t)return!1;if(Boolean(ji[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&Ni(e,t.parentElement)}function Ci(e,t){var n=t.target;return!!ei(n)&&Ni(e,n)}var Ei=function(e){return we(e.getBoundingClientRect()).center};var Ii=function(){var e="matches";return"undefined"===typeof document?e:pt([e,"msMatchesSelector","webkitMatchesSelector"],function(e){return e in Element.prototype})||e}();function Pi(e,t){return null==e?null:e[Ii](t)?e:Pi(e.parentElement,t)}function Ti(e,t){return e.closest?e.closest(t):Pi(e,t)}function Oi(e,t){var n,r=t.target;if(!((n=r)instanceof Zr(n).Element))return null;var i=function(e){return"["+Hr.contextId+'="'+e+'"]'}(e),a=Ti(r,i);return a&&ei(a)?a:null}function Di(e){e.preventDefault()}function Ai(e){var t=e.expected,n=e.phase,r=e.isLockActive;e.shouldWarn;return!!r()&&t===n}function Li(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var a=r.draggable.findById(i);return!!a&&(!!a.options.isEnabled&&!!yr(n.getState(),i))}function Ri(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,a=e.draggableId,o=e.forceSensorStop,s=e.sourceEvent;if(!Li({lockAPI:t,store:r,registry:i,draggableId:a}))return null;var l=i.draggable.getById(a),u=function(e,t){var n="["+Vr.contextId+'="'+e+'"]',r=pt(ft(document.querySelectorAll(n)),function(e){return e.getAttribute(Vr.id)===t});return r&&ei(r)?r:null}(n,l.descriptor.id);if(!u)return null;if(s&&!l.options.canDragInteractiveElements&&Ci(u,s))return null;var c=t.claim(o||Re),d="PRE_DRAG";function p(){return l.options.shouldRespectForcePress}function f(){return t.isActive(c)}var g=function(e,t){Ai({expected:e,phase:d,isLockActive:f,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function m(e){function n(){t.release(),d="COMPLETED"}function i(t,i){if(void 0===i&&(i={shouldBlockNextClick:!1}),e.cleanup(),i.shouldBlockNextClick){var a=Me(window,[{eventName:"click",fn:Di,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(a)}n(),r.dispatch(Un({reason:t}))}return"PRE_DRAG"!==d&&(n(),"PRE_DRAG"!==d&&Ue(!1)),r.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),d="DRAGGING",h({isActive:function(){return Ai({expected:"DRAGGING",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return i("DROP",e)},cancel:function(e){return i("CANCEL",e)}},e.actions)}var v={isActive:function(){return Ai({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(e){var t=Ae(function(e){g(function(){return An({client:e})})});return h({},m({liftActionArgs:{id:a,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return g(Ln)},moveRight:function(){return g(Mn)},moveDown:function(){return g(Rn)},moveLeft:function(){return g(Bn)}};return m({liftActionArgs:{id:a,clientSelection:Ei(u),movementMode:"SNAP"},cleanup:Re,actions:e})},abort:function(){Ai({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!0})&&t.release()}};return v}var Mi=[function(e){var t=(0,r.useRef)(yi),n=(0,r.useRef)(Re),i=ve(function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,s,{sourceEvent:t});if(i){t.preventDefault();var a={x:t.clientX,y:t.clientY};n.current(),c(i,a)}}}}}},[e]),a=ve(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}},[e]),o=be(function(){n.current=Me(window,[a,i],{passive:!1,capture:!0})},[a,i]),s=be(function(){"IDLE"!==t.current.type&&(t.current=yi,n.current(),o())},[o]),l=be(function(){var e=t.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[s]),u=be(function(){var e=wi({cancel:l,completed:s,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=Me(window,e,{capture:!0,passive:!1})},[l,s]),c=be(function(e,n){"IDLE"!==t.current.type&&Ue(!1),t.current={type:"PENDING",point:n,actions:e},u()},[u]);Kr(function(){return o(),function(){n.current()}},[o])},function(e){var t=(0,r.useRef)(xi),n=ve(function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var r=e.findClosestDraggableId(n);if(r){var a=e.tryGetLock(r,l,{sourceEvent:n});if(a){n.preventDefault();var o=!0,s=a.snapLift();t.current(),t.current=Me(window,Si(s,l),{capture:!0,passive:!1})}}}function l(){o||Ue(!1),o=!1,t.current(),i()}}}},[e]),i=be(function(){t.current=Me(window,[n],{passive:!1,capture:!0})},[n]);Kr(function(){return i(),function(){t.current()}},[i])},function(e){var t=(0,r.useRef)(_i),n=(0,r.useRef)(Re),i=be(function(){return t.current},[]),a=be(function(e){t.current=e},[]),o=ve(function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,l,{sourceEvent:t});if(i){var a=t.touches[0],o={x:a.clientX,y:a.clientY};n.current(),p(i,o)}}}}}},[e]),s=be(function(){n.current=Me(window,[o],{capture:!0,passive:!1})},[o]),l=be(function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),a(_i),n.current(),s())},[s,a]),u=be(function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[l]),c=be(function(){var e={capture:!0,passive:!1},t={cancel:u,completed:l,getPhase:i},r=Me(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var i=e.touches[0],a={x:i.clientX,y:i.clientY};e.preventDefault(),n.actions.move(a)}else t()}},{eventName:"touchend",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&Ue(!1);var i=e.touches[0];if(i&&i.force>=.15){var a=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return a?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();a&&t()}}},{eventName:vi,fn:t}]}(t),e),a=Me(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:vi,fn:t}]}(t),e);n.current=function(){r(),a()}},[u,i,l]),d=be(function(){var e=i();"PENDING"!==e.type&&Ue(!1);var t=e.actions.fluidLift(e.point);a({type:"DRAGGING",actions:t,hasMoved:!1})},[i,a]),p=be(function(e,t){"IDLE"!==i().type&&Ue(!1);var n=setTimeout(d,120);a({type:"PENDING",point:t,actions:e,longPressTimerId:n}),c()},[c,i,a,d]);Kr(function(){return s(),function(){n.current();var e=i();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),a(_i))}},[i,s,a]),Kr(function(){return Me(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])},[])}];function Bi(e){var t=e.contextId,n=e.store,i=e.registry,a=e.customSensors,o=e.enableDefaultSensors,s=[].concat(o?Mi:[],a||[]),l=(0,r.useState)(function(){return function(){var e=null;function t(){e||Ue(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&Ue(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()})[0],u=be(function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()},[l]);Kr(function(){var e=n.getState();return n.subscribe(function(){var t=n.getState();u(e,t),e=t})},[l,n,u]),Kr(function(){return l.tryAbandon},[l.tryAbandon]);var c=be(function(e){return Li({lockAPI:l,registry:i,store:n,draggableId:e})},[l,i,n]),d=be(function(e,r,a){return Ri({lockAPI:l,registry:i,contextId:t,store:n,draggableId:e,forceSensorStop:r,sourceEvent:a&&a.sourceEvent?a.sourceEvent:null})},[t,l,i,n]),p=be(function(e){return function(e,t){var n=Oi(e,t);return n?n.getAttribute(Hr.draggableId):null}(t,e)},[t]),f=be(function(e){var t=i.draggable.findById(e);return t?t.options:null},[i.draggable]),h=be(function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch({type:"FLUSH",payload:null}))},[l,n]),g=be(l.isClaimed,[l]),m=ve(function(){return{canGetLock:c,tryGetLock:d,findClosestDraggableId:p,findOptionsForDraggable:f,tryReleaseLock:h,isLockClaimed:g}},[c,d,p,f,h,g]);ci();for(var v=0;v<s.length;v++)s[v](m)}function $i(e){return e.current||Ue(!1),e.current}function Ui(e){var t=e.contextId,n=e.setCallbacks,i=e.sensors,a=e.nonce,o=e.dragHandleUsageInstructions,s=(0,r.useRef)(null);pi();var l=fi(e),u=be(function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(l.current)},[l]),c=function(e){var t=ve(function(){return function(e){return"rbd-announcement-"+e}(e)},[e]),n=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),h(e.style,ai),ii().appendChild(e),function(){setTimeout(function(){var t=ii();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)})}},[t]),be(function(e){var t=n.current;t&&(t.textContent=e)},[])}(t),d=function(e){var t=e.contextId,n=e.text,i=li("hidden-text",{separator:"-"}),a=ve(function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:i}).contextId+"-"+e.uniqueId;var e},[i,t]);return(0,r.useEffect)(function(){var e=document.createElement("div");return e.id=a,e.textContent=n,e.style.display="none",ii().appendChild(e),function(){var t=ii();t.contains(e)&&t.removeChild(e)}},[a,n]),a}({contextId:t,text:o}),p=Xr(t,a),f=be(function(e){$i(s).dispatch(e)},[]),g=ve(function(){return C({publishWhileDragging:In,updateDroppableScroll:Tn,updateDroppableIsEnabled:On,updateDroppableIsCombineEnabled:Dn,collectionStarting:Pn},f)},[f]),m=function(){var e=ve(ni,[]);return(0,r.useEffect)(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}(),v=ve(function(){return br(m,g)},[m,g]),b=ve(function(){return zr(h({scrollWindow:wr,scrollDroppable:v.scrollDroppable},C({move:An},f)))},[v.scrollDroppable,f]),y=function(e){var t=(0,r.useRef)({}),n=(0,r.useRef)(null),i=(0,r.useRef)(null),a=(0,r.useRef)(!1),o=be(function(e,n){var r={id:e,focus:n};return t.current[e]=r,function(){var n=t.current;n[e]!==r&&delete n[e]}},[]),s=be(function(t){var n=ti(e,t);n&&n!==document.activeElement&&n.focus()},[e]),l=be(function(e,t){n.current===e&&(n.current=t)},[]),u=be(function(){i.current||a.current&&(i.current=requestAnimationFrame(function(){i.current=null;var e=n.current;e&&s(e)}))},[s]),c=be(function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(Hr.draggableId)===e&&(n.current=e)},[]);return Kr(function(){return a.current=!0,function(){a.current=!1;var e=i.current;e&&cancelAnimationFrame(e)}},[]),ve(function(){return{register:o,tryRecordFocus:c,tryRestoreFocusRecorded:u,tryShiftRecord:l}},[o,c,u,l])}(t),w=ve(function(){return pr({announce:c,autoScroller:b,dimensionMarshal:v,focusMarshal:y,getResponders:u,styleMarshal:p})},[c,b,v,y,u,p]);s.current=w;var x=be(function(){var e=$i(s);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})},[]),k=be(function(){var e=$i(s).getState();return e.isDragging||"DROP_ANIMATING"===e.phase},[]);n(ve(function(){return{isDragging:k,tryAbort:x}},[k,x]));var S=be(function(e){return yr($i(s).getState(),e)},[]),_=be(function(){return ln($i(s).getState())},[]),j=ve(function(){return{marshal:v,focus:y,contextId:t,canLift:S,isMovementAllowed:_,dragHandleUsageInstructionsId:d,registry:m}},[t,v,d,y,S,_,m]);return Bi({contextId:t,store:w,registry:m,customSensors:i,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,r.useEffect)(function(){return x},[x]),r.createElement(ui.Provider,{value:j},r.createElement(L,{context:ri,store:w},e.children))}var Fi=0;function zi(e){var t=ve(function(){return""+Fi++},[]),n=e.dragHandleUsageInstructions||Ge;return r.createElement(Fe,null,function(i){return r.createElement(Ui,{nonce:e.nonce,contextId:t,setCallbacks:i,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Wi=function(e){return function(t){return e===t}},Hi=Wi("scroll"),Vi=Wi("auto"),Gi=(Wi("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),qi=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Gi(n,Hi)||Gi(n,Vi)}(t)?t:e(t.parentElement)},Ji=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Ki=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},Qi=function(e){return{closestScrollable:qi(e),isFixedOnPage:Ki(e)}},Yi=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,a=e.direction,o=e.isDropDisabled,s=e.isCombineEnabled,l=e.shouldClipSubject,u=r.closestScrollable,c=function(e,t){var n=Ie(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,a=r+t.scrollHeight,o=i+t.scrollWidth,s=xe({top:r,right:o,bottom:a,left:i},n.border);return _e({borderBox:s,margin:n.margin,border:n.border,padding:n.padding})}(t,u),d=Ce(c,i),p=function(){if(!u)return null;var e=Ie(u),t={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:e,page:Ce(e,i),scroll:Ji(u),scrollSize:t,shouldClipSubject:l}}(),f=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,a=e.direction,o=e.client,s=e.page,l=e.closest,u=function(){if(!l)return null;var e=l.scrollSize,t=l.client,n=fr({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:n,diff:{value:Qe,displacement:Qe}}}}(),c="vertical"===a?It:Pt;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:c,isEnabled:n,client:o,page:s,frame:u,subject:lt({page:s,withPlaceholder:null,axis:c,frame:u})}}({descriptor:n,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:a,client:c,page:d,closest:p});return f},Xi={passive:!1},Zi={passive:!0},ea=function(e){return e.shouldPublishImmediately?Xi:Zi};function ta(e){var t=(0,r.useContext)(e);return t||Ue(!1),t}var na=function(e){return e&&e.env.closestScrollable||null};function ra(){}var ia={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},aa=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,i=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||"close"===r?ia:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?Gn.placeholder:null}};var oa=r.memo(function(e){var t=(0,r.useRef)(null),n=be(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),i=e.animate,a=e.onTransitionEnd,o=e.onClose,s=e.contextId,l=(0,r.useState)("open"===e.animate),u=l[0],c=l[1];(0,r.useEffect)(function(){return u?"open"!==i?(n(),c(!1),ra):t.current?ra:(t.current=setTimeout(function(){t.current=null,c(!1)}),n):ra},[i,u,n]);var d=be(function(e){"height"===e.propertyName&&(a(),"close"===i&&o())},[i,o,a]),p=aa({isAnimatingOpenOnMount:u,animate:e.animate,placeholder:e.placeholder});return r.createElement(e.placeholder.tagName,{style:p,"data-rbd-placeholder-context-id":s,onTransitionEnd:d,ref:e.innerRef})}),sa=r.createContext(null);var la=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return f(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(r.PureComponent),ua=5e3,ca=4500,da=function(e,t){return t?Gn.drop(t.duration):e?Gn.snap:Gn.fluid},pa=function(e,t){return e?t?Wn.drop:Wn.combining:null};function fa(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,i=e.dropping,a=Boolean(r),o=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),s=Boolean(i),l=s?Kn(n,a):Jn(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:da(o,i),transform:l,opacity:pa(a,s),zIndex:s?ca:ua,pointerEvents:"none"}}(e):{transform:Jn((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}function ha(e){var t=li("draggable"),n=e.descriptor,i=e.registry,a=e.getDraggableRef,o=e.canDragInteractiveElements,s=e.shouldRespectForcePress,l=e.isEnabled,u=ve(function(){return{canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:l}},[o,l,s]),c=be(function(e){var t=a();return t||Ue(!1),function(e,t,n){void 0===n&&(n=Qe);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=Ee(i,r),o=Ce(a,n);return{descriptor:e,placeholder:{client:a,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:a.marginBox.width,y:a.marginBox.height},client:a,page:o}}(n,t,e)},[n,a]),d=ve(function(){return{uniqueId:t,descriptor:n,options:u,getDimension:c}},[n,c,u,t]),p=(0,r.useRef)(d),f=(0,r.useRef)(!0);Kr(function(){return i.draggable.register(p.current),function(){return i.draggable.unregister(p.current)}},[i.draggable]),Kr(function(){if(f.current)f.current=!1;else{var e=p.current;p.current=d,i.draggable.update(d,e)}},[d,i.draggable])}function ga(e,t,n){di()}function ma(e){e.preventDefault()}var va=function(e,t){return e===t},ba=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function ya(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var wa={mapped:{type:"SECONDARY",offset:Qe,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ya(null)}};var xa=fe(function(){var e=function(){var e=De(function(e,t){return{x:e,y:t}}),t=De(function(e,t,n,r,i){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}}),n=De(function(e,n,r,i,a,o,s){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:a,combineWith:o,mode:n,offset:e,dimension:r,forceShouldAnimate:s,snapshot:t(n,i,a,o,null)}}});return function(r,i){if(r.isDragging){if(r.critical.draggable.id!==i.draggableId)return null;var a=r.current.client.offset,o=r.dimensions.draggables[i.draggableId],s=on(r.impact),l=(c=r.impact).at&&"COMBINE"===c.at.type?c.at.combine.draggableId:null,u=r.forceShouldAnimate;return n(e(a.x,a.y),r.movementMode,o,i.isClone,s,l,u)}var c;if("DROP_ANIMATING"===r.phase){var d=r.completed;if(d.result.draggableId!==i.draggableId)return null;var p=i.isClone,f=r.dimensions.draggables[i.draggableId],h=d.result,g=h.mode,m=ba(h),v=function(e){return e.combine?e.combine.draggableId:null}(h),b={duration:r.dropDuration,curve:zn,moveTo:r.newHomeClientOffset,opacity:v?Wn.drop:null,scale:v?Hn.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:f,dropping:b,draggingOver:m,combineWith:v,mode:g,forceShouldAnimate:null,snapshot:t(g,p,m,v,b)}}}return null}}(),t=function(){var e=De(function(e,t){return{x:e,y:t}}),t=De(ya),n=De(function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}}),r=function(e){return e?n(Qe,e,!0):null},i=function(t,i,a,o){var s=a.displaced.visible[t],l=Boolean(o.inVirtualList&&o.effected[t]),u=wt(a),c=u&&u.draggableId===t?i:null;if(!s){if(!l)return r(c);if(a.displaced.invisible[t])return null;var d=et(o.displacedBy.point),p=e(d.x,d.y);return n(p,c,!0)}if(l)return r(c);var f=a.displacedBy.point,h=e(f.x,f.y);return n(h,c,s.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:i(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(n,r){return e(n,r)||t(n,r)||wa}},{dropAnimationFinished:Fn},null,{context:ri,pure:!0,areStatePropsEqual:va})(function(e){var t=(0,r.useRef)(null),n=be(function(e){t.current=e},[]),i=be(function(){return t.current},[]),a=ta(ui),o=a.contextId,s=a.dragHandleUsageInstructionsId,l=a.registry,u=ta(sa),c=u.type,d=u.droppableId,p=ve(function(){return{id:e.draggableId,index:e.index,type:c,droppableId:d}},[e.draggableId,e.index,c,d]),f=e.children,h=e.draggableId,g=e.isEnabled,m=e.shouldRespectForcePress,v=e.canDragInteractiveElements,b=e.isClone,y=e.mapped,w=e.dropAnimationFinished;ga(),ci(),b||ha(ve(function(){return{descriptor:p,registry:l,getDraggableRef:i,canDragInteractiveElements:v,shouldRespectForcePress:m,isEnabled:g}},[p,l,i,v,m,g]));var x=ve(function(){return g?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:ma}:null},[o,s,h,g]),k=be(function(e){"DRAGGING"===y.type&&y.dropping&&"transform"===e.propertyName&&w()},[w,y]),S=ve(function(){var e=fa(y),t="DRAGGING"===y.type&&y.dropping?k:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:x}},[o,x,h,y,k,n]),_=ve(function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}},[p.droppableId,p.id,p.index,p.type]);return f(S,y.snapshot,_)});function ka(e){return ta(sa).isUsingCloneFor!==e.draggableId||e.isClone?r.createElement(xa,e):null}function Sa(e){var t="boolean"!==typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),i=Boolean(e.shouldRespectForcePress);return r.createElement(ka,h({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:i}))}var _a=function(e,t){return e===t.droppable.type},ja=function(e,t){return t.draggables[e.draggable.id]};var Na={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||Ue(!1),document.body}},Ca=fe(function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=h({},e,{shouldAnimatePlaceholder:!1}),n=De(function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}}),r=De(function(r,i,a,o,s,l){var u=s.descriptor.id;if(s.descriptor.droppableId===r){var c=l?{render:l,dragging:n(s.descriptor)}:null,d={isDraggingOver:a,draggingOverWith:a?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:c}}if(!i)return t;if(!o)return e;var p={isDraggingOver:a,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return function(n,i){var a=i.droppableId,o=i.type,s=!i.isDropDisabled,l=i.renderClone;if(n.isDragging){var u=n.critical;if(!_a(o,u))return t;var c=ja(u,n.dimensions),d=on(n.impact)===a;return r(a,s,d,d,c,l)}if("DROP_ANIMATING"===n.phase){var p=n.completed;if(!_a(o,p.critical))return t;var f=ja(p.critical,n.dimensions);return r(a,s,ba(p.result)===a,on(p.impact)===a,f,l)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var h=n.completed;if(!_a(o,h.critical))return t;var g=on(h.impact)===a,m=Boolean(h.impact.at&&"COMBINE"===h.impact.at.type),v=h.critical.droppable.id===a;return g?m?e:t:v?e:t}return t}},{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:ri,pure:!0,areStatePropsEqual:va})(function(e){var t=(0,r.useContext)(ui);t||Ue(!1);var n=t.contextId,i=t.isMovementAllowed,a=(0,r.useRef)(null),o=(0,r.useRef)(null),s=e.children,l=e.droppableId,u=e.type,c=e.mode,d=e.direction,p=e.ignoreContainerClipping,f=e.isDropDisabled,h=e.isCombineEnabled,g=e.snapshot,m=e.useClone,v=e.updateViewportMaxScroll,b=e.getContainerForClone,y=be(function(){return a.current},[]),w=be(function(e){a.current=e},[]),x=(be(function(){return o.current},[]),be(function(e){o.current=e},[]));di();var k=be(function(){i()&&v({maxScroll:gr()})},[i,v]);!function(e){var t=(0,r.useRef)(null),n=ta(ui),i=li("droppable"),a=n.registry,o=n.marshal,s=fi(e),l=ve(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),u=(0,r.useRef)(l),c=ve(function(){return De(function(e,n){t.current||Ue(!1);var r={x:e,y:n};o.updateDroppableScroll(l.id,r)})},[l.id,o]),d=be(function(){var e=t.current;return e&&e.env.closestScrollable?Ji(e.env.closestScrollable):Qe},[]),p=be(function(){var e=d();c(e.x,e.y)},[d,c]),f=ve(function(){return Ae(p)},[p]),h=be(function(){var e=t.current,n=na(e);e&&n||Ue(!1),e.scrollOptions.shouldPublishImmediately?p():f()},[f,p]),g=be(function(e,r){t.current&&Ue(!1);var i=s.current,a=i.getDroppableRef();a||Ue(!1);var o=Qi(a),u={ref:a,descriptor:l,env:o,scrollOptions:r};t.current=u;var c=Yi({ref:a,descriptor:l,env:o,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),d=o.closestScrollable;return d&&(d.setAttribute(qr.contextId,n.contextId),d.addEventListener("scroll",h,ea(u.scrollOptions))),c},[n.contextId,l,h,s]),m=be(function(){var e=t.current,n=na(e);return e&&n||Ue(!1),Ji(n)},[]),v=be(function(){var e=t.current;e||Ue(!1);var n=na(e);t.current=null,n&&(f.cancel(),n.removeAttribute(qr.contextId),n.removeEventListener("scroll",h,ea(e.scrollOptions)))},[h,f]),b=be(function(e){var n=t.current;n||Ue(!1);var r=na(n);r||Ue(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x},[]),y=ve(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:m,dragStopped:v,scroll:b}},[v,g,m,b]),w=ve(function(){return{uniqueId:i,descriptor:l,callbacks:y}},[y,l,i]);Kr(function(){return u.current=w.descriptor,a.droppable.register(w),function(){t.current&&v(),a.droppable.unregister(w)}},[y,l,v,w,o,a.droppable]),Kr(function(){t.current&&o.updateDroppableIsEnabled(u.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),Kr(function(){t.current&&o.updateDroppableIsCombineEnabled(u.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}({droppableId:l,type:u,mode:c,direction:d,isDropDisabled:f,isCombineEnabled:h,ignoreContainerClipping:p,getDroppableRef:y});var S=r.createElement(la,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(e){var t=e.onClose,i=e.data,a=e.animate;return r.createElement(oa,{placeholder:i,onClose:t,innerRef:x,animate:a,contextId:n,onTransitionEnd:k})}),_=ve(function(){return{innerRef:w,placeholder:S,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":n}}},[n,l,S,w]),j=m?m.dragging.draggableId:null,N=ve(function(){return{droppableId:l,type:u,isUsingCloneFor:j}},[l,j,u]);return r.createElement(sa.Provider,{value:N},s(_,g),function(){if(!m)return null;var e=m.dragging,t=m.render,n=r.createElement(ka,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(n,r){return t(n,r,e)});return ge.createPortal(n,b())}())});Ca.defaultProps=Na;const Ea=[{id:"developer",name:"Developer",color:"bg-blue-500",textColor:"text-white",borderColor:"border-blue-500"},{id:"merchandiser",name:"Merchandiser",color:"bg-green-500",textColor:"text-white",borderColor:"border-green-500"},{id:"ecommerce-leader",name:"Ecommerce Leader",color:"bg-purple-500",textColor:"text-white",borderColor:"border-purple-500"}],Ia=e=>Ea.find(t=>t.id===e)||Ea[0];var Pa=n(579);const Ta=e=>{let{isOpen:t,onClose:n,title:i,children:a}=e;return(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&n()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,n]),t?(0,Pa.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Pa.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,Pa.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:n}),(0,Pa.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"\u200b"}),(0,Pa.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[(0,Pa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Pa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:i}),(0,Pa.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Pa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a]})]})}):null},Oa=e=>{let{isOpen:t,onClose:n,step:i,onUpdate:a}=e;const[o,s]=(0,r.useState)(""),[l,u]=(0,r.useState)(Ea[0].id),[c,d]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[h,g]=(0,r.useState)("");(0,r.useEffect)(()=>{i&&t&&(s(i.description||""),u(i.personaId||Ea[0].id),d(i.painPoints?i.painPoints.join(". "):""),f(i.opportunities?i.opportunities.join(". "):""),g(i.insights||""))},[i,t]);return(0,Pa.jsx)(Ta,{isOpen:t,onClose:n,title:"Edit Step",children:(0,Pa.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),o.trim()){const e={description:o.trim(),personaId:l,painPoints:c.split(".").map(e=>e.trim()).filter(e=>e),opportunities:p.split(".").map(e=>e.trim()).filter(e=>e),insights:h.trim()};a(e),n()}},className:"space-y-4",children:[(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"editDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Description *"}),(0,Pa.jsx)("textarea",{id:"editDescription",value:o,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Describe what happens in this step...",autoFocus:!0})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"editPersona",className:"block text-sm font-medium text-gray-700 mb-1",children:"Persona"}),(0,Pa.jsx)("select",{id:"editPersona",value:l,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:Ea.map(e=>(0,Pa.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"editPainPoints",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pain Points"}),(0,Pa.jsx)("textarea",{id:"editPainPoints",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"2",placeholder:"Enter pain points separated by periods..."}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple pain points with periods"})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"editOpportunities",className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunities"}),(0,Pa.jsx)("textarea",{id:"editOpportunities",value:p,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"2",placeholder:"Enter opportunities separated by periods..."}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple opportunities with periods"})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"editInsights",className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Insights"}),(0,Pa.jsx)("textarea",{id:"editInsights",value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Enter customer insights, research findings, or additional context..."}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Add any customer research, behavioral insights, or contextual information"})]}),(0,Pa.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Pa.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),(0,Pa.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Update Step"})]})]})})},Da=e=>{let{step:t,index:n,stageId:i,taskId:a,stageName:o,taskName:s,currentView:l,onUpdateStep:u,onDeleteStep:c,onOpenStepDetail:d,isHighlighted:p}=e;const[f,h]=(0,r.useState)(!1),g=Ia(t.personaId),m=p?"ring-4 ring-yellow-300 ring-opacity-75 shadow-lg transform scale-105":"",v=(0,Pa.jsx)("div",{className:`${g.color} ${g.borderColor} border-l-4 bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-all cursor-pointer ${m}`,onClick:()=>{d?d(t,i,a,o,s):h(!0)},children:(0,Pa.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Pa.jsxs)("div",{className:"flex-1",children:["step"===l&&(0,Pa.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,Pa.jsx)("span",{className:`${g.color} ${g.textColor} text-xs px-2 py-1 rounded-full`,children:g.name})}),(0,Pa.jsx)("p",{className:"text-gray-800 font-medium mb-2",children:t.description||"No description"}),t.painPoints&&t.painPoints.length>0&&(0,Pa.jsxs)("div",{className:"mb-2",children:[(0,Pa.jsx)("p",{className:"text-xs font-semibold text-red-600 mb-1",children:"Pain Points:"}),(0,Pa.jsx)("div",{className:"flex flex-wrap gap-1",children:t.painPoints.map((e,t)=>(0,Pa.jsx)("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:e.trim()},t))})]}),t.opportunities&&t.opportunities.length>0&&(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("p",{className:"text-xs font-semibold text-green-600 mb-1",children:"Opportunities:"}),(0,Pa.jsx)("div",{className:"flex flex-wrap gap-1",children:t.opportunities.map((e,t)=>(0,Pa.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:e.trim()},t))})]})]}),(0,Pa.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:["step"===l&&(0,Pa.jsx)("div",{"data-is-drag-handle":"true",className:"text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing p-1",title:"Drag to move step",onClick:e=>e.stopPropagation(),children:(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})}),(0,Pa.jsx)("button",{onClick:e=>{e.stopPropagation(),window.confirm("Are you sure you want to delete this step?")&&c(i,a,t.id)},className:"text-gray-400 hover:text-red-500 p-1 rounded transition-colors",title:"Delete step",children:(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})});return(0,Pa.jsxs)(Pa.Fragment,{children:["step"===l?(0,Pa.jsx)(Sa,{draggableId:t.id,index:n,children:(e,t)=>(0,Pa.jsx)("div",{ref:e.innerRef,...e.draggableProps,className:t.isDragging?"shadow-2xl rotate-2 scale-105":"",children:(0,Pa.jsx)("div",{...e.dragHandleProps,children:v})})}):v,(0,Pa.jsx)(Oa,{isOpen:f,onClose:()=>h(!1),step:t,onUpdate:e=>u(i,a,t.id,e)})]})},Aa=e=>{let{isOpen:t,onClose:n,onAdd:i}=e;const[a,o]=(0,r.useState)(""),[s,l]=(0,r.useState)(Ea[0].id),[u,c]=(0,r.useState)(""),[d,p]=(0,r.useState)(""),[f,h]=(0,r.useState)(""),g=()=>{o(""),l(Ea[0].id),c(""),p(""),h("")},m=()=>{g(),n()};return(0,Pa.jsx)(Ta,{isOpen:t,onClose:m,title:"Add New Step",children:(0,Pa.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),a.trim()){const e={description:a.trim(),personaId:s,painPoints:u.split(".").map(e=>e.trim()).filter(e=>e),opportunities:d.split(".").map(e=>e.trim()).filter(e=>e),insights:f.trim()};i(e),g(),n()}},className:"space-y-4",children:[(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Description *"}),(0,Pa.jsx)("textarea",{id:"description",value:a,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Describe what happens in this step...",autoFocus:!0})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"persona",className:"block text-sm font-medium text-gray-700 mb-1",children:"Persona"}),(0,Pa.jsx)("select",{id:"persona",value:s,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:Ea.map(e=>(0,Pa.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"painPoints",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pain Points"}),(0,Pa.jsx)("textarea",{id:"painPoints",value:u,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"2",placeholder:"Enter pain points separated by periods..."}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple pain points with periods"})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"opportunities",className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunities"}),(0,Pa.jsx)("textarea",{id:"opportunities",value:d,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"2",placeholder:"Enter opportunities separated by periods..."}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple opportunities with periods"})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"insights",className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Insights"}),(0,Pa.jsx)("textarea",{id:"insights",value:f,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Enter customer insights, research findings, or additional context..."}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Add any customer research, behavioral insights, or contextual information"})]}),(0,Pa.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Pa.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),(0,Pa.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Add Step"})]})]})})},La=e=>{let{isOpen:t,onClose:n,task:i,onUpdate:a}=e;const[o,s]=(0,r.useState)("");(0,r.useEffect)(()=>{i&&t&&s(i.name||"")},[i,t]);return(0,Pa.jsx)(Ta,{isOpen:t,onClose:n,title:"Edit Task",children:(0,Pa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&(a({name:o.trim()}),n())},className:"space-y-4",children:[(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"editTaskName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Name *"}),(0,Pa.jsx)("input",{type:"text",id:"editTaskName",value:o,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Research, Compare, Decide",autoFocus:!0})]}),(0,Pa.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Pa.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),(0,Pa.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Update Task"})]})]})})},Ra=e=>{let{title:t,onSave:n,className:i="",disabled:a=!1}=e;const[o,s]=(0,r.useState)(!1),[l,u]=(0,r.useState)(t),[c,d]=(0,r.useState)(!1),p=(0,r.useRef)(null);(0,r.useEffect)(()=>{u(t)},[t]),(0,r.useEffect)(()=>{o&&p.current&&(p.current.focus(),p.current.select())},[o]);const f=async()=>{if(l.trim()&&l.trim()!==t){d(!0);try{await n(l.trim())}catch(e){console.error("Error saving title:",e),u(t)}finally{d(!1)}}s(!1)},h=e=>{"Enter"===e.key?f():"Escape"===e.key&&(u(t),s(!1))};return a?(0,Pa.jsx)("span",{className:i,children:t}):o?(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsx)("input",{ref:p,type:"text",value:l,onChange:e=>u(e.target.value),onBlur:f,onKeyDown:h,className:`${i} bg-transparent border-b-2 border-blue-500 focus:outline-none min-w-0 flex-1`,maxLength:100,disabled:c}),c&&(0,Pa.jsx)("div",{className:"w-4 h-4 animate-spin border-2 border-blue-600 border-t-transparent rounded-full"})]}):(0,Pa.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,Pa.jsx)("span",{className:i,children:t}),(0,Pa.jsx)("button",{onClick:e=>{e.stopPropagation(),s(!0)},className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-gray-600 transition-opacity",title:"Edit name",children:(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})},Ma=e=>{let{task:t,stageId:n,stageName:i,currentView:a,onUpdateTask:o,onDeleteTask:s,onAddStep:l,onUpdateStep:u,onDeleteStep:c,onSwitchToStepView:d,onOpenStepDetail:p}=e;const[f,h]=(0,r.useState)(!1),[g,m]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null);return(0,Pa.jsxs)("div",{className:"bg-white rounded-lg p-4 border-2 border-gray-100 shadow-sm",children:[(0,Pa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Pa.jsx)(Ra,{title:t.name,onSave:e=>o(n,t.id,{name:e}),className:"text-md font-semibold text-gray-700"}),(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:["step"===a&&(0,Pa.jsx)("button",{onClick:()=>h(!0),className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md transition-colors",title:"Add new step",children:(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,Pa.jsx)("button",{onClick:()=>{window.confirm(`Are you sure you want to delete the "${t.name}" task? This will also delete all associated steps.`)&&s(n,t.id)},className:"text-red-400 hover:text-red-600 p-1 rounded transition-colors",title:"Delete task",children:(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),(()=>{if("step"===a){const e=`task-${n}-${t.id}`;return(0,Pa.jsx)(Ca,{droppableId:e,children:(e,r)=>(0,Pa.jsxs)("div",{ref:e.innerRef,...e.droppableProps,className:"space-y-3 min-h-24 transition-colors "+(r.isDraggingOver?"bg-blue-50 border-blue-200 border-2 border-dashed rounded-lg p-2":""),children:[t.steps.map((e,r)=>(0,Pa.jsx)(Da,{step:e,index:r,stageId:n,taskId:t.id,stageName:i,taskName:t.name,currentView:a,onUpdateStep:u,onDeleteStep:c,onOpenStepDetail:p,isHighlighted:v===e.id},e.id)),e.placeholder,0===t.steps.length&&!r.isDraggingOver&&(0,Pa.jsxs)("div",{className:"text-center py-6 text-gray-400",children:[(0,Pa.jsx)("svg",{className:"w-10 h-10 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,Pa.jsx)("p",{className:"text-xs",children:"No steps yet"})]})]})})}return(0,Pa.jsxs)("div",{className:"space-y-3 min-h-24",children:[t.steps.map((e,r)=>(0,Pa.jsx)(Da,{step:e,index:r,stageId:n,taskId:t.id,stageName:i,taskName:t.name,currentView:a,onUpdateStep:u,onDeleteStep:c,onOpenStepDetail:p,isHighlighted:v===e.id},e.id)),0===t.steps.length&&(0,Pa.jsxs)("div",{className:"text-center py-6 text-gray-400",children:[(0,Pa.jsx)("svg",{className:"w-10 h-10 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,Pa.jsx)("p",{className:"text-xs",children:"No steps yet"})]})]})})(),(0,Pa.jsx)(Aa,{isOpen:f,onClose:()=>h(!1),onAdd:e=>l(n,t.id,e)}),(0,Pa.jsx)(La,{isOpen:g,onClose:()=>m(!1),task:t,onUpdate:e=>o(n,t.id,e)})]})},Ba=e=>{let{isOpen:t,onClose:n,onAdd:i}=e;const[a,o]=(0,r.useState)(""),s=()=>{o(""),n()};return(0,Pa.jsx)(Ta,{isOpen:t,onClose:s,title:"Add New Task",children:(0,Pa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&(i({name:a.trim()}),o(""),n())},className:"space-y-4",children:[(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"taskName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Name *"}),(0,Pa.jsx)("input",{type:"text",id:"taskName",value:a,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Research, Compare, Decide",autoFocus:!0})]}),(0,Pa.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Pa.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),(0,Pa.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Add Task"})]})]})})},$a=e=>{let{isOpen:t,onClose:n,stage:i,onUpdate:a}=e;const[o,s]=(0,r.useState)("");(0,r.useEffect)(()=>{i&&t&&s(i.name||"")},[i,t]);return(0,Pa.jsx)(Ta,{isOpen:t,onClose:n,title:"Edit Stage",children:(0,Pa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&(a(i.id,o.trim()),n())},className:"space-y-4",children:[(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{htmlFor:"editStageName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stage Name *"}),(0,Pa.jsx)("input",{type:"text",id:"editStageName",value:o,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Awareness, Consideration, Purchase",autoFocus:!0})]}),(0,Pa.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Pa.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),(0,Pa.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Update Stage"})]})]})})},Ua=e=>{let{stage:t,currentView:n,onUpdateStage:i,onDeleteStage:a,onAddTask:o,onUpdateTask:s,onDeleteTask:l,onAddStep:u,onUpdateStep:c,onDeleteStep:d,onSwitchToStepView:p,onOpenStepDetail:f}=e;const[h,g]=(0,r.useState)(!1),[m,v]=(0,r.useState)(!1);return(0,Pa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border-2 border-gray-200",children:[(0,Pa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Pa.jsx)(Ra,{title:t.name,onSave:e=>i(t.id,{name:e}),className:"text-lg font-semibold text-gray-800"}),(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsx)("button",{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md transition-colors",title:"Add new task",children:(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,Pa.jsx)("button",{onClick:()=>{window.confirm(`Are you sure you want to delete the "${t.name}" stage? This will also delete all associated tasks and steps.`)&&a(t.id)},className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Delete stage",children:(0,Pa.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),(0,Pa.jsxs)("div",{className:"flex gap-4 overflow-x-auto pb-4",children:[t.tasks.map(e=>(0,Pa.jsx)(Ma,{task:e,stageId:t.id,stageName:t.name,currentView:n,onUpdateTask:s,onDeleteTask:l,onAddStep:u,onUpdateStep:c,onDeleteStep:d,onSwitchToStepView:p,onOpenStepDetail:f},e.id)),0===t.tasks.length&&(0,Pa.jsxs)("div",{className:"flex-1 text-center py-8 text-gray-400",children:[(0,Pa.jsx)("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,Pa.jsx)("p",{className:"text-sm",children:"No tasks yet"})]})]}),(0,Pa.jsx)(Ba,{isOpen:h,onClose:()=>g(!1),onAdd:e=>o(t.id,e)}),(0,Pa.jsx)($a,{isOpen:m,onClose:()=>v(!1),stage:t,onUpdate:i})]})},Fa="user_journey",za="jobs_to_be_done",Wa={[Fa]:{name:"User Journey Map",stage:"Stage",stages:"Stages",task:"Task",tasks:"Tasks",step:"Step",steps:"Steps",description:"Create and visualize customer journey stages, tasks, and touchpoints",icon:"\ud83d\uddfa\ufe0f"},[za]:{name:"Jobs to be Done Map",stage:"Domain",stages:"Domains",task:"Macro Job",tasks:"Macro Jobs",step:"Micro Job",steps:"Micro Jobs",description:"Map customer jobs, outcomes, and pain points using Jobs-to-be-Done framework",icon:"\ud83c\udfaf"}},Ha=e=>Wa[e]||Wa[Fa],Va=[{type:Fa,title:"User Journey Map",description:"Traditional customer journey mapping with stages, tasks, and steps",icon:"\ud83d\uddfa\ufe0f",defaultName:"My User Journey"},{type:za,title:"Jobs to be Done Map",description:"Map customer jobs using the Jobs-to-be-Done framework",icon:"\ud83c\udfaf",defaultName:"My Jobs Map"}],Ga=e=>{let{isOpen:t,onClose:n,onAdd:i,journeyMapType:a}=e;const[o,s]=(0,r.useState)(""),l=()=>{s(""),n()},u=Ha(a);return(0,Pa.jsx)(Ta,{isOpen:t,onClose:l,title:`Add ${u.stage}`,children:(0,Pa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&(i(o.trim()),s(""),n())},className:"space-y-4",children:[(0,Pa.jsxs)("div",{children:[(0,Pa.jsxs)("label",{htmlFor:"stageName",className:"block text-sm font-medium text-gray-700 mb-1",children:[u.stage," Name"]}),(0,Pa.jsx)("input",{type:"text",id:"stageName",value:o,onChange:e=>s(e.target.value),placeholder:`Enter ${u.stage.toLowerCase()} name`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0,required:!0})]}),(0,Pa.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Pa.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors",children:"Cancel"}),(0,Pa.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:["Add ",u.stage]})]})]})})},qa=e=>{let{personas:t}=e;return(0,Pa.jsx)("div",{className:"flex flex-wrap gap-4",children:t.map(e=>(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsx)("div",{className:`${e.color} w-4 h-4 rounded-full`}),(0,Pa.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]},e.id))})},Ja=e=>{let{stages:t,onSwitchToStepView:n,onOpenStepDetail:i,onUpdateStep:a,onDeleteStep:o,onDeleteTask:s,onDeleteStage:l,onUpdateStage:u,onUpdateTask:c,onOpenEditPanel:d,editPanel:p,editablePainPoints:f,editableOpportunities:h,onCloseEditPanel:g,onAddPainPoint:m,onRemovePainPoint:v,onUpdatePainPoint:b,onAddOpportunity:y,onRemoveOpportunity:w,onUpdateOpportunity:x,onSaveEditChanges:k}=e;const[S,_]=(0,r.useState)({stepId:null,painPointIndex:null,opportunityIndex:null,highlightAllRelated:!1}),[j,N]=(0,r.useState)([]),C=(0,r.useRef)({}),E=(0,r.useRef)(null),I=[],P=[];t.forEach((e,t)=>{if(e.tasks.length>0){const n=I.length;e.tasks.forEach((n,r)=>{const i=[],a=[],o=[];n.steps.forEach(t=>{i.push({...t,persona:Ia(t.personaId),stepId:t.id,taskId:n.id,stageName:e.name,taskName:n.name}),t.painPoints&&t.painPoints.forEach(r=>{a.push({text:r,stepDescription:t.description,persona:Ia(t.personaId),stepId:t.id,taskId:n.id,stageName:e.name,taskName:n.name})}),t.opportunities&&t.opportunities.forEach(r=>{o.push({text:r,stepDescription:t.description,persona:Ia(t.personaId),stepId:t.id,taskId:n.id,stageName:e.name,taskName:n.name})})}),I.push({stageName:e.name,taskName:n.name,taskId:n.id,steps:i,painPoints:a,opportunities:o,stageIndex:t,taskIndex:r,isLastTaskInStage:r===e.tasks.length-1,isFirstTaskInStage:0===r})}),P.push({stageName:e.name,startIndex:n,span:e.tasks.length})}});const T=()=>{_({stepId:null,painPointIndex:null,opportunityIndex:null,highlightAllRelated:!1})},O=(e,t,n,r,i,a)=>{d(e,t,n,r,i,a)},D=e=>{let{children:t,onEdit:n,className:r,isHighlighted:i,highlightColor:a="blue",title:o,type:s="step"}=e;return(0,Pa.jsx)("div",{className:`${r} cursor-pointer relative transition-all duration-200 ${i?{blue:"ring-4 ring-blue-400 ring-opacity-50 scale-105 shadow-lg bg-blue-200",red:"ring-4 ring-red-400 ring-opacity-50 scale-105 shadow-lg bg-red-200",green:"ring-4 ring-green-400 ring-opacity-50 scale-105 shadow-lg bg-green-200",indigo:"ring-4 ring-indigo-400 ring-opacity-50 scale-105 shadow-lg bg-indigo-200"}[a]:""}`,onClick:e=>{e.stopPropagation(),n()},title:o,children:t})};return(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&T()},t=e=>{E.current&&!E.current.contains(e.target)&&T()};return document.addEventListener("keydown",e),document.addEventListener("click",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("click",t)}},[]),(0,Pa.jsx)(Pa.Fragment,{children:(0,Pa.jsxs)("div",{ref:E,className:"bg-white p-4 relative w-full min-h-full",onClick:e=>{e.target===e.currentTarget&&T()},children:[j.length>0&&(0,Pa.jsx)("svg",{className:"absolute inset-0 pointer-events-none",style:{zIndex:10},children:j.map((e,t)=>(0,Pa.jsx)("path",{d:e.path,stroke:e.color,strokeWidth:"2",fill:"none",strokeDasharray:"5,5",opacity:"0.8"},t))}),(0,Pa.jsx)("table",{className:"w-max border-separate",style:{borderSpacing:"12px 16px"},children:(0,Pa.jsxs)("tbody",{children:[(0,Pa.jsxs)("tr",{children:[(0,Pa.jsx)("td",{className:"w-32 bg-purple-50 py-4 px-4 rounded-lg",children:(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,Pa.jsx)("span",{className:"font-semibold text-purple-800",children:"Stages"})]})}),P.map(e=>(0,Pa.jsx)("td",{colSpan:e.span,className:"bg-purple-100 text-center rounded-lg",children:(0,Pa.jsx)("div",{className:"py-4 px-4",children:(0,Pa.jsx)(Ra,{title:e.stageName,onSave:n=>{const r=t.find(t=>t.name===e.stageName);r&&u&&u(r.id,{name:n})},className:"font-semibold text-purple-800"})})},`stage-${e.stageName}`))]}),(0,Pa.jsxs)("tr",{children:[(0,Pa.jsx)("td",{className:"w-32 bg-blue-50 py-4 px-4 rounded-lg",children:(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,Pa.jsx)("span",{className:"font-semibold text-blue-800",children:"Tasks"})]})}),I.map(e=>(0,Pa.jsx)("td",{className:"w-64 align-top",children:(0,Pa.jsxs)("div",{className:"bg-blue-100 rounded-lg p-3",children:[(0,Pa.jsx)("div",{className:"mb-2",children:(0,Pa.jsx)(Ra,{title:e.taskName,onSave:n=>{const r=t.find(t=>t.tasks.some(t=>t.id===e.taskId));r&&c&&c(r.id,e.taskId,{name:n})},className:"font-semibold text-blue-800 break-words"})}),(0,Pa.jsxs)("div",{className:"text-xs text-blue-600",children:[e.steps.length," step",1!==e.steps.length?"s":""]})]})},`task-${e.taskId}`))]}),(0,Pa.jsxs)("tr",{children:[(0,Pa.jsx)("td",{className:"w-32 bg-indigo-50 py-4 px-4 rounded-lg",children:(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,Pa.jsx)("span",{className:"font-semibold text-indigo-800",children:"Steps"})]})}),I.map(e=>(0,Pa.jsx)("td",{className:"w-64 align-top",children:(0,Pa.jsxs)("div",{className:"space-y-2",children:[e.steps.map(e=>{const n=S.stepId===e.stepId,r=`step-${e.taskId}-${e.stepId}`;return(0,Pa.jsx)("div",{ref:e=>C.current[r]=e,children:(0,Pa.jsxs)(D,{className:"bg-indigo-100 rounded-lg p-2 hover:bg-indigo-200",onEdit:()=>{const n=t.find(t=>t.tasks.some(t=>t.id===e.taskId)),r=null===n||void 0===n?void 0:n.tasks.find(t=>t.id===e.taskId);n&&r&&O(e,"step",n.id,n.name,r.id,r.name)},isHighlighted:n,highlightColor:"indigo",title:"Click to edit step details",type:"step",children:[(0,Pa.jsx)("p",{className:"text-indigo-800 font-medium text-sm",children:e.description||"No description"}),e.persona&&(0,Pa.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,Pa.jsx)("div",{className:`${e.persona.color} w-2 h-2 rounded-full`}),(0,Pa.jsx)("span",{className:"text-xs text-indigo-600",children:e.persona.name})]})]})},e.id)}),0===e.steps.length&&(0,Pa.jsx)("div",{className:"text-indigo-400 text-sm italic py-4 text-center",children:"No steps"})]})},`steps-${e.taskId}`))]}),(0,Pa.jsxs)("tr",{children:[(0,Pa.jsx)("td",{className:"w-32 bg-red-50 py-4 px-4 rounded-lg",children:(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,Pa.jsx)("span",{className:"font-semibold text-red-800",children:"Pain Points"})]})}),I.map(e=>(0,Pa.jsx)("td",{className:"w-64 align-top",children:(0,Pa.jsxs)("div",{className:"space-y-2",children:[e.painPoints.map((e,n)=>{const r=S.stepId===e.stepId&&(S.painPointIndex===n||S.highlightAllRelated),i=`painpoint-${e.taskId}-${e.stepId}-${n}`;return(0,Pa.jsx)("div",{ref:e=>C.current[i]=e,children:(0,Pa.jsx)(D,{className:"bg-red-100 rounded-lg p-2 hover:bg-red-200",onEdit:()=>{const n=t.find(t=>t.tasks.some(t=>t.id===e.taskId)),r=null===n||void 0===n?void 0:n.tasks.find(t=>t.id===e.taskId);n&&r&&O(e,"painpoint",n.id,n.name,r.id,r.name)},isHighlighted:r,highlightColor:"red",title:"Click to edit pain point details",type:"pain point",children:(0,Pa.jsx)("p",{className:"text-red-800 font-medium text-sm",children:e.text})})},`${e.stepId}-${n}`)}),0===e.painPoints.length&&(0,Pa.jsx)("div",{className:"text-red-400 text-sm italic py-4 text-center",children:"No pain points"})]})},`pain-${e.taskId}`))]}),(0,Pa.jsxs)("tr",{children:[(0,Pa.jsx)("td",{className:"w-32 bg-green-50 py-4 px-4 rounded-lg",children:(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),(0,Pa.jsx)("span",{className:"font-semibold text-green-800",children:"Opportunities"})]})}),I.map(e=>(0,Pa.jsx)("td",{className:"w-64 align-top",children:(0,Pa.jsxs)("div",{className:"space-y-2",children:[e.opportunities.map((e,n)=>{const r=S.stepId===e.stepId&&(S.opportunityIndex===n||S.highlightAllRelated),i=`opportunity-${e.taskId}-${e.stepId}-${n}`;return(0,Pa.jsx)("div",{ref:e=>C.current[i]=e,children:(0,Pa.jsx)(D,{className:"bg-green-100 rounded-lg p-2 hover:bg-green-200",onEdit:()=>{const n=t.find(t=>t.tasks.some(t=>t.id===e.taskId)),r=null===n||void 0===n?void 0:n.tasks.find(t=>t.id===e.taskId);n&&r&&O(e,"opportunity",n.id,n.name,r.id,r.name)},isHighlighted:r,highlightColor:"green",title:"Click to edit opportunity details",type:"opportunity",children:(0,Pa.jsx)("p",{className:"text-green-800 font-medium text-sm",children:e.text})})},`${e.stepId}-${n}`)}),0===e.opportunities.length&&(0,Pa.jsx)("div",{className:"text-green-400 text-sm italic py-4 text-center",children:"No opportunities"})]})},`opp-${e.taskId}`))]})]})})]})})},Ka=e=>{let{isOpen:t,onClose:n,stages:i,onImportData:a,journeyMapName:o}=e;const[s,l]=(0,r.useState)("export"),[u,c]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),h=(0,r.useRef)(null),g=e=>{const t=JSON.parse(e);if(!t.journeyMap||!t.journeyMap.stages)throw new Error("Invalid file format. Expected a journey map export file.");const r=t.journeyMap.stages;if(!Array.isArray(r))throw new Error("Invalid stages data format.");for(const n of r){if(!n.id||!n.name||!Array.isArray(n.tasks))throw new Error("Invalid stage structure found in file.");for(const e of n.tasks)if(!e.id||!e.name||!Array.isArray(e.steps))throw new Error("Invalid task structure found in file.")}const i=t.journeyMapName||"Imported Journey Map";f(`Successfully loaded "${i}" with ${r.length} stages and ${r.reduce((e,t)=>e+t.tasks.length,0)} tasks.`),setTimeout(()=>{a(r),n()},1e3)},m=e=>{const t=e.split("\n").filter(e=>e.trim());if(t.length<2)throw new Error("CSV file appears to be empty or has no data rows.");const r=t[0].split(",").map(e=>e.trim().replace(/"/g,"")),i=r.findIndex(e=>e.toLowerCase().includes("stage")),o=r.findIndex(e=>e.toLowerCase().includes("task")),s=r.findIndex(e=>e.toLowerCase().includes("step")||e.toLowerCase().includes("description")),l=r.findIndex(e=>e.toLowerCase().includes("persona")),u=r.findIndex(e=>e.toLowerCase().includes("pain")),c=r.findIndex(e=>e.toLowerCase().includes("opportunity"));if(-1===i||-1===o||-1===s)throw new Error("CSV must contain columns for Stage, Task, and Step/Description. Current headers: "+r.join(", "));const p=new Map;for(let n=1;n<t.length;n++){const e=t[n].split(",").map(e=>e.trim().replace(/"/g,""));if(e.length<Math.max(i,o,s)+1)continue;const r=e[i],a=e[o],f=e[s],h=l>=0?e[l]:"",g=u>=0?e[u]:"",m=c>=0?e[c]:"";if(!r||!a||!f)continue;p.has(r)||p.set(r,{id:d(),name:r,tasks:[]});const v=p.get(r);let b=v.tasks.find(e=>e.name===a);b||(b={id:d(),name:a,steps:[]},v.tasks.push(b));const y={id:d(),description:f,personas:h?[h]:[],painPoints:g?g.split(";").filter(e=>e.trim()):[],opportunities:m?m.split(";").filter(e=>e.trim()):[]};b.steps.push(y)}const h=Array.from(p.values());if(0===h.length)throw new Error("No valid data found in CSV file.");const g=h.reduce((e,t)=>e+t.tasks.length,0),m=h.reduce((e,t)=>e+t.tasks.reduce((e,t)=>e+t.steps.length,0),0);f(`Successfully imported ${h.length} stages, ${g} tasks, and ${m} steps from CSV.`),setTimeout(()=>{a(h),n()},1500)},v=()=>{c(""),f(""),h.current&&(h.current.value="")},b=e=>{l(e),v()},y=()=>{v(),l("export"),n()};return(0,Pa.jsx)(Ta,{isOpen:t,onClose:y,title:"Import/Export Journey Map Data",children:(0,Pa.jsxs)("div",{className:"space-y-6",children:[(0,Pa.jsxs)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[(0,Pa.jsx)("button",{onClick:()=>b("export"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("export"===s?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-900"),children:"Export Data"}),(0,Pa.jsx)("button",{onClick:()=>b("import"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("import"===s?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-900"),children:"Import Data"})]}),"export"===s&&(0,Pa.jsxs)("div",{className:"space-y-4",children:[(0,Pa.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Pa.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:o||"Current Journey Map"}),(0,Pa.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,Pa.jsxs)("p",{children:["\u2022 ",i.length," stages"]}),(0,Pa.jsxs)("p",{children:["\u2022 ",i.reduce((e,t)=>e+t.tasks.length,0)," tasks"]}),(0,Pa.jsxs)("p",{children:["\u2022 ",i.reduce((e,t)=>e+t.tasks.reduce((e,t)=>e+t.steps.length,0),0)," steps"]})]})]}),(0,Pa.jsx)("div",{className:"space-y-3",children:(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Export Options"}),(0,Pa.jsxs)("div",{className:"space-y-2",children:[(0,Pa.jsxs)("button",{onClick:()=>{const e={version:"1.0",exportDate:(new Date).toISOString(),journeyMapName:o||"My Journey Map",journeyMap:{stages:i}},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r;const s=(o||"journey-map").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");a.download=`${s}-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)},className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export as JSON (Recommended)"]}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 ml-2",children:"Full data export that can be imported back"})]}),(0,Pa.jsxs)("div",{className:"space-y-2 mt-3",children:[(0,Pa.jsxs)("button",{onClick:()=>{const e=[];e.push(["Stage","Task","Step Description","Persona","Pain Points","Opportunities","Insights"]),i.forEach(t=>{t.tasks.forEach(n=>{0===n.steps.length?e.push([t.name,n.name,"","","","",""]):n.steps.forEach(r=>{const i=r.painPoints?r.painPoints.join("; "):"",a=r.opportunities?r.opportunities.join("; "):"";e.push([t.name,n.name,r.description||"",r.personaId||"",i,a,r.insights||""])})})});const t=e.map(e=>e.map(e=>`"${String(e).replace(/"/g,'""')}"`).join(",")).join("\n"),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r;const s=(o||"journey-map").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");a.download=`${s}-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export as CSV"]}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 ml-2",children:"Spreadsheet format for analysis (read-only)"})]})]})})]}),"import"===s&&(0,Pa.jsxs)("div",{className:"space-y-4",children:[(0,Pa.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,Pa.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 text-amber-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.684-.833-2.464 0L3.349 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("h4",{className:"font-medium text-amber-900 mb-1",children:"Import Warning"}),(0,Pa.jsx)("p",{className:"text-sm text-amber-700",children:"Importing will replace ALL current journey map data. This action cannot be undone."})]})]})}),(0,Pa.jsxs)("div",{className:"space-y-4",children:[(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Journey Map File"}),(0,Pa.jsx)("input",{ref:h,type:"file",accept:".json,.csv",onChange:e=>{const t=e.target.files[0];if(!t)return;c(""),f("");const n=new FileReader;n.onload=e=>{try{const n=e.target.result;"csv"===t.name.toLowerCase().split(".").pop()?m(n):g(n)}catch(n){c(`Import failed: ${n.message}`)}},n.onerror=()=>{c("Failed to read file. Please try again.")},n.readAsText(t)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Only JSON and CSV files are supported"})]}),(0,Pa.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Pa.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"CSV Format Requirements"}),(0,Pa.jsxs)("div",{className:"text-sm text-blue-700 space-y-2",children:[(0,Pa.jsxs)("p",{children:[(0,Pa.jsx)("strong",{children:"Required columns:"})," Stage, Task, Step (or Description)"]}),(0,Pa.jsxs)("p",{children:[(0,Pa.jsx)("strong",{children:"Optional columns:"})," Persona, Pain Points, Opportunities"]}),(0,Pa.jsxs)("p",{children:[(0,Pa.jsx)("strong",{children:"Example header:"})," Stage,Task,Step,Persona,Pain Points,Opportunities"]}),(0,Pa.jsx)("p",{className:"text-xs",children:"\u2022 Use semicolons (;) to separate multiple pain points or opportunities"}),(0,Pa.jsx)("p",{className:"text-xs",children:"\u2022 Column names are case-insensitive and can contain partial matches"})]})]}),u&&(0,Pa.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,Pa.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Pa.jsx)("p",{className:"text-sm text-red-700",children:u})]})}),p&&(0,Pa.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,Pa.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 text-green-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Pa.jsx)("p",{className:"text-sm text-green-700",children:p})]})})]})]}),(0,Pa.jsx)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:(0,Pa.jsx)("button",{onClick:y,className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors",children:"Close"})})]})})},Qa=e=>{let{zoom:t,zoomIn:n,zoomOut:r,resetZoom:i,fitToView:a,canZoomIn:o,canZoomOut:s,isDragging:l}=e;return(0,Pa.jsxs)("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-30 flex items-center gap-3",children:[(0,Pa.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 px-2 py-1 text-xs font-medium text-gray-700",children:[Math.round(100*t),"%"]}),(0,Pa.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-1 flex items-center gap-1",children:[(0,Pa.jsx)("button",{onClick:n,disabled:!o,className:"w-6 h-6 flex items-center justify-center rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Zoom In (Ctrl + Scroll)",children:(0,Pa.jsx)("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,Pa.jsx)("button",{onClick:i,className:"w-6 h-6 flex items-center justify-center rounded-md hover:bg-gray-100 transition-colors",title:"Reset Zoom & Pan",children:(0,Pa.jsx)("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,Pa.jsx)("button",{onClick:a,className:"w-6 h-6 flex items-center justify-center rounded-md hover:bg-gray-100 transition-colors",title:"Fit to View",children:(0,Pa.jsx)("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),(0,Pa.jsx)("button",{onClick:r,disabled:!s,className:"w-6 h-6 flex items-center justify-center rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Zoom Out (Ctrl + Scroll)",children:(0,Pa.jsx)("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]}),l&&(0,Pa.jsxs)("div",{className:"bg-blue-600 text-white rounded-lg shadow-lg px-2 py-1 text-xs font-medium flex items-center gap-1",children:[(0,Pa.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16l3-3m0 0l3 3m-3-3v12M5 12l3-3m0 0l3 3m-3-3v12"})}),"Dragging"]}),(0,Pa.jsx)("div",{className:"bg-gray-800 text-white rounded-lg shadow-lg px-2 py-1 text-xs",children:(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsx)("span",{className:"font-medium",children:"Navigation:"}),(0,Pa.jsx)("span",{children:"Drag to pan \u2022 Ctrl + scroll to zoom"})]})})]})},Ya=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const[i,a]=(0,r.useState)(e),[o,s]=(0,r.useState)({x:0,y:0}),[l,u]=(0,r.useState)(!1),[c,d]=(0,r.useState)({x:0,y:0}),p=(0,r.useRef)(null),f=(0,r.useCallback)(()=>{if(!p.current)return;const e=p.current,r=e.parentElement;if(!r)return;const i=e.getBoundingClientRect(),o=r.getBoundingClientRect(),l=.9*o.width/i.width,u=.9*o.height/i.height,c=Math.min(l,u,1),d=Math.min(Math.max(c,t),n),f=(o.width-i.width*d)/2,h=(o.height-i.height*d)/2;a(d),s({x:Math.max(f,0),y:Math.max(h,0)})},[t,n]),h=(0,r.useCallback)(()=>{a(e=>Math.min(1.2*e,n))},[n]),g=(0,r.useCallback)(()=>{a(e=>Math.max(e/1.2,t))},[t]),m=(0,r.useCallback)(()=>{a(e),s({x:0,y:0})},[e]),v=(0,r.useCallback)(e=>{a(Math.min(Math.max(e,t),n))},[t,n]),b=(0,r.useCallback)(e=>{const t=e.target,n=t.closest('button, input, textarea, select, a, [role="button"]'),r=t.classList.contains("cursor-pointer")||"pointer"===getComputedStyle(t).cursor,i=t.onclick||t.closest("[onclick], .cursor-pointer"),a=t.closest(".group")&&t.closest(".group").querySelector("button"),s=t.closest('.group, [role="button"], .editable'),l=t.closest("[data-rbd-drag-handle-draggable-id]")||t.closest(".cursor-grab")||t.closest(".cursor-grabbing")||"true"===t.dataset.isDragHandle;["BUTTON","INPUT","TEXTAREA","SELECT","A"].includes(t.tagName)||n||r||i||a||s||l||0===e.button&&(u(!0),d({x:e.clientX-o.x,y:e.clientY-o.y}),e.preventDefault())},[o]),y=(0,r.useCallback)(e=>{l&&s({x:e.clientX-c.x,y:e.clientY-c.y})},[l,c]),w=(0,r.useCallback)(()=>{u(!1)},[]),x=(0,r.useCallback)(e=>{if(e.ctrlKey||e.metaKey){e.preventDefault();const l=e.deltaY>0?.9:1.1,u=Math.min(Math.max(i*l,t),n);if(u!==i){var r;const t=null===(r=p.current)||void 0===r?void 0:r.getBoundingClientRect();if(t){const n=t.width/2,r=t.height/2,a=e.clientX-t.left,l=e.clientY-t.top,c=u/i,d=n-(n-o.x-a)*c-(a-n),p=r-(r-o.y-l)*c-(l-r);s({x:d,y:p})}a(u)}}},[i,o,t,n]);(0,r.useEffect)(()=>{if(!p.current)return;const e=e=>y(e),t=()=>w();return l&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[l,y,w]);const k={ref:p,onMouseDown:b,onWheel:x,style:{cursor:l?"grabbing":"grab",transform:`translate(${o.x}px, ${o.y}px) scale(${i})`,transformOrigin:"0 0",transition:l?"none":"transform 0.1s ease-out",minWidth:"100%",minHeight:"100%"}};return{zoom:i,pan:o,isDragging:l,zoomIn:h,zoomOut:g,resetZoom:m,fitToView:f,setZoomLevel:v,containerProps:k,canZoomIn:i<n,canZoomOut:i>t}},Xa=e=>{let{stages:t,journeyMapName:n,journeyMapType:i,currentView:a,onAddStage:o,onUpdateStage:s,onDeleteStage:l,onAddTask:u,onUpdateTask:c,onDeleteTask:d,onAddStep:p,onUpdateStep:f,onDeleteStep:h,onMoveStep:g,onSwitchToStepView:m,onImportData:v,onOpenStepDetail:b,onOpenEditPanel:y,editPanel:w,editablePainPoints:x,editableOpportunities:k,onCloseEditPanel:S,onAddPainPoint:_,onRemovePainPoint:j,onUpdatePainPoint:N,onAddOpportunity:C,onRemoveOpportunity:E,onUpdateOpportunity:I,onSaveEditChanges:P}=e;const[T,O]=(0,r.useState)(!1),[D,A]=(0,r.useState)(!1),{zoom:L,pan:R,isDragging:M,zoomIn:B,zoomOut:$,resetZoom:U,fitToView:F,containerProps:z,canZoomIn:W,canZoomOut:H}=Ya(),V=Ha(i);return(0,Pa.jsxs)("div",{className:"bg-white rounded-lg p-2 relative",children:[(0,Pa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Pa.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Pa.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:V.stages}),(0,Pa.jsx)(qa,{personas:Ea})]}),(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:["painpoint"===a&&(0,Pa.jsxs)("button",{onClick:()=>A(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded text-sm transition-colors flex items-center gap-1.5",children:[(0,Pa.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Import/Export"]}),(0,Pa.jsxs)("button",{onClick:()=>O(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded text-sm transition-colors flex items-center gap-1.5",children:[(0,Pa.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add ",V.stage]})]})]}),(0,Pa.jsx)(zi,{onDragEnd:e=>{const{destination:t,source:n,draggableId:r}=e;if("step"!==a)return;if(!t)return;if(t.droppableId===n.droppableId&&t.index===n.index)return;const i=n.droppableId.split("-"),o=t.droppableId.split("-"),s=i[1],l=i[2],u=o[1],c=o[2];g&&g({stepId:r,sourceStageId:s,sourceTaskId:l,sourceIndex:n.index,destStageId:u,destTaskId:c,destIndex:t.index})},children:(0,Pa.jsx)("div",{className:"relative bg-white rounded-lg border border-gray-200 min-h-96",style:{height:"calc(100vh - 120px)",overflow:"hidden"},children:(0,Pa.jsx)("div",{...z,className:"bg-white",style:{...z.style,minWidth:"100vw",minHeight:"100vh"},children:"step"===a?(0,Pa.jsxs)("div",{className:"flex gap-6 p-2 min-w-max bg-white min-h-full",children:[t.map(e=>(0,Pa.jsx)(Ua,{stage:e,journeyMapType:i,currentView:a,onUpdateStage:s,onDeleteStage:l,onAddTask:u,onUpdateTask:c,onDeleteTask:d,onAddStep:p,onUpdateStep:f,onDeleteStep:h,onSwitchToStepView:m,onOpenStepDetail:b},e.id)),0===t.length&&(0,Pa.jsxs)("div",{className:"w-full text-center py-12 text-gray-500 bg-white min-h-full flex flex-col justify-center",children:[(0,Pa.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,Pa.jsxs)("p",{className:"text-lg font-medium",children:["No ",V.stages.toLowerCase()," yet"]}),(0,Pa.jsxs)("p",{className:"text-sm",children:["Add your first ",V.stage.toLowerCase()," to get started"]})]})]}):(0,Pa.jsx)("div",{className:"p-2 bg-white w-full h-full min-h-full",children:(0,Pa.jsx)(Ja,{stages:t,journeyMapType:i,onSwitchToStepView:m,onOpenStepDetail:b,onUpdateStep:f,onDeleteStep:h,onUpdateStage:s,onUpdateTask:c,onDeleteTask:d,onDeleteStage:l,onOpenEditPanel:y,editPanel:w,editablePainPoints:x,editableOpportunities:k,onCloseEditPanel:S,onAddPainPoint:_,onRemovePainPoint:j,onUpdatePainPoint:N,onAddOpportunity:C,onRemoveOpportunity:E,onUpdateOpportunity:I,onSaveEditChanges:P})})})})}),(0,Pa.jsx)(Qa,{zoom:L,zoomIn:B,zoomOut:$,resetZoom:U,fitToView:F,canZoomIn:W,canZoomOut:H,isDragging:M}),(0,Pa.jsx)(Ga,{isOpen:T,onClose:()=>O(!1),onAdd:o,journeyMapType:i}),(0,Pa.jsx)(Ka,{isOpen:D,onClose:()=>A(!1),stages:t,journeyMapName:n,journeyMapType:i,onImportData:v})]})};class Za extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class eo extends Za{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class to extends Za{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class no extends Za{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ro;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(ro||(ro={}));var io=function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})};class ao{constructor(e){let{headers:t={},customFetch:r,region:i=ro.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return io(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:a}=t;let o={},{region:s}=t;s||(s=this.region);const l=new URL(`${this.url}/${e}`);let u;s&&"any"!==s&&(o["x-region"]=s,l.searchParams.set("forceFunctionRegion",s)),a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):"string"===typeof a?(o["Content-Type"]="text/plain",u=a):"undefined"!==typeof FormData&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const c=yield this.fetch(l.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:u}).catch(e=>{throw new eo(e)}),d=c.headers.get("x-relay-error");if(d&&"true"===d)throw new to(c);if(!c.ok)throw new no(c);let p,f=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return p="application/json"===f?yield c.json():"application/octet-stream"===f?yield c.blob():"text/event-stream"===f?c:"multipart/form-data"===f?yield c.formData():yield c.text(),{data:p,error:null,response:c}}catch(r){return{data:null,error:r,response:r instanceof no||r instanceof to?r.context:void 0}}})}}var oo=n(980);const{PostgrestClient:so,PostgrestQueryBuilder:lo,PostgrestFilterBuilder:uo,PostgrestTransformBuilder:co,PostgrestBuilder:po,PostgrestError:fo}=oo;const ho=function(){if("undefined"!==typeof WebSocket)return WebSocket;if("undefined"!==typeof global.WebSocket)return global.WebSocket;if("undefined"!==typeof window.WebSocket)return window.WebSocket;if("undefined"!==typeof self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var go,mo,vo,bo,yo,wo;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(go||(go={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(mo||(mo={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(vo||(vo={})),function(e){e.websocket="websocket"}(bo||(bo={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(yo||(yo={}));class xo{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+r));a+=r;const s=n.decode(e.slice(a,a+i));a+=i;return{ref:null,topic:o,event:s,payload:JSON.parse(n.decode(e.slice(a,e.byteLength)))}}}class ko{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(wo||(wo={}));const So=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,i)=>(n[i]=_o(i,e,t,r),n),{})},_o=(e,t,n,r)=>{const i=t.find(t=>t.name===e),a=null===i||void 0===i?void 0:i.type,o=n[e];return a&&!r.includes(a)?jo(a,o):No(o)},jo=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Po(t,n)}switch(e){case wo.bool:return Co(t);case wo.float4:case wo.float8:case wo.int2:case wo.int4:case wo.int8:case wo.numeric:case wo.oid:return Eo(t);case wo.json:case wo.jsonb:return Io(t);case wo.timestamp:return To(t);case wo.abstime:case wo.date:case wo.daterange:case wo.int4range:case wo.int8range:case wo.money:case wo.reltime:case wo.text:case wo.time:case wo.timestamptz:case wo.timetz:case wo.tsrange:case wo.tstzrange:default:return No(t)}},No=e=>e,Co=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Eo=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Io=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Po=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,n);try{r=JSON.parse("["+a+"]")}catch(i){r=a?a.split(","):[]}return r.map(e=>jo(t,e))}return e},To=e=>"string"===typeof e?e.replace(" ","T"):e,Oo=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Do{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ao,Lo,Ro,Mo;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Ao||(Ao={}));class Bo{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bo.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=Bo.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Bo.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),a=this.transformState(t),o={},s={};return this.map(i,(e,t)=>{a[e]||(s[e]=t)}),this.map(a,(e,t)=>{const n=i[e];if(n){const r=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),a=t.filter(e=>i.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(o[e]=a),l.length>0&&(s[e]=l)}else o[e]=t}),this.syncDiff(i,{joins:o,leaves:s},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const a=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),a.length>0){const n=e[t].map(e=>e.presence_ref),r=a.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,a,r)}),this.map(a,(t,n)=>{let i=e[t];if(!i)return;const a=n.map(e=>e.presence_ref);i=i.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(Lo||(Lo={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Ro||(Ro={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Mo||(Mo={}));class $o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=mo.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Do(this,vo.join,this.params,this.timeout),this.rejoinTimer=new ko(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mo.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mo.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=mo.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mo.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vo.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Bo(this),this.broadcastEndpointURL=Oo(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==mo.closed){const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(t=>null===e||void 0===e?void 0:e(Mo.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(Mo.CLOSED));const s={},l={broadcast:i,presence:a,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],private:o};this.socket.accessTokenValue&&(s.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},s)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,i=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,a=[];for(let r=0;r<i;r++){const i=t[r],{filter:{event:o,schema:s,table:l,filter:u}}=i,c=n&&n[r];if(!c||c.event!==o||c.schema!==s||c.table!==l||c.filter!==u)return this.unsubscribe(),this.state=mo.errored,void(null===e||void 0===e||e(Mo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},i),{id:c.id}))}return this.bindings.postgres_changes=a,void(e&&e(Mo.SUBSCRIBED))}null===e||void 0===e||e(Mo.SUBSCRIBED)}).receive("error",t=>{this.state=mo.errored,null===e||void 0===e||e(Mo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(Mo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,i,a;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===a?void 0:a.ack)||n("ok"),o.receive("ok",()=>n("ok")),o.receive("error",()=>n("error")),o.receive("timeout",()=>n("timed out"))});{const{event:a,payload:o}=e,s={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=mo.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vo.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Do(this,vo.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),a}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Do(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const a=e.toLocaleLowerCase(),{close:o,error:s,leave:l,join:u}=vo;if(n&&[o,s,l,u].indexOf(a)>=0&&n!==this._joinRef())return;let c=this._onMessage(a,t,n);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===a}).map(e=>e.callback(c,n)):null===(i=this.bindings[a])||void 0===i||i.filter(e=>{var n,r,i,o,s,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,o=null===(n=e.filter)||void 0===n?void 0:n.event;return a&&(null===(r=t.ids)||void 0===r?void 0:r.includes(a))&&("*"===o||(null===o||void 0===o?void 0:o.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(s=null===(o=null===e||void 0===e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof c&&"ids"in c){const e=c.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:a}=e,o={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:a};c=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(c,n)})}_isClosed(){return this.state===mo.closed}_isJoined(){return this.state===mo.joined}_isJoining(){return this.state===mo.joining}_isLeaving(){return this.state===mo.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&$o.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vo.close,{},e)}_onError(e){this._on(vo.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mo.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=So(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=So(e.columns,e.old_record)),t}}const Uo=()=>{};class Fo{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Uo,this.ref=0,this.logger=Uo,this.conn=null,this.sendBuffer=[],this.serializer=new xo,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},this.endPoint=`${e}/${bo.websocket}`,this.httpEndpoint=Oo(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),((null===t||void 0===t?void 0:t.logLevel)||(null===t||void 0===t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ko(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=ho),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case go.connecting:return yo.Connecting;case go.open:return yo.Open;case go.closing:return yo.Closing;default:return yo.Closed}}isConnected(){return this.connectionState()===yo.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new $o(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:"realtime-js/2.11.15"};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(vo.access_token,{access_token:e})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:r,ref:i}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${t} ${n} ${i&&"("+i+")"||""}`,r),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(vo.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class zo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Wo(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Ho extends zo{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Vo extends zo{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Go=function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})};const qo=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Jo=e=>{if(Array.isArray(e))return e.map(e=>Jo(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const i=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[i]=Jo(r)}),t};var Ko=function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})};const Qo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Yo=(e,t,r)=>Ko(void 0,void 0,void 0,function*(){const i=yield Go(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof i&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{t(new Ho(Qo(n),e.status||500))}).catch(e=>{t(new Vo(Qo(e),e))}):t(new Vo(Qo(e),e))});function Xo(e,t,n,r,i,a){return Ko(this,void 0,void 0,function*(){return new Promise((o,s)=>{e(n,((e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))})(t,r,i,a)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>Yo(e,s,r))})})}function Zo(e,t,n,r){return Ko(this,void 0,void 0,function*(){return Xo(e,"GET",t,n,r)})}function es(e,t,n,r,i){return Ko(this,void 0,void 0,function*(){return Xo(e,"POST",t,r,i,n)})}function ts(e,t,n,r,i){return Ko(this,void 0,void 0,function*(){return Xo(e,"DELETE",t,r,i,n)})}var ns=function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})};const rs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},is={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class as{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=qo(r)}uploadOrUpdate(e,t,n,r){return ns(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},is),r);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const s=a.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),s&&i.append("metadata",this.encodeMetadata(s)),i.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),s&&i.append("metadata",this.encodeMetadata(s))):(i=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,s&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(s)))),(null===r||void 0===r?void 0:r.headers)&&(o=Object.assign(Object.assign({},o),r.headers));const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:o},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{})),d=yield c.json();if(c.ok)return{data:{path:l,id:d.Id,fullPath:d.Key},error:null};return{data:null,error:d}}catch(i){if(Wo(i))return{data:null,error:i};throw i}})}upload(e,t,n){return ns(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return ns(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:is.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);const s=yield this.fetch(o.toString(),{method:"PUT",body:e,headers:a}),l=yield s.json();if(s.ok)return{data:{path:i,fullPath:l.Key},error:null};return{data:null,error:l}}catch(s){if(Wo(s))return{data:null,error:s};throw s}})}createSignedUploadUrl(e,t){return ns(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield es(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new zo("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(Wo(n))return{data:null,error:n};throw n}})}update(e,t,n){return ns(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return ns(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Wo(r))return{data:null,error:r};throw r}})}copy(e,t,n){return ns(this,void 0,void 0,function*(){try{return{data:{path:(yield es(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Wo(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return ns(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield es(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const a=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(r){if(Wo(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return ns(this,void 0,void 0,function*(){try{const r=yield es(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(r){if(Wo(r))return{data:null,error:r};throw r}})}download(e,t){return ns(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),i=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield Zo(this.fetch,`${this.url}/${n}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(a){if(Wo(a))return{data:null,error:a};throw a}})}info(e){return ns(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Zo(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Jo(e),error:null}}catch(n){if(Wo(n))return{data:null,error:n};throw n}})}exists(e){return ns(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return Ko(this,void 0,void 0,function*(){return Xo(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Wo(n)&&n instanceof Vo){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&r.push(i);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==o&&r.push(o);let s=r.join("&");return""!==s&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${s}`)}}}remove(e){return ns(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Wo(t))return{data:null,error:t};throw t}})}list(e,t,n){return ns(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},rs),t),{prefix:e||""});return{data:yield es(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Wo(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const os={"X-Client-Info":"storage-js/2.7.1"};var ss=function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})};class ls{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},os),t),this.fetch=qo(n)}listBuckets(){return ss(this,void 0,void 0,function*(){try{return{data:yield Zo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Wo(e))return{data:null,error:e};throw e}})}getBucket(e){return ss(this,void 0,void 0,function*(){try{return{data:yield Zo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Wo(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ss(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Wo(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return ss(this,void 0,void 0,function*(){try{const n=yield function(e,t,n,r,i){return Ko(this,void 0,void 0,function*(){return Xo(e,"PUT",t,r,i,n)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(Wo(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ss(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Wo(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ss(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Wo(t))return{data:null,error:t};throw t}})}}class us extends ls{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new as(this.url,this.headers,e,this.fetch)}}let cs="";cs="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ds={headers:{"X-Client-Info":`supabase-js-${cs}/2.51.0`}},ps={schema:"public"},fs={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hs={};var gs=n(630),ms=function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})};const vs=e=>{let t;return t=e||("undefined"===typeof fetch?gs.default:fetch),function(){return t(...arguments)}},bs=(e,t,n)=>{const r=vs(n),i="undefined"===typeof Headers?gs.Headers:Headers;return(n,a)=>ms(void 0,void 0,void 0,function*(){var o;const s=null!==(o=yield t())&&void 0!==o?o:e;let l=new i(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${s}`),r(n,Object.assign(Object.assign({},a),{headers:l}))})};var ys=function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})};const ws="2.71.0",xs=3e4,ks=9e4,Ss={"X-Client-Info":`gotrue-js/${ws}`},_s="X-Supabase-Api-Version",js={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Ns=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Cs extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Es(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Is extends Cs{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Ps extends Cs{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ts extends Cs{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Os extends Ts{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ds extends Ts{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class As extends Ts{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ls extends Ts{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rs extends Ts{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ms extends Ts{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Bs(e){return Es(e)&&"AuthRetryableFetchError"===e.name}class $s extends Ts{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Us extends Ts{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zs=" \t\n\r=".split(""),Ws=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<zs.length;t+=1)e[zs[t].charCodeAt(0)]=-2;for(let t=0;t<Fs.length;t+=1)e[Fs[t].charCodeAt(0)]=t;return e})();function Hs(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Fs[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Fs[e]),t.queuedBits-=6}}function Vs(e,t,n){const r=Ws[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Gs(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let o=0;o<e.length;o+=1)Vs(e.charCodeAt(o),i,a);return t.join("")}function qs(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Js(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}qs(r,t)}}function Ks(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)Vs(e.charCodeAt(i),n,r);return new Uint8Array(t)}function Qs(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Hs(e,n,r)),Hs(null,n,r),t.join("")}const Ys=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Xs={tested:!1,writable:!1},Zs=()=>{if(!Ys())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(Xs.tested)return Xs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Xs.tested=!0,Xs.writable=!0}catch(t){Xs.tested=!0,Xs.writable=!1}return Xs.writable};const el=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},tl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},nl=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},rl=async(e,t)=>{await e.removeItem(t)};class il{constructor(){this.promise=new il.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function al(e){const t=e.split(".");if(3!==t.length)throw new Us("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Ns.test(t[n]))throw new Us("JWT not in base64url format");return{header:JSON.parse(Gs(t[0])),payload:JSON.parse(Gs(t[1])),signature:Ks(t[2]),raw:{header:t[0],payload:t[1]}}}function ol(e){return("0"+e.toString(16)).substr(-2)}async function sl(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ll(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,ol).join("")}();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await tl(e,`${t}-code-verifier`,i);const a=await sl(r);return[a,r===a?"plain":"s256"]}il.promiseConstructor=Promise;const ul=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const cl=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function dl(e){if(!cl.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pl(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var fl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const hl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gl=[502,503,504];async function ml(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Ms(hl(e),0);if(gl.includes(e.status))throw new Ms(hl(e),e.status);let r,i;try{r=await e.json()}catch(o){throw new Ps(hl(o),o)}const a=function(e){const t=e.headers.get(_s);if(!t)return null;if(!t.match(ul))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(o){return null}}(e);if(a&&a.getTime()>=js.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?i=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new $s(hl(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new Os}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new $s(hl(r),e.status,r.weak_password.reasons);throw new Is(hl(r),e.status||500,i)}async function vl(e,t,n,r){var i;const a=Object.assign({},null===r||void 0===r?void 0:r.headers);a[_s]||(a[_s]=js.name),(null===r||void 0===r?void 0:r.jwt)&&(a.Authorization=`Bearer ${r.jwt}`);const o=null!==(i=null===r||void 0===r?void 0:r.query)&&void 0!==i?i:{};(null===r||void 0===r?void 0:r.redirectTo)&&(o.redirect_to=r.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await async function(e,t,n,r,i,a){const o=((e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))})(t,r,i,a);let s;try{s=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Ms(hl(l),0)}s.ok||await ml(s);if(null===r||void 0===r?void 0:r.noResolveJson)return s;try{return await s.json()}catch(l){await ml(l)}}(e,t,n+s,{headers:a,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function bl(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function yl(e){const t=bl(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function wl(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function xl(e){return{data:e,error:null}}function kl(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,o=fl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},user:Object.assign({},o)},error:null}}function Sl(e){return e}const _l=["global","local","others"];var jl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Nl{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=el(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_l[0];if(_l.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_l.join(", ")}`);try{return await vl(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Es(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await vl(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:wl})}catch(n){if(Es(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=jl(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await vl(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:kl,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Es(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await vl(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wl})}catch(t){if(Es(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,a,o,s;try{const l={nextPage:null,lastPage:0,total:0},u=await vl(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:Sl});if(u.error)throw u.error;const c=await u.json(),d=null!==(a=u.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(s=null===(o=u.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==s?s:[];return p.length>0&&(p.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(l){if(Es(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){dl(e);try{return await vl(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wl})}catch(t){if(Es(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){dl(e);try{return await vl(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:wl})}catch(n){if(Es(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];dl(e);try{return await vl(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:wl})}catch(n){if(Es(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){dl(e.userId);try{const{data:t,error:n}=await vl(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Es(t))return{data:null,error:t};throw t}}async _deleteFactor(e){dl(e.userId),dl(e.id);try{return{data:await vl(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Es(t))return{data:null,error:t};throw t}}}function Cl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const El=!!(globalThis&&Zs()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Il extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Pl extends Il{}async function Tl(e,t,n){El&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),El&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw El&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Pl(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(El)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}El&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{El&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Ol={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ss,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dl(e,t,n){return await n()}const Al={};class Ll{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ll.nextInstanceID,Ll.nextInstanceID+=1,this.instanceID>0&&Ys()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Ol),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Nl({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=el(r.fetch),this.lock=r.lock||Dl,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Ys()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Tl:this.lock=Dl,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Zs()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cl(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Cl(this.memoryStorage)),Ys()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Al[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Al[this.storageKey]=Object.assign(Object.assign({},Al[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Al[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Al[this.storageKey]=Object.assign(Object.assign({},Al[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(`GoTrueClient@${this.instanceID} (${ws}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Ys()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return Es(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Es(t)?{error:t}:{error:new Ps("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await vl(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:bl}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const s=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(i){if(Es(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:n,password:r,options:a}=e;let o=null,s=null;"pkce"===this.flowType&&([o,s]=await ll(this.storage,this.storageKey)),i=await vl(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:o,code_challenge_method:s},xform:bl})}else{if(!("phone"in e))throw new As("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:o}=e;i=await vl(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(n=null===o||void 0===o?void 0:o.data)&&void 0!==n?n:{},channel:null!==(r=null===o||void 0===o?void 0:o.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:bl})}}const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const s=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(i){if(Es(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:i}=e;t=await vl(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:yl})}else{if(!("phone"in e))throw new As("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:i}=e;t=await vl(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:yl})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new Ds}}catch(t){if(Es(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,i,a,o,s,l,u,c,d,p;let f,h;if("message"in e)f=e.message,h=e.signature;else{const{chain:d,wallet:p,statement:g,options:m}=e;let v;if(Ys())if("object"===typeof p)v=p;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof p||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=p}const b=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===m||void 0===m?void 0:m.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),h=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${b.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${null!==(r=null===(n=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(i=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...(null===(a=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...(null===(o=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===o?void 0:o.chainId)?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...(null===(s=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===s?void 0:s.nonce)?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...(null===(l=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...(null===(c=null===(u=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===u?void 0:u.resources)||void 0===c?void 0:c.length)?["Resources",...m.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");h=e}}try{const{data:t,error:n}=await vl(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Qs(h)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(p=e.options)||void 0===p?void 0:p.captchaToken}}:null),xform:bl});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Ds}}catch(g){if(Es(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await nl(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:i}=await vl(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:bl});if(await rl(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new Ds}}catch(i){if(Es(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:a}=e,o=await vl(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:bl}),{data:s,error:l}=o;return l?{data:{user:null,session:null},error:l}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:l}):{data:{user:null,session:null},error:new Ds}}catch(t){if(Es(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,a;try{if("email"in e){const{email:r,options:i}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await ll(this.storage,this.storageKey));const{error:s}=await vl(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null===i||void 0===i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:o},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:t,options:n}=e,{data:o,error:s}=await vl(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(i=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(a=null===n||void 0===n?void 0:n.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:s}}throw new As("You must provide either an email or phone number.")}catch(o){if(Es(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:a,error:o}=await vl(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:bl});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const s=a.session,l=a.user;return(null===s||void 0===s?void 0:s.access_token)&&(await this._saveSession(s),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(r){if(Es(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,a=null;return"pkce"===this.flowType&&([i,a]=await ll(this.storage,this.storageKey)),await vl(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:xl})}catch(i){if(Es(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Os;const{error:r}=await vl(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Es(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:a}=await vl(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:n,type:r,options:i}=e,{data:a,error:o}=await vl(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:o}}throw new As("You must provide either an email or phone number and a type")}catch(t){if(Es(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await nl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<ks;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await nl(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=pl()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await vl(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wl}):await this._useSession(async e=>{var t,n,r;const{data:i,error:a}=e;if(a)throw a;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await vl(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:wl}):{data:{user:null},error:new Os}})}catch(t){if(Es(t))return function(e){return Es(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await rl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Os;const a=r.session;let o=null,s=null;"pkce"===this.flowType&&null!=e.email&&([o,s]=await ll(this.storage,this.storageKey));const{data:l,error:u}=await vl(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:s}),jwt:a.access_token,xform:wl});if(u)throw u;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(Es(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Os;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:a}=al(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Es(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Os;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Es(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ys())throw new Ls("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ls(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Rs("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ls("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Rs("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:o,expires_at:s,token_type:l}=e;if(!i||!o||!a||!l)throw new Ls("No session defined in URL");const u=Math.round(Date.now()/1e3),c=parseInt(o);let d=u+c;s&&(d=parseInt(s));const p=d-u;1e3*p<=xs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${c}s`);const f=d-c;u-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,u):u-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,u);const{data:h,error:g}=await this._getUser(i);if(g)throw g;const m={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:c,expires_at:d,refresh_token:a,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(Es(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await nl(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const a=null===(n=r.session)||void 0===n?void 0:n.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return Es(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await rl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await ll(this.storage,this.storageKey,!0));try{return await vl(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Es(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Es(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,i,a,o;const{data:s,error:l}=t;if(l)throw l;const u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await vl(this.fetch,"GET",u,{headers:this.headers,jwt:null!==(o=null===(a=s.session)||void 0===a?void 0:a.access_token)&&void 0!==o?o:void 0})});if(r)throw r;return Ys()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Es(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)throw a;return await vl(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(Es(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await vl(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bl})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Bs(t)&&Date.now()+n-i<xs},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await n(a);if(!r(a,null,t))return void e(t)}catch(i){if(!r(a,i))return void t(i)}})()}))}catch(i){if(this._debug(t,"error",i),Es(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ys()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await nl(this.storage,this.storageKey);if(i&&this.userStorage){let t=await nl(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:i.user},await tl(this.userStorage,this.storageKey+"-user",t)),i.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:pl()}else if(i&&!i.user&&!i.user){const e=await nl(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(i.user=e.user,await rl(this.storage,this.storageKey+"-user"),await tl(this.storage,this.storageKey,i)):i.user=pl()}if(this._debug(n,"session from storage",i),!this._isValidSession(i))return this._debug(n,"session is not valid"),void(null!==i&&await this._removeSession());const a=1e3*(null!==(t=i.expires_at)&&void 0!==t?t:1/0)-Date.now()<ks;if(this._debug(n,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:e}=await this._callRefreshToken(i.refresh_token);e&&(console.error(e),Bs(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(i.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){return this._debug(n,"error",i),void console.error(i)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Os;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new il;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Os;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),Es(i)){const e={session:null,error:i};return Bs(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(i){r.push(i)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await tl(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=structuredClone(e);await tl(this.storage,this.storageKey,r)}else{const e=structuredClone(t);await tl(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await rl(this.storage,this.storageKey),await rl(this.storage,this.storageKey+"-code-verifier"),await rl(this.storage,this.storageKey+"-user"),this.userStorage&&await rl(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ys()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),xs);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/xs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Il))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ys()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null===n||void 0===n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await ll(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await vl(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Es(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:s,error:l}=await vl(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===s||void 0===s?void 0:s.totp)||void 0===r?void 0:r.qr_code)&&(s.totp.qr_code=`data:image/svg+xml;utf-8,${s.totp.qr_code}`),{data:s,error:null})})}catch(t){if(Es(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await vl(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(Es(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await vl(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Es(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=al(r.access_token);let o=null;a.aal&&(o=a.aal);let s=o;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(s="aal2");return{data:{currentLevel:o,nextLevel:s,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:r,error:i}=await vl(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=n,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:i,signature:a,raw:{header:o,payload:s}}=al(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:r,signature:a},error:null}}const u=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!await crypto.subtle.verify(u,c,a,function(e){const t=[];return Js(e,e=>t.push(e)),new Uint8Array(t)}(`${o}.${s}`)))throw new Us("Invalid JWT signature");return{data:{claims:i,header:r,signature:a},error:null}}catch(n){if(Es(n))return{data:null,error:n};throw n}}}Ll.nextInstanceID=0;const Rl=Ll;class Ml extends Rl{constructor(e){super(e)}}var Bl=function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})};class $l{constructor(e,t,n){var r,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=(s=e).endsWith("/")?s:s+"/";var s;const l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c=function(e,t){var n,r;const{db:i,auth:a,realtime:o,global:s}=e,{db:l,auth:u,realtime:c,global:d}=t,p={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null===s||void 0===s?void 0:s.headers)&&void 0!==r?r:{})}),accessToken:()=>ys(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}(null!==n&&void 0!==n?n:{},{db:ps,realtime:hs,auth:Object.assign(Object.assign({},fs),{storageKey:u}),global:ds});this.storageKey=null!==(r=c.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=c.global.headers)&&void 0!==i?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=c.auth)&&void 0!==a?a:{},this.headers,c.global.fetch),this.fetch=bs(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new so(new URL("rest/v1",l).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new ao(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new us(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Bl(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:i,detectSessionInUrl:a,storage:o,storageKey:s,flowType:l,lock:u,debug:c}=e;const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ml({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),t),storageKey:s,autoRefreshToken:r,persistSession:i,detectSessionInUrl:a,storage:o,flowType:l,lock:u,debug:c,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Fo(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const Ul=((e,t,n)=>new $l(e,t,n))("https://vusptjrlenppbqcynowj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ1c3B0anJsZW5wcGJxY3lub3dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3MDE1NjgsImV4cCI6MjA2ODI3NzU2OH0.iv4-SpA69gVv1B7nM03rW1ne8WmBqxCpH9_dOuYXNs8"),Fl=()=>{let e=localStorage.getItem("userSessionId");return e||(e="user_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),localStorage.setItem("userSessionId",e)),{uid:e,isAnonymous:!0}},zl=e=>{if(!e||!e.uid)return"Anonymous";const t=e.uid,n=["Quick","Smart","Bright","Cool","Fast","Sharp","Bold","Swift"],r=["Fox","Wolf","Eagle","Lion","Tiger","Hawk","Bear","Shark"];let i=0;for(let s=0;s<t.length;s++)i=(i<<5)-i+t.charCodeAt(s)&4294967295;const a=Math.abs(i)%n.length,o=Math.abs(i>>8)%r.length;return`${n[a]} ${r[o]}`},Wl="journey_maps",Hl="journey_map_versions",Vl=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{const a=Fl(),o={journey_map_id:e,user_id:a.uid,change_type:t,change_details:n,previous_data:r,new_data:i,timestamp:(new Date).toISOString(),user_session:a.uid},{error:s}=await Ul.from(Hl).insert([o]);s&&console.error("Error creating version history:",s)}catch(a){console.error("Error in createVersionHistory:",a)}},Gl=e=>{const t=async()=>{const{data:t,error:n}=await Ul.from(Wl).select("*").order("last_modified",{ascending:!1});n?console.error("Error fetching journey maps:",n):e(t||[])};t();const n=Ul.channel("journey_maps_changes").on("postgres_changes",{event:"*",schema:"public",table:Wl},()=>{t()}).subscribe();return()=>{n.unsubscribe()}},ql=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"My Journey Map",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user_journey";try{const{data:n,error:r}=await Ul.from(Wl).insert([{name:e,map_type:t,stages:[],last_modified:(new Date).toISOString(),created:(new Date).toISOString()}]).select();if(r)throw r;const i=n[0].id;return await Vl(i,"map_created",`Journey map "${e}" of type "${t}" created`),i}catch(n){throw console.error("Error creating journey map:",n),n}},Jl=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Stages updated";try{const r=await Kl(e),{error:i}=await Ul.from(Wl).update({stages:t,last_modified:(new Date).toISOString()}).eq("id",e);if(i)throw i;await Vl(e,"stages_updated",n,null===r||void 0===r?void 0:r.stages,t)}catch(r){throw console.error("Error updating journey map:",r),r}},Kl=async e=>{try{const{data:t,error:n}=await Ul.from(Wl).select("*").eq("id",e).single();if(n)throw n;return t}catch(t){throw console.error("Error getting journey map:",t),t}},Ql=async(e,t,n,r)=>{await Vl(e,`stage_${t}`,r,null,n)},Yl=async(e,t,n,r)=>{await Vl(e,`task_${t}`,r,null,n)},Xl=async(e,t,n,r)=>{await Vl(e,`step_${t}`,r,null,n)},Zl=e=>{let{isOpen:t,onClose:n,onAdd:i}=e;const[a,o]=(0,r.useState)(Fa),[s,l]=(0,r.useState)(""),[u,c]=(0,r.useState)(!1),d=()=>{l(""),o(Fa),c(!1)},p=()=>{d(),n()},f=()=>a===za?["Customer Acquisition Jobs","Product Development Jobs","Customer Retention Jobs","Support & Service Jobs","Onboarding Jobs","Decision Making Jobs","Problem Resolution Jobs","Product Discovery Jobs"]:["E-commerce Purchase Journey","SaaS Onboarding Journey","Mobile App User Journey","Customer Support Journey","Product Discovery Journey","Subscription Renewal Journey","Return & Refund Journey","B2B Sales Journey"],h=Va.find(e=>e.type===a);return(0,Pa.jsx)(Ta,{isOpen:t,onClose:p,title:"Create New Map",children:(0,Pa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.trim()&&!u){c(!0);try{await i(s.trim(),a),d(),n()}catch(t){console.error("Error creating journey map:",t)}finally{c(!1)}}},className:"space-y-6",children:[(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Choose Map Type"}),(0,Pa.jsx)("div",{className:"grid grid-cols-1 gap-3",children:Va.map(e=>(0,Pa.jsx)("div",{onClick:()=>{return t=e.type,o(t),void l("");var t},className:"p-4 border rounded-lg cursor-pointer transition-colors "+(a===e.type?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,Pa.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Pa.jsx)("div",{className:"text-2xl",children:e.icon}),(0,Pa.jsxs)("div",{className:"flex-1",children:[(0,Pa.jsx)("h3",{className:"font-medium "+(a===e.type?"text-blue-900":"text-gray-900"),children:e.title}),(0,Pa.jsx)("p",{className:"text-sm mt-1 "+(a===e.type?"text-blue-700":"text-gray-600"),children:e.description})]}),(0,Pa.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center "+(a===e.type?"border-blue-500 bg-blue-500":"border-gray-300"),children:a===e.type&&(0,Pa.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]})},e.type))})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsxs)("label",{htmlFor:"journeyName",className:"block text-sm font-medium text-gray-700 mb-2",children:[null===h||void 0===h?void 0:h.title," Name"]}),(0,Pa.jsx)("input",{type:"text",id:"journeyName",value:s,onChange:e=>l(e.target.value),placeholder:`e.g., ${f()[0]}`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0,maxLength:100,required:!0}),(0,Pa.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Give your ",null===h||void 0===h?void 0:h.title.toLowerCase()," a descriptive name."]})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quick Suggestions"}),(0,Pa.jsx)("div",{className:"grid grid-cols-2 gap-2",children:f().map(e=>(0,Pa.jsx)("button",{type:"button",onClick:()=>(e=>{l(e)})(e),className:"text-left px-3 py-2 text-sm bg-gray-50 hover:bg-blue-50 hover:text-blue-700 border border-gray-200 rounded-lg transition-colors",children:e},e))})]}),(0,Pa.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,Pa.jsx)("button",{type:"button",onClick:p,className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors",disabled:u,children:"Cancel"}),(0,Pa.jsx)("button",{type:"submit",disabled:!s.trim()||u,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2",children:u?(0,Pa.jsxs)(Pa.Fragment,{children:[(0,Pa.jsx)("div",{className:"w-4 h-4 animate-spin border-2 border-white border-t-transparent rounded-full"}),"Creating..."]}):(0,Pa.jsxs)(Pa.Fragment,{children:[(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create ",null===h||void 0===h?void 0:h.title]})})]})]})})},eu=()=>(0,Pa.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Pa.jsxs)("div",{className:"text-center",children:[(0,Pa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Pa.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading journey map..."})]})}),tu=e=>{let{onSelectJourneyMap:t,onBack:n,user:i}=e;const[a,o]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[u,c]=(0,r.useState)(!1),[d,p]=(0,r.useState)(null);(0,r.useEffect)(()=>Gl(e=>{o(e),l(!1)}),[]);const f=async(e,t)=>{if(window.confirm(`Are you sure you want to delete "${t}"? This action cannot be undone.`)){p(e);try{await(async e=>{try{const t=await Kl(e);await Vl(e,"map_deleted",`Journey map "${null===t||void 0===t?void 0:t.name}" deleted`,t);const{error:n}=await Ul.from(Wl).delete().eq("id",e);if(n)throw n}catch(t){throw console.error("Error deleting journey map:",t),t}})(e)}catch(n){console.error("Failed to delete journey map:",n),alert("Failed to delete journey map. Please try again.")}finally{p(null)}}},h=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),g=e=>e?e.reduce((e,t)=>e+(t.tasks?t.tasks.length:0),0):0,m=e=>e?e.reduce((e,t)=>t.tasks?e+t.tasks.reduce((e,t)=>e+(t.steps?t.steps.length:0),0):e,0):0;return s?(0,Pa.jsx)(eu,{}):(0,Pa.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Pa.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Pa.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,Pa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pa.jsx)("div",{className:"flex items-center gap-4",children:(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"All Maps"}),(0,Pa.jsx)("p",{className:"text-gray-600 mt-2",children:"Create and manage different types of mapping for your projects"}),i&&(0,Pa.jsxs)("div",{className:"flex items-center mt-3 text-sm text-green-600",children:[(0,Pa.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),(0,Pa.jsx)("span",{children:"Connected \u2022 Real-time collaboration enabled"})]})]})}),(0,Pa.jsxs)("button",{onClick:()=>c(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Map"]})]})})}),(0,Pa.jsx)("main",{className:"max-w-7xl mx-auto px-4 pt-8 pb-12",children:0===a.length?(0,Pa.jsx)("div",{className:"text-center py-12",children:(0,Pa.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,Pa.jsx)("svg",{className:"w-24 h-24 mx-auto mb-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})}),(0,Pa.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Maps Yet"}),(0,Pa.jsx)("p",{className:"text-gray-600 mb-6",children:"Create your first map to start visualizing user journeys or jobs to be done."}),(0,Pa.jsxs)("button",{onClick:()=>c(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create First Map"]})]})}):(0,Pa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>{const n=Ha(e.map_type);return(0,Pa.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow overflow-hidden",children:(0,Pa.jsxs)("div",{className:"p-6",children:[(0,Pa.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Pa.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,Pa.jsx)("span",{className:"text-2xl flex-shrink-0",children:n.icon}),(0,Pa.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Pa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),(0,Pa.jsx)("p",{className:"text-sm text-gray-500",children:n.name})]})]}),(0,Pa.jsx)("button",{onClick:()=>f(e.id,e.name),disabled:d===e.id,className:"text-gray-400 hover:text-red-600 transition-colors disabled:opacity-50 flex-shrink-0",title:"Delete map",children:d===e.id?(0,Pa.jsx)("div",{className:"w-5 h-5 animate-spin border-2 border-red-600 border-t-transparent rounded-full"}):(0,Pa.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,Pa.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,Pa.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Pa.jsxs)("span",{className:"text-gray-600",children:[n.stages,":"]}),(0,Pa.jsx)("span",{className:"font-medium text-blue-600",children:(r=e.stages,r?r.length:0)})]}),(0,Pa.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Pa.jsxs)("span",{className:"text-gray-600",children:[n.tasks,":"]}),(0,Pa.jsx)("span",{className:"font-medium text-green-600",children:g(e.stages)})]}),(0,Pa.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Pa.jsxs)("span",{className:"text-gray-600",children:[n.steps,":"]}),(0,Pa.jsx)("span",{className:"font-medium text-purple-600",children:m(e.stages)})]})]}),(0,Pa.jsxs)("div",{className:"text-xs text-gray-500 mb-4",children:["Created: ",h(e.created),e.last_modified&&(0,Pa.jsxs)("div",{children:["Modified: ",h(e.last_modified)]})]}),(0,Pa.jsx)("button",{onClick:()=>t(e.id,e.name,e.map_type),className:"w-full bg-gray-100 hover:bg-blue-600 hover:text-white text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors",children:"Open Map"})]})},e.id);var r})})}),(0,Pa.jsx)(Zl,{isOpen:u,onClose:()=>c(!1),onAdd:async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fa;try{const r=await ql(e,n);t(r,e,n)}catch(r){console.error("Failed to create journey map:",r),alert("Failed to create journey map. Please try again.")}}})]})},nu=e=>{let{currentView:t,onViewChange:n}=e;return(0,Pa.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,Pa.jsx)("button",{onClick:()=>n("painpoint"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("painpoint"===t?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Painpoint View"]})}),(0,Pa.jsx)("button",{onClick:()=>n("step"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("step"===t?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Step View"]})})]})},ru=e=>{let{isOpen:t,onClose:n,step:i,onSave:a,stageId:o,taskId:s,stageName:l,taskName:u,onDeleteStep:c,onDeleteTask:d,onDeleteStage:p}=e;const[f,h]=(0,r.useState)(""),[g,m]=(0,r.useState)(Ea[0].id),[v,b]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),[x,k]=(0,r.useState)(""),[S,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{i&&t&&(h(i.description||""),m(i.personaId||Ea[0].id),b(i.painPoints?i.painPoints.join(". "):""),w(i.opportunities?i.opportunities.join(". "):""),k(i.insights||""),_(!1))},[i,t]),(0,r.useEffect)(()=>{if(i){const e=i.painPoints?i.painPoints.join(". "):"",t=i.opportunities?i.opportunities.join(". "):"",n=f!==(i.description||"")||g!==(i.personaId||Ea[0].id)||v!==e||y!==t||x!==(i.insights||"");_(n)}},[f,g,v,y,x,i]);const j=()=>{S&&!window.confirm("You have unsaved changes. Are you sure you want to cancel?")||n()},N=Ia(g);return t&&i?(0,Pa.jsxs)("div",{className:"fixed inset-0 z-[9999] flex",children:[(0,Pa.jsx)("div",{className:"flex-1 bg-black bg-opacity-50 transition-opacity duration-300",onClick:j}),(0,Pa.jsxs)("div",{className:`w-96 bg-white shadow-2xl transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"translate-x-full"} flex flex-col h-full relative z-[9999]`,children:[(0,Pa.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50 flex-shrink-0",children:[(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Step Details"}),(0,Pa.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[l," \u2192 ",u]})]}),(0,Pa.jsx)("button",{onClick:j,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Pa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Pa.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Step Description *"}),(0,Pa.jsx)("textarea",{value:f,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 resize-none",rows:"3",placeholder:"Describe what happens in this step..."})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Persona"}),(0,Pa.jsx)("select",{value:g,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:Ea.map(e=>(0,Pa.jsx)("option",{value:e.id,children:e.name},e.id))}),N&&(0,Pa.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,Pa.jsx)("div",{className:`${N.color} w-3 h-3 rounded-full`}),(0,Pa.jsx)("span",{className:"text-sm text-gray-600",children:N.name})]})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pain Points"}),(0,Pa.jsx)("textarea",{value:v,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 resize-none",rows:"3",placeholder:"Enter pain points separated by periods..."}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple pain points with periods"})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opportunities"}),(0,Pa.jsx)("textarea",{value:y,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 resize-none",rows:"3",placeholder:"Enter opportunities separated by periods..."}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple opportunities with periods"})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Insights"}),(0,Pa.jsx)("textarea",{value:x,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 resize-none",rows:"4",placeholder:"Enter customer insights, research findings, or additional context..."}),(0,Pa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Add any customer research, behavioral insights, or contextual information"})]})]}),(0,Pa.jsxs)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex-shrink-0 space-y-4",children:[(0,Pa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pa.jsx)("div",{className:"text-sm text-gray-500",children:S&&(0,Pa.jsxs)("span",{className:"flex items-center gap-1",children:[(0,Pa.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),"Unsaved changes"]})}),(0,Pa.jsxs)("div",{className:"flex gap-2",children:[c&&(0,Pa.jsxs)("button",{onClick:()=>{window.confirm(`Are you sure you want to delete this step: "${i.description}"?`)&&(c&&c(o,s,i.id),n())},className:"px-3 py-1.5 text-red-600 hover:text-red-700 hover:bg-red-50 text-sm rounded transition-colors flex items-center gap-1",title:"Delete this step",children:[(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Step"]}),d&&(0,Pa.jsxs)("button",{onClick:()=>{window.confirm(`Are you sure you want to delete the task "${u}" and all its steps?`)&&(d&&d(o,s),n())},className:"px-3 py-1.5 text-red-600 hover:text-red-700 hover:bg-red-50 text-sm rounded transition-colors flex items-center gap-1",title:"Delete this task and all its steps",children:[(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Task"]}),p&&(0,Pa.jsxs)("button",{onClick:()=>{window.confirm(`Are you sure you want to delete the stage "${l}" and all its tasks and steps?`)&&(p&&p(o),n())},className:"px-3 py-1.5 text-red-600 hover:text-red-700 hover:bg-red-50 text-sm rounded transition-colors flex items-center gap-1",title:"Delete this stage and all its tasks and steps",children:[(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Stage"]})]})]}),(0,Pa.jsxs)("div",{className:"flex justify-end gap-3 pt-2 border-t border-gray-200",children:[(0,Pa.jsx)("button",{onClick:j,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),(0,Pa.jsx)("button",{onClick:()=>{if(!i)return;const e={description:f.trim(),personaId:g,painPoints:v?v.split(".").map(e=>e.trim()).filter(e=>e):[],opportunities:y?y.split(".").map(e=>e.trim()).filter(e=>e):[],insights:x.trim()};a(o,s,i.id,e),_(!1),n()},disabled:!f.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:"Save Changes"})]})]})]})]}):null},iu=e=>{var t,n,i,a;let{editPanel:o,editablePainPoints:s,editableOpportunities:l,editableInsights:u,onCloseEditPanel:c,onAddPainPoint:d,onRemovePainPoint:p,onUpdatePainPoint:f,onAddOpportunity:h,onRemoveOpportunity:g,onUpdateOpportunity:m,onAddInsight:v,onRemoveInsight:b,onUpdateInsight:y,onSaveEditChanges:w,onDeleteStep:x}=e;const[k,S]=(0,r.useState)(!1);if(!o.isOpen)return null;return(0,Pa.jsxs)("div",{className:"fixed inset-0 z-[9999] flex",children:[(0,Pa.jsx)("div",{className:"flex-1 bg-black bg-opacity-50",onClick:c}),(0,Pa.jsxs)("div",{className:"w-1/2 max-w-2xl bg-white shadow-2xl h-full overflow-hidden flex flex-col relative z-[9999]",children:[(0,Pa.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:(0,Pa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("h2",{className:"text-2xl font-bold",children:"Edit Journey Details"}),(0,Pa.jsxs)("p",{className:"text-blue-100 mt-1",children:[null===(t=o.editData)||void 0===t||null===(n=t.stage)||void 0===n?void 0:n.name," \u2192 ",null===(i=o.editData)||void 0===i||null===(a=i.task)||void 0===a?void 0:a.name]})]}),(0,Pa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Pa.jsxs)("div",{className:"relative",children:[(0,Pa.jsx)("button",{onClick:()=>S(!k),className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",title:"More options",children:(0,Pa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),k&&(0,Pa.jsxs)(Pa.Fragment,{children:[(0,Pa.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>S(!1)}),(0,Pa.jsx)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-20",children:(0,Pa.jsx)("div",{className:"py-1",children:x&&(0,Pa.jsxs)("button",{onClick:()=>{S(!1),(()=>{var e,t;const n=(null===(e=o.editData)||void 0===e||null===(t=e.step)||void 0===t?void 0:t.description)||"this step";window.confirm(`Are you sure you want to delete "${n}"?`)&&(x(o.stageId,o.taskId,o.stepId),c())})()},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 transition-colors flex items-center gap-2",children:[(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Step"]})})})]})]}),(0,Pa.jsx)("button",{onClick:c,className:"text-white hover:text-gray-200 p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",children:(0,Pa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),(0,Pa.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:o.editData&&(0,Pa.jsxs)(Pa.Fragment,{children:[(0,Pa.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4",children:[(0,Pa.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 mr-2 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Step Details"]}),(0,Pa.jsx)("textarea",{defaultValue:o.editData.step.description||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Step description",rows:"3"})]}),(0,Pa.jsxs)("div",{className:"bg-red-50 rounded-lg p-4",children:[(0,Pa.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,Pa.jsxs)("div",{className:"flex items-center",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 mr-2 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Pain Points (",s.length,")"]})}),(0,Pa.jsxs)("div",{className:"space-y-2",children:[s.length>0?s.map((e,t)=>(0,Pa.jsxs)("div",{className:"flex gap-2",children:[(0,Pa.jsx)("input",{type:"text",value:e,onChange:e=>f(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:`Pain point ${t+1}`}),(0,Pa.jsx)("button",{onClick:()=>p(t),className:"px-3 py-2 text-red-600 hover:bg-red-100 rounded-md transition-colors",title:"Remove pain point",children:(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):(0,Pa.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No pain points yet. Click the button below to add the first one."}),(0,Pa.jsx)("button",{onClick:d,className:"w-full py-2 px-4 border-2 border-dashed border-red-300 text-red-600 rounded-md hover:bg-red-50 transition-colors",children:"+ Add Pain Point"})]})]}),(0,Pa.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,Pa.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,Pa.jsxs)("div",{className:"flex items-center",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v18m9-9H3"})}),"Opportunities (",l.length,")"]})}),(0,Pa.jsxs)("div",{className:"space-y-2",children:[l.length>0?l.map((e,t)=>(0,Pa.jsxs)("div",{className:"flex gap-2",children:[(0,Pa.jsx)("input",{type:"text",value:e,onChange:e=>m(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:`Opportunity ${t+1}`}),(0,Pa.jsx)("button",{onClick:()=>g(t),className:"px-3 py-2 text-green-600 hover:bg-green-100 rounded-md transition-colors",title:"Remove opportunity",children:(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):(0,Pa.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No opportunities yet. Click the button below to add the first one."}),(0,Pa.jsx)("button",{onClick:h,className:"w-full py-2 px-4 border-2 border-dashed border-green-300 text-green-600 rounded-md hover:bg-green-50 transition-colors",children:"+ Add Opportunity"})]})]}),(0,Pa.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,Pa.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center justify-between",children:(0,Pa.jsxs)("div",{className:"flex items-center",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5 mr-2 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Customer Insights (",(null===u||void 0===u?void 0:u.length)||0,")"]})}),(0,Pa.jsxs)("div",{className:"space-y-2",children:[u&&u.length>0?u.map((e,t)=>(0,Pa.jsxs)("div",{className:"flex gap-2",children:[(0,Pa.jsx)("textarea",{value:e,onChange:e=>y(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 resize-none",placeholder:`Customer insight ${t+1}`,rows:"2"}),(0,Pa.jsx)("button",{onClick:()=>b(t),className:"px-3 py-2 text-yellow-600 hover:bg-yellow-100 rounded-md transition-colors self-start",title:"Remove insight",children:(0,Pa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):(0,Pa.jsx)("div",{className:"text-center py-4 text-gray-500 italic",children:"No customer insights yet. Click the button below to add the first one."}),(0,Pa.jsx)("button",{onClick:v,className:"w-full py-2 px-4 border-2 border-dashed border-yellow-300 text-yellow-600 rounded-md hover:bg-yellow-50 transition-colors",children:"+ Add Customer Insight"})]})]})]})}),(0,Pa.jsx)("div",{className:"border-t bg-gray-50 p-6",children:(0,Pa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Pa.jsx)("button",{onClick:c,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Pa.jsx)("button",{onClick:w,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})})]})]})};const au=function(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[a,o]=(0,r.useState)(""),[s,l]=(0,r.useState)(Fa),[u,c]=(0,r.useState)([]),[p,f]=(0,r.useState)(!0),[h,g]=(0,r.useState)(!1),[m,v]=(0,r.useState)(()=>{try{return localStorage.getItem("journeyMapView")||"painpoint"}catch(e){return"painpoint"}}),[b,y]=(0,r.useState)(!1),[w,x]=(0,r.useState)({isOpen:!1,step:null,stageId:null,taskId:null,stageName:"",taskName:""}),[k,S]=(0,r.useState)({isOpen:!1,editData:null,stageId:null,stageName:"",taskId:null,taskName:"",stepId:null}),[_,j]=(0,r.useState)([]),[N,C]=(0,r.useState)([]),[E,I]=(0,r.useState)([]),P=()=>{S({isOpen:!1,editData:null,stageId:null,stageName:"",taskId:null,taskName:"",stepId:null}),j([]),C([])},T=()=>{j([..._,""])},O=e=>{j(_.filter((t,n)=>n!==e))},D=(e,t)=>{const n=[..._];n[e]=t,j(n)},A=()=>{C([...N,""])},L=e=>{C(N.filter((t,n)=>n!==e))},R=(e,t)=>{const n=[...N];n[e]=t,C(n)},M=()=>{if(!k.editData)return;const e=_.filter(e=>""!==e.trim()),t=N.filter(e=>""!==e.trim()),n=E.filter(e=>""!==e.trim()),r={...k.editData.step,painPoints:e,opportunities:t,insights:n.length>0?n.join("\n\n"):""};V(k.stageId,k.taskId,k.stepId,r),P()};(0,r.useEffect)(()=>{const e=(n=async e=>{if(e){if(t(e),!localStorage.getItem("hasResetData"))try{await(async()=>{try{const{error:e}=await Ul.from(Hl).delete().neq("id",0);e&&console.error("Error clearing version history:",e);const{error:t}=await Ul.from(Wl).delete().neq("id",0);return t&&console.error("Error clearing journey maps:",t),console.log("All data cleared successfully"),!0}catch(e){throw console.error("Error resetting data:",e),e}})(),localStorage.setItem("hasResetData","true"),g(!0)}catch(n){console.error("Failed to reset data:",n)}await B()}else try{await(async()=>{try{return Fl()}catch(n){throw console.error("Error getting anonymous user:",n),n}})()}catch(n){console.error("Failed to sign in:",n),f(!1)}},n(Fl()),()=>{});var n;return e},[]);const B=async()=>{try{let e=localStorage.getItem("currentJourneyMapId"),t=localStorage.getItem("currentJourneyMapName"),n=localStorage.getItem("currentJourneyMapType")||Fa;if(e)return i(e),o(t||"My Journey Map"),l(n),void f(!1);const r=Gl(e=>{if(r(),e.length>0){const t=e[0];i(t.id),o(t.name),l(t.map_type||Fa),localStorage.setItem("currentJourneyMapId",t.id),localStorage.setItem("currentJourneyMapName",t.name),localStorage.setItem("currentJourneyMapType",t.map_type||Fa)}else $();f(!1)})}catch(e){console.error("Failed to initialize journey map:",e),f(!1)}},$=async()=>{try{const e=await ql("My Journey Map",Fa);i(e),o("My Journey Map"),l(Fa),localStorage.setItem("currentJourneyMapId",e),localStorage.setItem("currentJourneyMapName","My Journey Map"),localStorage.setItem("currentJourneyMapType",Fa)}catch(e){console.error("Failed to create default journey map:",e)}};(0,r.useEffect)(()=>{if(!n)return;const e=((e,t)=>{const n=async()=>{try{const n=await Kl(e);t(n)}catch(n){console.error("Error in subscribeToJourneyMap:",n)}};n();const r=Ul.channel(`journey_map_${e}`).on("postgres_changes",{event:"*",schema:"public",table:Wl,filter:`id=eq.${e}`},()=>{n()}).subscribe();return()=>{r.unsubscribe()}})(n,e=>{if(e&&e.stages)c(e.stages),l(e.map_type||Fa);else{const e=Ha(s),t=[{id:d(),name:`${e.stage} 1`,tasks:[]},{id:d(),name:`${e.stage} 2`,tasks:[]}];c(t),Jl(n,t,"Created default stages")}});return e},[n,s]),(0,r.useEffect)(()=>{try{localStorage.setItem("journeyMapView",m)}catch(e){console.error("Error saving view to localStorage:",e)}},[m]);const U=(e,t,n)=>{i(e),o(t),l(n||Fa),y(!1),localStorage.setItem("currentJourneyMapId",e),localStorage.setItem("currentJourneyMapName",t),localStorage.setItem("currentJourneyMapType",n||Fa)},F=()=>{y(!1)},z=async(e,t)=>{if(n)try{await Jl(n,e,t)}catch(r){console.error("Failed to update stages:",r)}},W=async e=>{const t=Ha(s),r=u.find(t=>t.id===e),i=u.filter(t=>t.id!==e);c(i),await Ql(n,"deleted",r,`Deleted ${t.stage.toLowerCase()}: "${null===r||void 0===r?void 0:r.name}"`),await z(i,`Deleted ${t.stage.toLowerCase()}: "${null===r||void 0===r?void 0:r.name}"`)},H=async(e,t)=>{const r=Ha(s),i=u.find(t=>t.id===e),a=null===i||void 0===i?void 0:i.tasks.find(e=>e.id===t),o=u.map(n=>n.id===e?{...n,tasks:n.tasks.filter(e=>e.id!==t)}:n);c(o),await Yl(n,"deleted",a,`Deleted ${r.task.toLowerCase()}: "${null===a||void 0===a?void 0:a.name}"`),await z(o,`Deleted ${r.task.toLowerCase()}: "${null===a||void 0===a?void 0:a.name}"`)},V=async(e,t,r,i)=>{const a=Ha(s),o=u.map(n=>n.id===e?{...n,tasks:n.tasks.map(e=>e.id===t?{...e,steps:e.steps.map(e=>e.id===r?{...i,id:r}:e)}:e)}:n);c(o),await Xl(n,"updated",{...i,id:r},`Updated ${a.step.toLowerCase()}: "${i.description||"Step"}"`),await z(o,`Updated ${a.step.toLowerCase()}: "${i.description||"Step"}"`)},G=async(e,t,r)=>{const i=Ha(s),a=u.find(t=>t.id===e),o=null===a||void 0===a?void 0:a.tasks.find(e=>e.id===t),l=null===o||void 0===o?void 0:o.steps.find(e=>e.id===r),d=u.map(n=>n.id===e?{...n,tasks:n.tasks.map(e=>e.id===t?{...e,steps:e.steps.filter(e=>e.id!==r)}:e)}:n);c(d),await Xl(n,"deleted",l,`Deleted ${i.step.toLowerCase()}: "${(null===l||void 0===l?void 0:l.description)||"Step"}"`),await z(d,`Deleted ${i.step.toLowerCase()}: "${(null===l||void 0===l?void 0:l.description)||"Step"}"`)};return p?(0,Pa.jsx)(eu,{}):b?(0,Pa.jsx)(tu,{onSelectJourneyMap:U,onBack:F,user:e}):(Ha(s),(0,Pa.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Pa.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Pa.jsx)("div",{className:"max-w-full mx-auto px-4 py-2",children:(0,Pa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pa.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Pa.jsxs)("button",{onClick:()=>{y(!0)},className:"text-gray-600 hover:text-gray-900 transition-colors flex items-center gap-1",title:"Back to all journey maps",children:[(0,Pa.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,Pa.jsx)("span",{className:"text-sm",children:"Back"})]}),(0,Pa.jsxs)("div",{children:[(0,Pa.jsx)("div",{className:"flex items-center gap-2",children:(0,Pa.jsx)(Ra,{title:a,onSave:async e=>{try{await(async(e,t)=>{try{const n=await Kl(e),r=null===n||void 0===n?void 0:n.name,{error:i}=await Ul.from(Wl).update({name:t,last_modified:(new Date).toISOString()}).eq("id",e);if(i)throw i;await Vl(e,"name_updated",`Journey map name changed from "${r}" to "${t}"`,r,t)}catch(n){throw console.error("Error updating journey map name:",n),n}})(n,e),o(e),localStorage.setItem("currentJourneyMapName",e)}catch(t){throw console.error("Failed to update journey map name:",t),t}},className:"text-xl font-bold text-gray-900"})}),e&&(0,Pa.jsxs)("div",{className:"flex items-center mt-1 text-xs text-green-600",children:[(0,Pa.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5"}),(0,Pa.jsxs)("span",{children:["Connected as ",zl(e)," \u2022 Real-time collaboration enabled"]})]})]})]}),(0,Pa.jsx)(nu,{currentView:m,onViewChange:v})]})})}),(0,Pa.jsx)("main",{className:"max-w-full mx-auto px-4 pt-2 pb-4",children:(0,Pa.jsx)(Xa,{stages:u,journeyMapName:a,journeyMapType:s,currentView:m,onAddStage:async e=>{const t=Ha(s),r={id:d(),name:e,tasks:[]},i=[...u,r];c(i),await Ql(n,"added",r,`Added ${t.stage.toLowerCase()}: "${e}"`),await z(i,`Added ${t.stage.toLowerCase()}: "${e}"`)},onUpdateStage:async(e,t)=>{const r=Ha(s),i=u.find(t=>t.id===e),a=u.map(n=>n.id===e?{...n,name:t}:n);c(a),await Ql(n,"updated",{id:e,name:t},`Updated ${r.stage.toLowerCase()}: "${null===i||void 0===i?void 0:i.name}" \u2192 "${t}"`),await z(a,`Updated ${r.stage.toLowerCase()}: "${null===i||void 0===i?void 0:i.name}" \u2192 "${t}"`)},onDeleteStage:W,onAddTask:async(e,t)=>{const r=Ha(s),i={...t,id:d(),steps:[]},a=u.map(t=>t.id===e?{...t,tasks:[...t.tasks,i]}:t);c(a),await Yl(n,"added",i,`Added ${r.task.toLowerCase()}: "${t.name}"`),await z(a,`Added ${r.task.toLowerCase()}: "${t.name}"`)},onUpdateTask:async(e,t,r)=>{const i=Ha(s),a=u.map(n=>n.id===e?{...n,tasks:n.tasks.map(e=>e.id===t?{...r,id:t,steps:e.steps}:e)}:n);c(a),await Yl(n,"updated",{...r,id:t},`Updated ${i.task.toLowerCase()}: "${r.name}"`),await z(a,`Updated ${i.task.toLowerCase()}: "${r.name}"`)},onDeleteTask:H,onAddStep:async(e,t,r)=>{const i=Ha(s),a={...r,id:d()},o=u.map(n=>n.id===e?{...n,tasks:n.tasks.map(e=>e.id===t?{...e,steps:[...e.steps,a]}:e)}:n);c(o),await Xl(n,"added",a,`Added ${i.step.toLowerCase()}: "${r.description||"New step"}"`),await z(o,`Added ${i.step.toLowerCase()}: "${r.description||"New step"}"`)},onUpdateStep:V,onDeleteStep:G,onMoveStep:async e=>{let{stepId:t,sourceStageId:r,sourceTaskId:i,sourceIndex:a,destStageId:o,destTaskId:l,destIndex:d}=e;const p=Ha(s),f=u.find(e=>e.id===r),h=null===f||void 0===f?void 0:f.tasks.find(e=>e.id===i),g=null===h||void 0===h?void 0:h.steps.find(e=>e.id===t);if(!g)return;const m=u.map(e=>e.id===r?{...e,tasks:e.tasks.map(e=>e.id===i?{...e,steps:e.steps.filter(e=>e.id!==t)}:e)}:e).map(e=>e.id===o?{...e,tasks:e.tasks.map(e=>{if(e.id===l){const t=[...e.steps];return t.splice(d,0,g),{...e,steps:t}}return e})}:e);c(m);const v=(null===h||void 0===h?void 0:h.name)||"Unknown Task",b=u.find(e=>e.id===o),y=null===b||void 0===b?void 0:b.tasks.find(e=>e.id===l),w=(null===y||void 0===y?void 0:y.name)||"Unknown Task",x=r===o&&i===l?`Reordered ${p.step.toLowerCase()}: "${g.description||"Step"}" within ${v}`:`Moved ${p.step.toLowerCase()}: "${g.description||"Step"}" from ${v} to ${w}`;await Xl(n,"moved",g,x),await z(m,x)},onSwitchToStepView:()=>{v("step")},onImportData:async e=>{window.confirm("This will replace all current data. Are you sure you want to continue?")&&(c(e),await z(e,"Data imported from file"))},onOpenStepDetail:(e,t,n,r,i)=>{x({isOpen:!0,step:e,stageId:t,taskId:n,stageName:r,taskName:i})},onOpenEditPanel:(e,t,n,r,i,a)=>{const o=u.find(e=>e.id===n),s=null===o||void 0===o?void 0:o.tasks.find(e=>e.id===i),l=e.stepId||e.id,c=null===s||void 0===s?void 0:s.steps.find(e=>e.id===l);c&&s&&o&&(j(c.painPoints||[]),C(c.opportunities||[]),I(c.insights?[c.insights]:[]),S({isOpen:!0,editData:{stage:o,task:s,step:c,allPainPoints:c.painPoints||[],allOpportunities:c.opportunities||[]},stageId:n,stageName:r,taskId:i,taskName:a,stepId:c.id}))},editPanel:k,editablePainPoints:_,editableOpportunities:N,onCloseEditPanel:P,onAddPainPoint:T,onRemovePainPoint:O,onUpdatePainPoint:D,onAddOpportunity:A,onRemoveOpportunity:L,onUpdateOpportunity:R,onSaveEditChanges:M})}),(0,Pa.jsx)(ru,{isOpen:w.isOpen,onClose:()=>{x({isOpen:!1,step:null,stageId:null,taskId:null,stageName:"",taskName:""})},step:w.step,onSave:V,stageId:w.stageId,taskId:w.taskId,stageName:w.stageName,taskName:w.taskName,journeyMapType:s,onDeleteStep:G,onDeleteTask:H,onDeleteStage:W}),(0,Pa.jsx)(iu,{editPanel:k,editablePainPoints:_,editableOpportunities:N,editableInsights:E,onCloseEditPanel:P,onAddPainPoint:T,onRemovePainPoint:O,onUpdatePainPoint:D,onAddOpportunity:A,onRemoveOpportunity:L,onUpdateOpportunity:R,onAddInsight:()=>{I([...E,""])},onRemoveInsight:e=>{I(E.filter((t,n)=>n!==e))},onUpdateInsight:(e,t)=>{const n=[...E];n[e]=t,I(n)},onSaveEditChanges:M,onDeleteStep:G,onDeleteTask:H,onDeleteStage:W})]}))};i.createRoot(document.getElementById("root")).render((0,Pa.jsx)(r.StrictMode,{children:(0,Pa.jsx)(au,{})}))})();
//# sourceMappingURL=main.b3a24617.js.map